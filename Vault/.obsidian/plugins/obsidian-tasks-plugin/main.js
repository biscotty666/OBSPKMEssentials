/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var ub=Object.create;var Ii=Object.defineProperty,lb=Object.defineProperties,cb=Object.getOwnPropertyDescriptor,db=Object.getOwnPropertyDescriptors,fb=Object.getOwnPropertyNames,cp=Object.getOwnPropertySymbols,pb=Object.getPrototypeOf,fp=Object.prototype.hasOwnProperty,mb=Object.prototype.propertyIsEnumerable;var dp=(r,e,t)=>e in r?Ii(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,he=(r,e)=>{for(var t in e||(e={}))fp.call(e,t)&&dp(r,t,e[t]);if(cp)for(var t of cp(e))mb.call(e,t)&&dp(r,t,e[t]);return r},Dt=(r,e)=>lb(r,db(e));var b=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),hb=(r,e)=>{for(var t in e)Ii(r,t,{get:e[t],enumerable:!0})},pp=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fb(e))!fp.call(r,i)&&i!==t&&Ii(r,i,{get:()=>e[i],enumerable:!(n=cb(e,i))||n.enumerable});return r};var Fi=(r,e,t)=>(t=r!=null?ub(pb(r)):{},pp(e||!r||!r.__esModule?Ii(t,"default",{value:r,enumerable:!0}):t,r)),gb=r=>pp(Ii({},"__esModule",{value:!0}),r);var F=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Ee=b($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.matchAnyPattern=$r.extractTerms=$r.repeatedTimeunitPattern=void 0;function bb(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}$r.repeatedTimeunitPattern=bb;function mp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}$r.extractTerms=mp;function vb(r){return`(?:${mp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}$r.matchAnyPattern=vb});var ge=b((mu,hu)=>{(function(r,e){typeof mu=="object"&&typeof hu!="undefined"?hu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(mu,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",p="year",m="date",T="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},U=function(j,A,w){var B=String(j);return!B||B.length>=A?j:""+Array(A+1-B.length).join(w)+j},q={s:U,z:function(j){var A=-j.utcOffset(),w=Math.abs(A),B=Math.floor(w/60),P=w%60;return(A<=0?"+":"-")+U(B,2,"0")+":"+U(P,2,"0")},m:function j(A,w){if(A.date()<w.date())return-j(w,A);var B=12*(w.year()-A.year())+(w.month()-A.month()),P=A.clone().add(B,l),X=w-P<0,d=A.clone().add(B+(X?-1:1),l);return+(-(B+(w-P)/(X?P-d:d-P))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:l,y:p,w:u,d:o,D:m,h:a,m:s,s:i,ms:n,Q:c}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},W="en",ie={};ie[W]=M;var te=function(j){return j instanceof Ce},ve=function(j,A,w){var B;if(!j)return W;if(typeof j=="string")ie[j]&&(B=j),A&&(ie[j]=A,B=j);else{var P=j.name;ie[P]=j,B=P}return!w&&B&&(W=B),B||!w&&W},G=function(j,A){if(te(j))return j.clone();var w=typeof A=="object"?A:{};return w.date=j,w.args=arguments,new Ce(w)},V=q;V.l=ve,V.i=te,V.w=function(j,A){return G(j,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var Ce=function(){function j(w){this.$L=ve(w.locale,null,!0),this.parse(w)}var A=j.prototype;return A.parse=function(w){this.$d=function(B){var P=B.date,X=B.utc;if(P===null)return new Date(NaN);if(V.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var d=P.match(y);if(d){var f=d[2]-1||0,h=(d[7]||"0").substring(0,3);return X?new Date(Date.UTC(d[1],f,d[3]||1,d[4]||0,d[5]||0,d[6]||0,h)):new Date(d[1],f,d[3]||1,d[4]||0,d[5]||0,d[6]||0,h)}}return new Date(P)}(w),this.$x=w.x||{},this.init()},A.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},A.$utils=function(){return V},A.isValid=function(){return this.$d.toString()!==T},A.isSame=function(w,B){var P=G(w);return this.startOf(B)<=P&&P<=this.endOf(B)},A.isAfter=function(w,B){return G(w)<this.startOf(B)},A.isBefore=function(w,B){return this.endOf(B)<G(w)},A.$g=function(w,B,P){return V.u(w)?this[B]:this.set(P,w)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(w,B){var P=this,X=!!V.u(B)||B,d=V.p(w),f=function(D,C){var me=V.w(P.$u?Date.UTC(P.$y,C,D):new Date(P.$y,C,D),P);return X?me:me.endOf(o)},h=function(D,C){return V.w(P.toDate()[D].apply(P.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(C)),P)},g=this.$W,_=this.$M,v=this.$D,k="set"+(this.$u?"UTC":"");switch(d){case p:return X?f(1,0):f(31,11);case l:return X?f(1,_):f(0,_+1);case u:var S=this.$locale().weekStart||0,O=(g<S?g+7:g)-S;return f(X?v-O:v+(6-O),_);case o:case m:return h(k+"Hours",0);case a:return h(k+"Minutes",1);case s:return h(k+"Seconds",2);case i:return h(k+"Milliseconds",3);default:return this.clone()}},A.endOf=function(w){return this.startOf(w,!1)},A.$set=function(w,B){var P,X=V.p(w),d="set"+(this.$u?"UTC":""),f=(P={},P[o]=d+"Date",P[m]=d+"Date",P[l]=d+"Month",P[p]=d+"FullYear",P[a]=d+"Hours",P[s]=d+"Minutes",P[i]=d+"Seconds",P[n]=d+"Milliseconds",P)[X],h=X===o?this.$D+(B-this.$W):B;if(X===l||X===p){var g=this.clone().set(m,1);g.$d[f](h),g.init(),this.$d=g.set(m,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},A.set=function(w,B){return this.clone().$set(w,B)},A.get=function(w){return this[V.p(w)]()},A.add=function(w,B){var P,X=this;w=Number(w);var d=V.p(B),f=function(_){var v=G(X);return V.w(v.date(v.date()+Math.round(_*w)),X)};if(d===l)return this.set(l,this.$M+w);if(d===p)return this.set(p,this.$y+w);if(d===o)return f(1);if(d===u)return f(7);var h=(P={},P[s]=e,P[a]=t,P[i]=r,P)[d]||1,g=this.$d.getTime()+w*h;return V.w(g,this)},A.subtract=function(w,B){return this.add(-1*w,B)},A.format=function(w){var B=this,P=this.$locale();if(!this.isValid())return P.invalidDate||T;var X=w||"YYYY-MM-DDTHH:mm:ssZ",d=V.z(this),f=this.$H,h=this.$m,g=this.$M,_=P.weekdays,v=P.months,k=function(C,me,ae,ee){return C&&(C[me]||C(B,X))||ae[me].substr(0,ee)},S=function(C){return V.s(f%12||12,C,"0")},O=P.meridiem||function(C,me,ae){var ee=C<12?"AM":"PM";return ae?ee.toLowerCase():ee},D={YY:String(this.$y).slice(-2),YYYY:this.$y,M:g+1,MM:V.s(g+1,2,"0"),MMM:k(P.monthsShort,g,v,3),MMMM:k(v,g),D:this.$D,DD:V.s(this.$D,2,"0"),d:String(this.$W),dd:k(P.weekdaysMin,this.$W,_,2),ddd:k(P.weekdaysShort,this.$W,_,3),dddd:_[this.$W],H:String(f),HH:V.s(f,2,"0"),h:S(1),hh:S(2),a:O(f,h,!0),A:O(f,h,!1),m:String(h),mm:V.s(h,2,"0"),s:String(this.$s),ss:V.s(this.$s,2,"0"),SSS:V.s(this.$ms,3,"0"),Z:d};return X.replace(E,function(C,me){return me||D[C]||d.replace(":","")})},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(w,B,P){var X,d=V.p(B),f=G(w),h=(f.utcOffset()-this.utcOffset())*e,g=this-f,_=V.m(this,f);return _=(X={},X[p]=_/12,X[l]=_,X[c]=_/3,X[u]=(g-h)/6048e5,X[o]=(g-h)/864e5,X[a]=g/t,X[s]=g/e,X[i]=g/r,X)[d]||g,P?_:V.a(_)},A.daysInMonth=function(){return this.endOf(l).$D},A.$locale=function(){return ie[this.$L]},A.locale=function(w,B){if(!w)return this.$L;var P=this.clone(),X=ve(w,B,!0);return X&&(P.$L=X),P},A.clone=function(){return V.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},j}(),Fe=Ce.prototype;return G.prototype=Fe,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",p],["$D",m]].forEach(function(j){Fe[j[1]]=function(A){return this.$g(A,j[0],j[1])}}),G.extend=function(j,A){return j.$i||(j(A,Ce,G),j.$i=!0),G},G.locale=ve,G.isDayjs=te,G.unix=function(j){return G(1e3*j)},G.en=ie[W],G.Ls=ie,G.p={},G})});var nt=b(jr=>{"use strict";var Eb=jr&&jr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jr,"__esModule",{value:!0});jr.findYearClosestToRef=jr.findMostLikelyADYear=void 0;var wb=Eb(ge());function kb(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}jr.findMostLikelyADYear=kb;function Ob(r,e,t){let n=wb.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}jr.findYearClosestToRef=Ob});var it=b(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.parseTimeUnits=re.TIME_UNITS_PATTERN=re.parseYear=re.YEAR_PATTERN=re.parseOrdinalNumberPattern=re.ORDINAL_NUMBER_PATTERN=re.parseNumberPattern=re.NUMBER_PATTERN=re.TIME_UNIT_DICTIONARY=re.ORDINAL_WORD_DICTIONARY=re.INTEGER_WORD_DICTIONARY=re.MONTH_DICTIONARY=re.FULL_MONTH_NAME_DICTIONARY=re.WEEKDAY_DICTIONARY=void 0;var ha=Ee(),Db=nt();re.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};re.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};re.MONTH_DICTIONARY=Object.assign(Object.assign({},re.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});re.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};re.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};re.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};re.NUMBER_PATTERN=`(?:${ha.matchAnyPattern(re.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function gp(r){let e=r.toLowerCase();return re.INTEGER_WORD_DICTIONARY[e]!==void 0?re.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}re.parseNumberPattern=gp;re.ORDINAL_NUMBER_PATTERN=`(?:${ha.matchAnyPattern(re.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Sb(r){let e=r.toLowerCase();return re.ORDINAL_WORD_DICTIONARY[e]!==void 0?re.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}re.parseOrdinalNumberPattern=Sb;re.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function Rb(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return Db.findMostLikelyADYear(e)}re.parseYear=Rb;var yp=`(${re.NUMBER_PATTERN})\\s{0,3}(${ha.matchAnyPattern(re.TIME_UNIT_DICTIONARY)})`,hp=new RegExp(yp,"i");re.TIME_UNITS_PATTERN=ha.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",yp);function Mb(r){let e={},t=r,n=hp.exec(t);for(;n;)xb(e,n),t=t.substring(n[0].length).trim(),n=hp.exec(t);return e}re.parseTimeUnits=Mb;function xb(r,e){let t=gp(e[1]),n=re.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var _p=b((gu,yu)=>{(function(r,e){typeof gu=="object"&&typeof yu!="undefined"?yu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(gu,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var p=this.quarter()-1;return c?this.month(3*p).startOf(r).startOf("day"):this.month(3*p+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var Ut=b(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.implySimilarTime=or.assignSimilarTime=or.assignSimilarDate=or.assignTheNextDay=void 0;var Tp=Be();function Ab(r,e){e=e.add(1,"day"),bp(r,e),vp(r,e)}or.assignTheNextDay=Ab;function bp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}or.assignSimilarDate=bp;function Pb(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Tp.Meridiem.AM):r.assign("meridiem",Tp.Meridiem.PM)}or.assignSimilarTime=Pb;function vp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}or.implySimilarTime=vp});var Ep=b(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.toTimezoneOffset=cn.TIMEZONE_ABBR_MAP=void 0;cn.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Cb(r){var e;return r==null?null:typeof r=="number"?r:(e=cn.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}cn.toTimezoneOffset=Cb});var Ne=b(ur=>{"use strict";var wp=ur&&ur.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ur,"__esModule",{value:!0});ur.ParsingResult=ur.ParsingComponents=ur.ReferenceWithTimezone=void 0;var Nb=wp(_p()),ga=wp(ge()),_u=Ut(),Ib=Ep();ga.default.extend(Nb.default);var Tu=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=Ib.toTimezoneOffset(e.timezone))}};ur.ReferenceWithTimezone=Tu;var dn=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=ga.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new dn(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return ga.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=ga.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new dn(e);return t.hour||t.minute||t.second?(_u.assignSimilarTime(i,n),_u.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(_u.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};ur.ParsingComponents=dn;var Li=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new dn(e),this.end=s}clone(){let e=new Li(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};ur.ParsingResult=Li});var L=b(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.AbstractParserWithWordBoundaryChecking=void 0;var bu=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};ya.AbstractParserWithWordBoundaryChecking=bu});var kp=b(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var Eu=it(),Fb=Ne(),Lb=L(),Ub=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Eu.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Wb=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Eu.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),vu=class extends Lb.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?Wb:Ub}innerExtract(e,t){let n=Eu.parseTimeUnits(t[1]);return Fb.ParsingComponents.createRelativeFromReference(e.reference,n)}};wu.default=vu});var xp=b(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});var qb=nt(),Rp=it(),Mp=it(),_a=it(),Yb=Ee(),$b=L(),jb=new RegExp(`(?:on\\s{0,3})?(${_a.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${_a.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${Yb.matchAnyPattern(Rp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Mp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Op=1,Dp=2,Gb=3,Sp=4,ku=class extends $b.AbstractParserWithWordBoundaryChecking{innerPattern(){return jb}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Rp.MONTH_DICTIONARY[t[Gb].toLowerCase()],s=_a.parseOrdinalNumberPattern(t[Op]);if(s>31)return t.index=t.index+t[Op].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Sp]){let a=Mp.parseYear(t[Sp]);n.start.assign("year",a)}else{let a=qb.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Dp]){let a=_a.parseOrdinalNumberPattern(t[Dp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ou.default=ku});var Ip=b(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var Bb=nt(),Cp=it(),Ta=it(),Np=it(),Hb=Ee(),zb=L(),Kb=new RegExp(`(${Hb.matchAnyPattern(Cp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Ta.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Ta.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Np.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),Vb=1,Qb=2,Ap=3,Pp=4,Du=class extends zb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Kb}innerExtract(e,t){let n=Cp.MONTH_DICTIONARY[t[Vb].toLowerCase()],i=Ta.parseOrdinalNumberPattern(t[Qb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Pp]){let u=Np.parseYear(t[Pp]);s.assign("year",u)}else{let u=Bb.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Ap])return s;let a=Ta.parseOrdinalNumberPattern(t[Ap]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Su.default=Du});var Up=b(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var Ru=it(),Xb=nt(),Zb=Ee(),Lp=it(),Jb=L(),ev=new RegExp(`((?:in)\\s*)?(${Zb.matchAnyPattern(Ru.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Lp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),tv=1,rv=2,Fp=3,Mu=class extends Jb.AbstractParserWithWordBoundaryChecking{innerPattern(){return ev}innerExtract(e,t){let n=t[rv].toLowerCase();if(t[0].length<=3&&!Ru.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[tv]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Ru.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Fp]){let a=Lp.parseYear(t[Fp]);i.start.assign("year",a)}else{let a=Xb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};xu.default=Mu});var Yp=b(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var qp=it(),nv=Ee(),iv=L(),sv=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${nv.matchAnyPattern(qp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),av=1,ov=2,Wp=3,uv=4,Au=class extends iv.AbstractParserWithWordBoundaryChecking{innerPattern(){return sv}innerExtract(e,t){let n=t[Wp]?parseInt(t[Wp]):qp.MONTH_DICTIONARY[t[ov].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[av]);return{day:parseInt(t[uv]),month:n,year:i}}};Pu.default=Au});var $p=b(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var lv=L(),cv=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),dv=1,fv=2,Cu=class extends lv.AbstractParserWithWordBoundaryChecking{innerPattern(){return cv}innerExtract(e,t){let n=parseInt(t[fv]),i=parseInt(t[dv]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Nu.default=Cu});var fn=b(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.AbstractTimeExpressionParser=void 0;var ht=Be();function pv(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function mv(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var jp=2,jn=3,ba=4,va=5,Ui=6,Iu=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[jp]);if(o>100){if(this.strictMode||t[jn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[jn]!=null){if(t[jn].length==1&&!t[Ui])return null;s=parseInt(t[jn])}if(s>=60)return null;if(o>12&&(a=ht.Meridiem.PM),t[Ui]!=null){if(o>12)return null;let u=t[Ui][0].toLowerCase();u=="a"&&(a=ht.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=ht.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",ht.Meridiem.AM):i.imply("meridiem",ht.Meridiem.PM),t[va]!=null){let u=parseInt(t[va].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ba]!=null){let u=parseInt(t[ba]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[va]!=null){let u=parseInt(t[va].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ba]!=null){let u=parseInt(t[ba]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[jp]),a=0,o=-1;if(t[jn]!=null?a=parseInt(t[jn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=ht.Meridiem.PM),t[Ui]!=null){if(s>12)return null;let u=t[Ui][0].toLowerCase();u=="a"&&(o=ht.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=ht.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==ht.Meridiem.AM?(n.start.imply("meridiem",ht.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",ht.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",ht.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",ht.Meridiem.PM)):s>12?i.imply("meridiem",ht.Meridiem.PM):s<=12&&i.imply("meridiem",ht.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=pv(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=mv(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Ea.AbstractTimeExpressionParser=Iu});var Gp=b(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var wa=Be(),hv=fn(),Fu=class extends hv.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",wa.Meridiem.PM)):i<6&&n.assign("meridiem",wa.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",wa.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",wa.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Lu.default=Fu});var Wt=b(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.addImpliedTimeUnits=Gn.reverseTimeUnits=void 0;function gv(r){let e={};for(let t in r)e[t]=-r[t];return e}Gn.reverseTimeUnits=gv;function yv(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}Gn.addImpliedTimeUnits=yv});var Bp=b(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var Wu=it(),_v=Ne(),Tv=L(),bv=Wt(),vv=new RegExp(`(${Wu.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Ev=new RegExp(`(${Wu.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Uu=class extends Tv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Ev:vv}innerExtract(e,t){let n=Wu.parseTimeUnits(t[1]),i=bv.reverseTimeUnits(n);return _v.ParsingComponents.createRelativeFromReference(e.reference,i)}};qu.default=Uu});var Hp=b(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var $u=it(),wv=Ne(),kv=L(),Ov=new RegExp(`(${$u.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Dv=new RegExp("("+$u.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Sv=1,Yu=class extends kv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Dv:Ov}innerExtract(e,t){let n=$u.parseTimeUnits(t[Sv]);return wv.ParsingComponents.createRelativeFromReference(e.reference,n)}};ju.default=Yu});var Hn=b(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.MergingRefiner=Bn.Filter=void 0;var Gu=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};Bn.Filter=Gu;var Bu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};Bn.MergingRefiner=Bu});var lr=b(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});var Rv=Hn(),Hu=class extends Rv.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};zu.default=Hu});var zp=b(Wi=>{"use strict";var Mv=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var xv=Mv(lr()),Ku=class extends xv.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Wi.default=Ku});var Kp=b(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.mergeDateTimeComponent=zn.mergeDateTimeResult=void 0;var Av=Be();function Pv(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=Vu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=Vu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}zn.mergeDateTimeResult=Pv;function Vu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Av.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}zn.mergeDateTimeComponent=Vu});var Tr=b(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var Cv=Hn(),Vp=Kp(),Qu=class extends Cv.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Vp.mergeDateTimeResult(t,n):Vp.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Xu.default=Qu});var Qp=b(qi=>{"use strict";var Nv=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var Iv=Nv(Tr()),Zu=class extends Iv.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};qi.default=Zu});var Xp=b(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var Fv=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Lv={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Ju=class{constructor(e){this.timezone=Object.assign(Object.assign({},Lv),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Fv.exec(u);if(!l)return;let c=l[1].toUpperCase(),p=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(p===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${p} for: ${s.start}`)});let m=s.start.get("timezoneOffset");m!==null&&p!=m&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",p),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",p))}),t}};el.default=Ju});var ka=b(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var Uv=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Wv=1,qv=2,Yv=3,tl=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=Uv.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[qv]),o=parseInt(s[Yv]||"0"),u=a*60+o;u>14*60||(s[Wv]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};rl.default=tl});var Zp=b(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var nl=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};il.default=nl});var Jp=b(Yi=>{"use strict";var $v=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var jv=$v(ge()),sl=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=jv.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};Yi.default=sl});var em=b(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var Gv=Hn(),al=class extends Gv.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};ol.default=al});var cl=b(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var Bv=L(),Hv=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),zv=1,Kv=2,Vv=3,tm=4,Qv=5,rm=6,nm=7,im=8,sm=9,ul=class extends Bv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Hv}innerExtract(e,t){let n={};if(n.year=parseInt(t[zv]),n.month=parseInt(t[Kv]),n.day=parseInt(t[Vv]),t[tm]!=null)if(n.hour=parseInt(t[tm]),n.minute=parseInt(t[Qv]),t[rm]!=null&&(n.second=parseInt(t[rm])),t[nm]!=null&&(n.millisecond=parseInt(t[nm])),t[im]==null)n.timezoneOffset=0;else{let i=parseInt(t[im]),s=0;t[sm]!=null&&(s=parseInt(t[sm]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};ll.default=ul});var am=b(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var Xv=Hn(),dl=class extends Xv.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};fl.default=dl});var br=b(Kn=>{"use strict";var pn=Kn&&Kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.includeCommonConfiguration=void 0;var Zv=pn(Xp()),Jv=pn(ka()),om=pn(Zp()),eE=pn(Jp()),tE=pn(em()),rE=pn(cl()),nE=pn(am());function iE(r,e=!1){return r.parsers.unshift(new rE.default),r.refiners.unshift(new nE.default),r.refiners.unshift(new Zv.default),r.refiners.unshift(new Jv.default),r.refiners.unshift(new om.default),r.refiners.push(new om.default),r.refiners.push(new eE.default),r.refiners.push(new tE.default(e)),r}Kn.includeCommonConfiguration=iE});var Er=b(_e=>{"use strict";var sE=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.noon=_e.morning=_e.midnight=_e.yesterdayEvening=_e.evening=_e.lastNight=_e.tonight=_e.theDayAfter=_e.tomorrow=_e.theDayBefore=_e.yesterday=_e.today=_e.now=void 0;var cr=Ne(),Vn=sE(ge()),vr=Ut(),$i=Be();function aE(r){let e=Vn.default(r.instant),t=new cr.ParsingComponents(r,{});return vr.assignSimilarDate(t,e),vr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}_e.now=aE;function oE(r){let e=Vn.default(r.instant),t=new cr.ParsingComponents(r,{});return vr.assignSimilarDate(t,e),vr.implySimilarTime(t,e),t}_e.today=oE;function uE(r){return um(r,1)}_e.yesterday=uE;function um(r,e){return pl(r,-e)}_e.theDayBefore=um;function lE(r){return pl(r,1)}_e.tomorrow=lE;function pl(r,e){let t=Vn.default(r.instant),n=new cr.ParsingComponents(r,{});return t=t.add(e,"day"),vr.assignSimilarDate(n,t),vr.implySimilarTime(n,t),n}_e.theDayAfter=pl;function cE(r,e=22){let t=Vn.default(r.instant),n=new cr.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",$i.Meridiem.PM),vr.assignSimilarDate(n,t),n}_e.tonight=cE;function dE(r,e=0){let t=Vn.default(r.instant),n=new cr.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),vr.assignSimilarDate(n,t),n.imply("hour",e),n}_e.lastNight=dE;function fE(r,e=20){let t=new cr.ParsingComponents(r,{});return t.imply("meridiem",$i.Meridiem.PM),t.imply("hour",e),t}_e.evening=fE;function pE(r,e=20){let t=Vn.default(r.instant),n=new cr.ParsingComponents(r,{});return t=t.add(-1,"day"),vr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",$i.Meridiem.PM),n}_e.yesterdayEvening=pE;function mE(r){let e=new cr.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}_e.midnight=mE;function hE(r,e=6){let t=new cr.ParsingComponents(r,{});return t.imply("meridiem",$i.Meridiem.AM),t.imply("hour",e),t}_e.morning=hE;function gE(r){let e=new cr.ParsingComponents(r,{});return e.imply("meridiem",$i.Meridiem.AM),e.imply("hour",12),e}_e.noon=gE});var lm=b(Vt=>{"use strict";var yE=Vt&&Vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_E=Vt&&Vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),TE=Vt&&Vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yE(e,r,t);return _E(e,r),e},bE=Vt&&Vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vt,"__esModule",{value:!0});var vE=bE(ge()),EE=L(),wE=Ut(),ji=TE(Er()),kE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,ml=class extends EE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return kE}innerExtract(e,t){let n=vE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return ji.now(e.reference);case"today":return ji.today(e.reference);case"yesterday":return ji.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return ji.tomorrow(e.reference);case"tonight":return ji.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),wE.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Vt.default=ml});var cm=b(Gi=>{"use strict";var OE=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var Oa=Be(),DE=L(),SE=OE(ge()),RE=Ut(),ME=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,hl=class extends DE.AbstractParserWithWordBoundaryChecking{innerPattern(){return ME}innerExtract(e,t){let n=SE.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Oa.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Oa.Meridiem.PM),i.imply("hour",20);break;case"midnight":RE.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Oa.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Oa.Meridiem.AM),i.imply("hour",12);break}return i}};Gi.default=hl});var mn=b(Gr=>{"use strict";var xE=Gr&&Gr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.toDayJSClosestWeekday=Gr.toDayJSWeekday=void 0;var dm=xE(ge());function AE(r,e,t){if(!t)return fm(r,e);let n=dm.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}Gr.toDayJSWeekday=AE;function fm(r,e){let t=dm.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}Gr.toDayJSClosestWeekday=fm});var mm=b(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});var pm=it(),PE=Ee(),CE=L(),NE=mn(),IE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${PE.matchAnyPattern(pm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),FE=1,LE=2,UE=3,gl=class extends CE.AbstractParserWithWordBoundaryChecking{innerPattern(){return IE}innerExtract(e,t){let n=t[LE].toLowerCase(),i=pm.WEEKDAY_DICTIONARY[n],s=t[FE],a=t[UE],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=NE.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};yl.default=gl});var ym=b(Bi=>{"use strict";var WE=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var gm=it(),hm=Ne(),qE=WE(ge()),YE=L(),$E=Ee(),jE=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${$E.matchAnyPattern(gm.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),GE=1,BE=2,_l=class extends YE.AbstractParserWithWordBoundaryChecking{innerPattern(){return jE}innerExtract(e,t){let n=t[GE].toLowerCase(),i=t[BE].toLowerCase(),s=gm.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,hm.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,hm.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=qE.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Bi.default=_l});var Qt=b(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.ParsingContext=Zn.Chrono=void 0;var Qn=Ne(),HE=Tl(),Xn=class{constructor(e){e=e||HE.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Xn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Da(e,t,n),s=[];return this.parsers.forEach(a=>{let o=Xn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof Qn.ParsingResult?c=l:l instanceof Qn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};Zn.Chrono=Xn;var Da=class{constructor(e,t,n){this.text=e,this.reference=new Qn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Qn.ParsingComponents?e:new Qn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new Qn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};Zn.ParsingContext=Da});var hn=b(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var _m=nt(),zE=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Sa=1,Tm=5,bm=2,vm=3,bl=4,vl=class{constructor(e){this.groupNumberMonth=e?vm:bm,this.groupNumberDay=e?bm:vm}pattern(){return zE}extract(e,t){if(t[Sa]=="/"||t[Tm]=="/"){t.index+=t[0].length;return}let n=t.index+t[Sa].length,i=t[0].substr(t[Sa].length,t[0].length-t[Sa].length-t[Tm].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[bl]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[bl]){let u=parseInt(t[bl]),l=_m.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=_m.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};El.default=vl});var wm=b(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var Em=it(),KE=Ne(),VE=L(),QE=Wt(),XE=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Em.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),wl=class extends VE.AbstractParserWithWordBoundaryChecking{innerPattern(){return XE}innerExtract(e,t){let n=t[1].toLowerCase(),i=Em.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=QE.reverseTimeUnits(i);break}return KE.ParsingComponents.createRelativeFromReference(e.reference,i)}};kl.default=wl});var Om=b(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var ZE=Hn(),Ol=Ne(),JE=it(),ew=Wt();function km(r){return r.text.match(/\s+(before|from)$/i)!=null}function tw(r){return r.text.match(/\s+(after|since)$/i)!=null}var Dl=class extends ZE.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!km(t)&&!tw(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=JE.parseTimeUnits(t.text);km(t)&&(i=ew.reverseTimeUnits(i));let s=Ol.ParsingComponents.createRelativeFromReference(new Ol.ReferenceWithTimezone(n.start.date()),i);return new Ol.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Sl.default=Dl});var Tl=b(qe=>{"use strict";var ze=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.createConfiguration=qe.createCasualConfiguration=qe.parseDate=qe.parse=qe.GB=qe.strict=qe.casual=void 0;var rw=ze(kp()),nw=ze(xp()),iw=ze(Ip()),sw=ze(Up()),aw=ze(Yp()),ow=ze($p()),uw=ze(Gp()),lw=ze(Bp()),cw=ze(Hp()),dw=ze(zp()),fw=ze(Qp()),pw=br(),mw=ze(lm()),hw=ze(cm()),gw=ze(mm()),yw=ze(ym()),Rl=Qt(),_w=ze(hn()),Tw=ze(wm()),bw=ze(Om());qe.casual=new Rl.Chrono(Dm(!1));qe.strict=new Rl.Chrono(Ra(!0,!1));qe.GB=new Rl.Chrono(Ra(!1,!0));function vw(r,e,t){return qe.casual.parse(r,e,t)}qe.parse=vw;function Ew(r,e,t){return qe.casual.parseDate(r,e,t)}qe.parseDate=Ew;function Dm(r=!1){let e=Ra(!1,r);return e.parsers.unshift(new mw.default),e.parsers.unshift(new hw.default),e.parsers.unshift(new sw.default),e.parsers.unshift(new yw.default),e.parsers.unshift(new Tw.default),e}qe.createCasualConfiguration=Dm;function Ra(r=!0,e=!1){return pw.includeCommonConfiguration({parsers:[new _w.default(e),new rw.default,new nw.default,new iw.default,new gw.default,new aw.default,new ow.default,new uw.default(r),new lw.default(r),new cw.default(r)],refiners:[new bw.default,new fw.default,new dw.default]},r)}qe.createConfiguration=Ra});var Sm=b(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var ww=fn(),Ml=class extends ww.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};xl.default=Ml});var Hi=b(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.parseTimeUnits=ke.TIME_UNITS_PATTERN=ke.parseYear=ke.YEAR_PATTERN=ke.parseNumberPattern=ke.NUMBER_PATTERN=ke.TIME_UNIT_DICTIONARY=ke.INTEGER_WORD_DICTIONARY=ke.MONTH_DICTIONARY=ke.WEEKDAY_DICTIONARY=void 0;var Al=Ee(),kw=nt();ke.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ke.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ke.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ke.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ke.NUMBER_PATTERN=`(?:${Al.matchAnyPattern(ke.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Mm(r){let e=r.toLowerCase();return ke.INTEGER_WORD_DICTIONARY[e]!==void 0?ke.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ke.parseNumberPattern=Mm;ke.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function Ow(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return kw.findMostLikelyADYear(e)}ke.parseYear=Ow;var xm=`(${ke.NUMBER_PATTERN})\\s{0,5}(${Al.matchAnyPattern(ke.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Rm=new RegExp(xm,"i");ke.TIME_UNITS_PATTERN=Al.repeatedTimeunitPattern("",xm);function Dw(r){let e={},t=r,n=Rm.exec(t);for(;n;)Sw(e,n),t=t.substring(n[0].length),n=Rm.exec(t);return e}ke.parseTimeUnits=Dw;function Sw(r,e){let t=Mm(e[1]),n=ke.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Pm=b(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var Am=Hi(),Rw=Ee(),Mw=L(),xw=mn(),Aw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${Rw.matchAnyPattern(Am.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),Pw=1,Cw=3,Nw=2,Pl=class extends Mw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Aw}innerExtract(e,t){let n=t[Nw].toLowerCase(),i=Am.WEEKDAY_DICTIONARY[n],s=t[Pw],a=t[Cw],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=xw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Cl.default=Pl});var Fm=b(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var Br=Be(),Iw=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Fw=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Lw=2,Cm=3,Nm=4,Im=5,Jn=class{pattern(e){return Iw}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Jn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=Fw.exec(i);return s&&(n.end=Jn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Lw]),t[Cm]!=null&&(i=parseInt(t[Cm])),i>=60||n>24)return null;if(n>=12&&(s=Br.Meridiem.PM),t[Im]!=null){if(n>12)return null;let a=t[Im].toLowerCase();a.match(/morgen|vormittag/)&&(s=Br.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Br.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Br.Meridiem.AM,n=0):n<6?s=Br.Meridiem.AM:(s=Br.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Br.Meridiem.AM):e.imply("meridiem",Br.Meridiem.PM),t[Nm]!=null){let a=parseInt(t[Nm]);if(a>=60)return null;e.assign("second",a)}return e}};Nl.default=Jn});var Lm=b(zi=>{"use strict";var Uw=zi&&zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zi,"__esModule",{value:!0});var Ww=Uw(lr()),Il=class extends Ww.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};zi.default=Il});var Um=b(Ki=>{"use strict";var qw=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var Yw=qw(Tr()),Fl=class extends Yw.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};Ki.default=Fl});var Ll=b(Qi=>{"use strict";var $w=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});var jw=$w(ge()),gn=Be(),Gw=L(),Bw=Ut(),Hw=Wt(),Vi=class extends Gw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=jw.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return Bw.implySimilarTime(s,n),Vi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=Hw.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",gn.Meridiem.AM);break}return e}};Qi.default=Vi});var Ym=b(Xt=>{"use strict";var zw=Xt&&Xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Kw=Xt&&Xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Vw=Xt&&Xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&zw(e,r,t);return Kw(e,r),e},qm=Xt&&Xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xt,"__esModule",{value:!0});var Qw=qm(ge()),Xw=L(),yn=Ut(),Zw=qm(Ll()),Wm=Vw(Er()),Jw=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),e1=1,t1=2,Ul=class extends Xw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Jw}innerExtract(e,t){let n=Qw.default(e.refDate),i=(t[e1]||"").toLowerCase(),s=(t[t1]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=Wm.now(e.reference);break;case"heute":a=Wm.today(e.reference);break;case"morgen":yn.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),yn.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),yn.assignSimilarDate(a,n),yn.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),yn.assignSimilarDate(a,n),yn.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),yn.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=Zw.default.extractTimeComponents(a,s)),a}};Xt.default=Ul});var zm=b(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var r1=nt(),Bm=Hi(),Hm=Hi(),n1=Ee(),i1=L(),s1=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${n1.matchAnyPattern(Bm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Hm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),$m=1,jm=2,a1=3,Gm=4,Wl=class extends i1.AbstractParserWithWordBoundaryChecking{innerPattern(){return s1}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Bm.MONTH_DICTIONARY[t[a1].toLowerCase()],s=parseInt(t[$m]);if(s>31)return t.index=t.index+t[$m].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Gm]){let a=Hm.parseYear(t[Gm]);n.start.assign("year",a)}else{let a=r1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[jm]){let a=parseInt(t[jm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};ql.default=Wl});var Km=b($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var Ma=Hi(),o1=Ne(),u1=L(),l1=Wt(),c1=Ee(),Yl=class extends u1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Ma.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${c1.matchAnyPattern(Ma.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Ma.parseNumberPattern(t[2]):1,i=Ma.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=l1.reverseTimeUnits(s)),o1.ParsingComponents.createRelativeFromReference(e.reference,s)}};$l.default=Yl});var Xm=b(Ke=>{"use strict";var Zt=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createConfiguration=Ke.createCasualConfiguration=Ke.parseDate=Ke.parse=Ke.strict=Ke.casual=void 0;var d1=br(),Vm=Qt(),f1=Zt(hn()),p1=Zt(cl()),m1=Zt(Sm()),h1=Zt(Pm()),g1=Zt(Fm()),y1=Zt(Lm()),_1=Zt(Um()),T1=Zt(Ym()),b1=Zt(Ll()),v1=Zt(zm()),E1=Zt(Km());Ke.casual=new Vm.Chrono(Qm());Ke.strict=new Vm.Chrono(jl(!0));function w1(r,e,t){return Ke.casual.parse(r,e,t)}Ke.parse=w1;function k1(r,e,t){return Ke.casual.parseDate(r,e,t)}Ke.parseDate=k1;function Qm(r=!0){let e=jl(!1,r);return e.parsers.unshift(new b1.default),e.parsers.unshift(new T1.default),e.parsers.unshift(new E1.default),e}Ke.createCasualConfiguration=Qm;function jl(r=!0,e=!0){return d1.includeCommonConfiguration({parsers:[new p1.default,new f1.default(e),new m1.default,new g1.default,new v1.default,new h1.default],refiners:[new y1.default,new _1.default]},r)}Ke.createConfiguration=jl});var Jm=b(Jt=>{"use strict";var O1=Jt&&Jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),D1=Jt&&Jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),S1=Jt&&Jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&O1(e,r,t);return D1(e,r),e},R1=Jt&&Jt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});var M1=R1(ge()),x1=Be(),A1=L(),Zm=Ut(),xa=S1(Er()),Gl=class extends A1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=M1.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return xa.now(e.reference);case"aujourd'hui":return xa.today(e.reference);case"hier":return xa.yesterday(e.reference);case"demain":return xa.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(Zm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",x1.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),Zm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Jt.default=Gl});var eh=b(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Xi=Be(),P1=L(),Bl=class extends P1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",Xi.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",Xi.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",Xi.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",Xi.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",Xi.Meridiem.AM);break}return i}};Hl.default=Bl});var th=b(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var C1=fn(),zl=class extends C1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Kl.default=zl});var rh=b(Zi=>{"use strict";var N1=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});var I1=N1(Tr()),Vl=class extends I1.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};Zi.default=Vl});var nh=b(Ji=>{"use strict";var F1=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var L1=F1(lr()),Ql=class extends L1.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};Ji.default=Ql});var Hr=b(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.parseTimeUnits=ye.TIME_UNITS_PATTERN=ye.parseYear=ye.YEAR_PATTERN=ye.parseOrdinalNumberPattern=ye.ORDINAL_NUMBER_PATTERN=ye.parseNumberPattern=ye.NUMBER_PATTERN=ye.TIME_UNIT_DICTIONARY=ye.INTEGER_WORD_DICTIONARY=ye.MONTH_DICTIONARY=ye.WEEKDAY_DICTIONARY=void 0;var Xl=Ee();ye.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};ye.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};ye.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};ye.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};ye.NUMBER_PATTERN=`(?:${Xl.matchAnyPattern(ye.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function sh(r){let e=r.toLowerCase();return ye.INTEGER_WORD_DICTIONARY[e]!==void 0?ye.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}ye.parseNumberPattern=sh;ye.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function U1(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}ye.parseOrdinalNumberPattern=U1;ye.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function W1(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}ye.parseYear=W1;var ah=`(${ye.NUMBER_PATTERN})\\s{0,5}(${Xl.matchAnyPattern(ye.TIME_UNIT_DICTIONARY)})\\s{0,5}`,ih=new RegExp(ah,"i");ye.TIME_UNITS_PATTERN=Xl.repeatedTimeunitPattern("",ah);function q1(r){let e={},t=r,n=ih.exec(t);for(;n;)Y1(e,n),t=t.substring(n[0].length),n=ih.exec(t);return e}ye.parseTimeUnits=q1;function Y1(r,e){let t=sh(e[1]),n=ye.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var uh=b(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var oh=Hr(),$1=Ee(),j1=L(),G1=mn(),B1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${$1.matchAnyPattern(oh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),H1=1,z1=2,Zl=class extends j1.AbstractParserWithWordBoundaryChecking{innerPattern(){return B1}innerExtract(e,t){let n=t[H1].toLowerCase(),i=oh.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[z1];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=G1.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Jl.default=Zl});var fh=b(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});var es=Be(),K1=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),V1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Q1=2,lh=3,ch=4,dh=5,ei=class{pattern(e){return K1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=ei.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=V1.exec(i);return s&&(n.end=ei.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Q1]),t[lh]!=null&&(i=parseInt(t[lh])),i>=60||n>24)return null;if(n>=12&&(s=es.Meridiem.PM),t[dh]!=null){if(n>12)return null;let a=t[dh][0].toLowerCase();a=="a"&&(s=es.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=es.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",es.Meridiem.AM):e.imply("meridiem",es.Meridiem.PM),t[ch]!=null){let a=parseInt(t[ch]);if(a>=60)return null;e.assign("second",a)}return e}};ec.default=ei});var _h=b(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var X1=nt(),gh=Hr(),yh=Hr(),Aa=Hr(),Z1=Ee(),J1=L(),ek=new RegExp(`(?:on\\s*?)?(${Aa.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Aa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${Z1.matchAnyPattern(gh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${yh.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),ph=1,mh=2,tk=3,hh=4,tc=class extends J1.AbstractParserWithWordBoundaryChecking{innerPattern(){return ek}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=gh.MONTH_DICTIONARY[t[tk].toLowerCase()],s=Aa.parseOrdinalNumberPattern(t[ph]);if(s>31)return t.index=t.index+t[ph].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[hh]){let a=yh.parseYear(t[hh]);n.start.assign("year",a)}else{let a=X1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[mh]){let a=Aa.parseOrdinalNumberPattern(t[mh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};rc.default=tc});var bh=b(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});var Th=Hr(),rk=Ne(),nk=L(),ik=Wt(),nc=class extends nk.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Th.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Th.parseTimeUnits(t[1]),i=ik.reverseTimeUnits(n);return rk.ParsingComponents.createRelativeFromReference(e.reference,i)}};ic.default=nc});var Eh=b(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var vh=Hr(),sk=Ne(),ak=L(),sc=class extends ak.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${vh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=vh.parseTimeUnits(t[1]);return sk.ParsingComponents.createRelativeFromReference(e.reference,n)}};ac.default=sc});var wh=b(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var Pa=Hr(),ok=Ne(),uk=L(),lk=Wt(),ck=Ee(),oc=class extends uk.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Pa.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${ck.matchAnyPattern(Pa.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Pa.parseNumberPattern(t[1]):1,i=Pa.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=lk.reverseTimeUnits(s)),ok.ParsingComponents.createRelativeFromReference(e.reference,s)}};uc.default=oc});var Dh=b(Ve=>{"use strict";var qt=Ve&&Ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createConfiguration=Ve.createCasualConfiguration=Ve.parseDate=Ve.parse=Ve.strict=Ve.casual=void 0;var dk=br(),kh=Qt(),fk=qt(Jm()),pk=qt(eh()),mk=qt(hn()),hk=qt(th()),gk=qt(rh()),yk=qt(nh()),_k=qt(uh()),Tk=qt(fh()),bk=qt(_h()),vk=qt(bh()),Ek=qt(Eh()),wk=qt(wh());Ve.casual=new kh.Chrono(Oh());Ve.strict=new kh.Chrono(lc(!0));function kk(r,e,t){return Ve.casual.parse(r,e,t)}Ve.parse=kk;function Ok(r,e,t){return Ve.casual.parseDate(r,e,t)}Ve.parseDate=Ok;function Oh(r=!0){let e=lc(!1,r);return e.parsers.unshift(new fk.default),e.parsers.unshift(new pk.default),e.parsers.unshift(new wk.default),e}Ve.createCasualConfiguration=Oh;function lc(r=!0,e=!0){return dk.includeCommonConfiguration({parsers:[new mk.default(e),new bk.default,new hk.default,new Tk.default,new vk.default,new Ek.default,new _k.default],refiners:[new gk.default,new yk.default]},r)}Ve.createConfiguration=lc});var Sh=b(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.toHankaku=void 0;function Dk(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,Sk)}Ca.toHankaku=Dk;function Sk(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Mh=b(ts=>{"use strict";var Rk=ts&&ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ts,"__esModule",{value:!0});var cc=Sh(),Mk=nt(),xk=Rk(ge()),Ak=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Rh=1,Pk=2,dc=3,Ck=4,Nk=5,Ik=6,fc=class{pattern(){return Ak}extract(e,t){let n=parseInt(cc.toHankaku(t[Nk])),i=parseInt(cc.toHankaku(t[Ik])),s=e.createParsingComponents({day:i,month:n});if(t[Rh]&&t[Rh].match("\u540C|\u4ECA|\u672C")){let a=xk.default(e.refDate);s.assign("year",a.year())}if(t[Pk]){let a=t[Ck],o=a=="\u5143"?1:parseInt(cc.toHankaku(a));t[dc]=="\u4EE4\u548C"?o+=2018:t[dc]=="\u5E73\u6210"?o+=1988:t[dc]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=Mk.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};ts.default=fc});var xh=b(rs=>{"use strict";var Fk=rs&&rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rs,"__esModule",{value:!0});var Lk=Fk(lr()),pc=class extends Lk.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};rs.default=pc});var Ph=b(er=>{"use strict";var Uk=er&&er.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Wk=er&&er.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qk=er&&er.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Uk(e,r,t);return Wk(e,r),e},Yk=er&&er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(er,"__esModule",{value:!0});var $k=Yk(ge()),Ah=Be(),mc=qk(Er()),jk=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,hc=class{pattern(){return jk}extract(e,t){let n=t[0],i=$k.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return mc.yesterday(e.reference);case"\u660E\u65E5":return mc.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return mc.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Ah.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Ah.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};er.default=hc});var Ih=b(Qe=>{"use strict";var gc=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createConfiguration=Qe.createCasualConfiguration=Qe.parseDate=Qe.parse=Qe.strict=Qe.casual=void 0;var Gk=gc(Mh()),Bk=gc(xh()),Hk=gc(Ph()),Ch=Qt();Qe.casual=new Ch.Chrono(Nh());Qe.strict=new Ch.Chrono(yc());function zk(r,e,t){return Qe.casual.parse(r,e,t)}Qe.parse=zk;function Kk(r,e,t){return Qe.casual.parseDate(r,e,t)}Qe.parseDate=Kk;function Nh(){let r=yc();return r.parsers.unshift(new Hk.default),r}Qe.createCasualConfiguration=Nh;function yc(){return{parsers:[new Gk.default],refiners:[new Bk.default]}}Qe.createConfiguration=yc});var Na=b(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.parseYear=dr.YEAR_PATTERN=dr.MONTH_DICTIONARY=dr.WEEKDAY_DICTIONARY=void 0;dr.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};dr.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};dr.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function Vk(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}dr.parseYear=Vk});var Lh=b(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var Fh=Na(),Qk=Ee(),Xk=L(),Zk=mn(),Jk=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${Qk.matchAnyPattern(Fh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),eO=1,tO=2,rO=3,_c=class extends Xk.AbstractParserWithWordBoundaryChecking{innerPattern(){return Jk}innerExtract(e,t){let n=t[tO].toLowerCase(),i=Fh.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[eO],a=t[rO],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=Zk.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Tc.default=_c});var Uh=b(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var nO=fn(),bc=class extends nO.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};vc.default=bc});var Wh=b(ns=>{"use strict";var iO=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var sO=iO(Tr()),Ec=class extends sO.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};ns.default=Ec});var qh=b(is=>{"use strict";var aO=is&&is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(is,"__esModule",{value:!0});var oO=aO(lr()),wc=class extends oO.default{patternBetween(){return/^\s*(?:-)\s*$/i}};is.default=wc});var Hh=b(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var uO=nt(),Gh=Na(),Bh=Na(),lO=Ee(),cO=L(),dO=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${lO.matchAnyPattern(Gh.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Bh.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Yh=1,$h=2,fO=3,jh=4,kc=class extends cO.AbstractParserWithWordBoundaryChecking{innerPattern(){return dO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Gh.MONTH_DICTIONARY[t[fO].toLowerCase()],s=parseInt(t[Yh]);if(s>31)return t.index=t.index+t[Yh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[jh]){let a=Bh.parseYear(t[jh]);n.start.assign("year",a)}else{let a=uO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[$h]){let a=parseInt(t[$h]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Oc.default=kc});var zh=b(wr=>{"use strict";var pO=wr&&wr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),mO=wr&&wr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),hO=wr&&wr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&pO(e,r,t);return mO(e,r),e};Object.defineProperty(wr,"__esModule",{value:!0});var gO=L(),Ia=hO(Er()),Dc=class extends gO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Ia.now(e.reference);case"hoje":return Ia.today(e.reference);case"amanha":case"amanh\xE3":return Ia.tomorrow(e.reference);case"ontem":return Ia.yesterday(e.reference)}return i}};wr.default=Dc});var Kh=b(ss=>{"use strict";var yO=ss&&ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0});var Fa=Be(),_O=L(),TO=Ut(),bO=yO(ge()),Sc=class extends _O.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=bO.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Fa.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Fa.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Fa.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":TO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Fa.Meridiem.AM),i.imply("hour",12);break}return i}};ss.default=Sc});var Xh=b(Xe=>{"use strict";var zr=Xe&&Xe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.createConfiguration=Xe.createCasualConfiguration=Xe.parseDate=Xe.parse=Xe.strict=Xe.casual=void 0;var vO=br(),Vh=Qt(),EO=zr(hn()),wO=zr(Lh()),kO=zr(Uh()),OO=zr(Wh()),DO=zr(qh()),SO=zr(Hh()),RO=zr(zh()),MO=zr(Kh());Xe.casual=new Vh.Chrono(Qh());Xe.strict=new Vh.Chrono(Rc(!0));function xO(r,e,t){return Xe.casual.parse(r,e,t)}Xe.parse=xO;function AO(r,e,t){return Xe.casual.parseDate(r,e,t)}Xe.parseDate=AO;function Qh(r=!0){let e=Rc(!1,r);return e.parsers.push(new RO.default),e.parsers.push(new MO.default),e}Xe.createCasualConfiguration=Qh;function Rc(r=!0,e=!0){return vO.includeCommonConfiguration({parsers:[new EO.default(e),new wO.default,new kO.default,new SO.default],refiners:[new OO.default,new DO.default]},r)}Xe.createConfiguration=Rc});var Zh=b(as=>{"use strict";var PO=as&&as.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(as,"__esModule",{value:!0});var CO=PO(lr()),Mc=class extends CO.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};as.default=Mc});var Jh=b(os=>{"use strict";var NO=os&&os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(os,"__esModule",{value:!0});var IO=NO(Tr()),xc=class extends IO.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};os.default=xc});var eg=b(kr=>{"use strict";var FO=kr&&kr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),LO=kr&&kr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),UO=kr&&kr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&FO(e,r,t);return LO(e,r),e};Object.defineProperty(kr,"__esModule",{value:!0});var WO=L(),La=UO(Er()),Ac=class extends WO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return La.now(e.reference);case"vandaag":return La.today(e.reference);case"morgen":case"morgend":return La.tomorrow(e.reference);case"gisteren":return La.yesterday(e.reference)}return i}};kr.default=Ac});var tg=b(us=>{"use strict";var qO=us&&us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(us,"__esModule",{value:!0});var Ua=Be(),YO=L(),$O=qO(ge()),jO=Ut(),GO=1,BO=2,Pc=class extends YO.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=$O.default(e.refDate),i=e.createParsingComponents();switch(t[GO]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[BO].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Ua.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Ua.Meridiem.PM),i.imply("hour",20);break;case"middernacht":jO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Ua.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Ua.Meridiem.AM),i.imply("hour",12);break}return i}};us.default=Pc});var St=b(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.parseTimeUnits=ue.TIME_UNITS_PATTERN=ue.parseYear=ue.YEAR_PATTERN=ue.parseOrdinalNumberPattern=ue.ORDINAL_NUMBER_PATTERN=ue.parseNumberPattern=ue.NUMBER_PATTERN=ue.TIME_UNIT_DICTIONARY=ue.ORDINAL_WORD_DICTIONARY=ue.INTEGER_WORD_DICTIONARY=ue.MONTH_DICTIONARY=ue.WEEKDAY_DICTIONARY=void 0;var Wa=Ee(),HO=nt();ue.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};ue.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};ue.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};ue.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};ue.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};ue.NUMBER_PATTERN=`(?:${Wa.matchAnyPattern(ue.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function ng(r){let e=r.toLowerCase();return ue.INTEGER_WORD_DICTIONARY[e]!==void 0?ue.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}ue.parseNumberPattern=ng;ue.ORDINAL_NUMBER_PATTERN=`(?:${Wa.matchAnyPattern(ue.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function zO(r){let e=r.toLowerCase();return ue.ORDINAL_WORD_DICTIONARY[e]!==void 0?ue.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}ue.parseOrdinalNumberPattern=zO;ue.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function KO(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return HO.findMostLikelyADYear(e)}ue.parseYear=KO;var ig=`(${ue.NUMBER_PATTERN})\\s{0,5}(${Wa.matchAnyPattern(ue.TIME_UNIT_DICTIONARY)})\\s{0,5}`,rg=new RegExp(ig,"i");ue.TIME_UNITS_PATTERN=Wa.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",ig);function VO(r){let e={},t=r,n=rg.exec(t);for(;n;)QO(e,n),t=t.substring(n[0].length),n=rg.exec(t);return e}ue.parseTimeUnits=VO;function QO(r,e){let t=ng(e[1]),n=ue.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var ag=b(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var sg=St(),XO=Ne(),ZO=L(),Cc=class extends ZO.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+sg.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=sg.parseTimeUnits(t[1]);return XO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Nc.default=Cc});var ug=b(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var og=St(),JO=Ee(),eD=L(),tD=mn(),rD=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${JO.matchAnyPattern(og.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),nD=1,iD=2,sD=3,Ic=class extends eD.AbstractParserWithWordBoundaryChecking{innerPattern(){return rD}innerExtract(e,t){let n=t[iD].toLowerCase(),i=og.WEEKDAY_DICTIONARY[n],s=t[nD],a=t[sD],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=tD.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Fc.default=Ic});var mg=b(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});var aD=nt(),fg=St(),qa=St(),pg=St(),oD=Ee(),uD=L(),lD=new RegExp(`(?:on\\s*?)?(${qa.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${qa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+oD.matchAnyPattern(fg.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${pg.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),cD=3,lg=1,cg=2,dg=4,Lc=class extends uD.AbstractParserWithWordBoundaryChecking{innerPattern(){return lD}innerExtract(e,t){let n=fg.MONTH_DICTIONARY[t[cD].toLowerCase()],i=qa.parseOrdinalNumberPattern(t[lg]);if(i>31)return t.index=t.index+t[lg].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[dg]){let u=pg.parseYear(t[dg]);s.assign("year",u)}else{let u=aD.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[cg])return s;let a=qa.parseOrdinalNumberPattern(t[cg]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Uc.default=Lc});var _g=b(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var gg=St(),dD=nt(),fD=Ee(),yg=St(),pD=L(),mD=new RegExp(`(${fD.matchAnyPattern(gg.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${yg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),hD=1,hg=2,Wc=class extends pD.AbstractParserWithWordBoundaryChecking{innerPattern(){return mD}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[hD],s=gg.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[hg]){let a=yg.parseYear(t[hg]);n.assign("year",a)}else{let a=dD.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};qc.default=Wc});var Tg=b($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var gD=L(),yD=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),_D=1,TD=2,Yc=class extends gD.AbstractParserWithWordBoundaryChecking{innerPattern(){return yD}innerExtract(e,t){let n=parseInt(t[TD]),i=parseInt(t[_D]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};$c.default=Yc});var bg=b(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var bD=fn(),jc=class extends bD.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Gc.default=jc});var wg=b(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var Eg=St(),vD=Ee(),ED=L(),wD=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${vD.matchAnyPattern(Eg.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),kD=1,OD=2,vg=3,DD=4,Bc=class extends ED.AbstractParserWithWordBoundaryChecking{innerPattern(){return wD}innerExtract(e,t){let n=t[vg]?parseInt(t[vg]):Eg.MONTH_DICTIONARY[t[OD].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[kD]);return{day:parseInt(t[DD]),month:n,year:i}}};Hc.default=Bc});var kg=b(ls=>{"use strict";var SD=ls&&ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ls,"__esModule",{value:!0});var RD=L(),Ya=Be(),zc=Ut(),MD=SD(ge()),xD=1,AD=2,Kc=class extends RD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[xD].toLowerCase(),i=t[AD].toLowerCase(),s=e.createParsingComponents(),a=MD.default(e.refDate);switch(n){case"gisteren":zc.assignSimilarDate(s,a.add(-1,"day"));break;case"van":zc.assignSimilarDate(s,a);break;case"morgen":zc.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",Ya.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",Ya.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",Ya.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",Ya.Meridiem.PM),s.imply("hour",20);break}return s}};ls.default=Kc});var Dg=b(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var Og=St(),PD=Ne(),CD=L(),ND=Wt(),ID=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Og.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Vc=class extends CD.AbstractParserWithWordBoundaryChecking{innerPattern(){return ID}innerExtract(e,t){let n=t[1].toLowerCase(),i=Og.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=ND.reverseTimeUnits(i);break}return PD.ParsingComponents.createRelativeFromReference(e.reference,i)}};Qc.default=Vc});var Mg=b(cs=>{"use strict";var FD=cs&&cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cs,"__esModule",{value:!0});var Rg=St(),Sg=Ne(),LD=FD(ge()),UD=L(),WD=Ee(),qD=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${WD.matchAnyPattern(Rg.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),YD=1,$D=2,Xc=class extends UD.AbstractParserWithWordBoundaryChecking{innerPattern(){return qD}innerExtract(e,t){let n=t[YD].toLowerCase(),i=t[$D].toLowerCase(),s=Rg.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,Sg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,Sg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=LD.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};cs.default=Xc});var xg=b(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});var Jc=St(),jD=Ne(),GD=L(),BD=Wt(),HD=new RegExp("("+Jc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),zD=new RegExp("("+Jc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Zc=class extends GD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?zD:HD}innerExtract(e,t){let n=Jc.parseTimeUnits(t[1]),i=BD.reverseTimeUnits(n);return jD.ParsingComponents.createRelativeFromReference(e.reference,i)}};ed.default=Zc});var Ag=b(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var rd=St(),KD=Ne(),VD=L(),QD=new RegExp("("+rd.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),XD=new RegExp("("+rd.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),ZD=1,td=class extends VD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?XD:QD}innerExtract(e,t){let n=rd.parseTimeUnits(t[ZD]);return KD.ParsingComponents.createRelativeFromReference(e.reference,n)}};nd.default=td});var Ig=b(Ze=>{"use strict";var st=Ze&&Ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.createConfiguration=Ze.createCasualConfiguration=Ze.parseDate=Ze.parse=Ze.strict=Ze.casual=void 0;var JD=br(),Pg=Qt(),eS=st(Zh()),tS=st(Jh()),rS=st(eg()),nS=st(tg()),iS=st(hn()),sS=st(ag()),aS=st(ug()),oS=st(mg()),Cg=st(_g()),uS=st(Tg()),lS=st(bg()),cS=st(wg()),dS=st(kg()),fS=st(Dg()),pS=st(Mg()),mS=st(xg()),hS=st(Ag());Ze.casual=new Pg.Chrono(Ng());Ze.strict=new Pg.Chrono(id(!0));function gS(r,e,t){return Ze.casual.parse(r,e,t)}Ze.parse=gS;function yS(r,e,t){return Ze.casual.parseDate(r,e,t)}Ze.parseDate=yS;function Ng(r=!0){let e=id(!1,r);return e.parsers.unshift(new rS.default),e.parsers.unshift(new nS.default),e.parsers.unshift(new dS.default),e.parsers.unshift(new Cg.default),e.parsers.unshift(new pS.default),e.parsers.unshift(new fS.default),e}Ze.createCasualConfiguration=Ng;function id(r=!0,e=!0){return JD.includeCommonConfiguration({parsers:[new iS.default(e),new sS.default,new oS.default,new Cg.default,new aS.default,new cS.default,new uS.default,new lS.default(r),new mS.default(r),new hS.default(r)],refiners:[new tS.default,new eS.default]},r)}Ze.createConfiguration=id});var Wg=b(ds=>{"use strict";var _S=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0});var TS=_S(ge()),bS=L(),vS=1,Fg=2,ES=3,Lg=4,Ug=5,wS=6,sd=class extends bS.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=TS.default(e.refDate),a=s;if(t[vS])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Fg]){let o=t[Fg],u=t[ES];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Lg]){let u=t[Lg][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Ug]){let o=t[Ug];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[wS];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};ds.default=sd});var ti=b(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.zhStringToYear=bt.zhStringToNumber=bt.WEEKDAY_OFFSET=bt.NUMBER=void 0;bt.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};bt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function kS(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?bt.NUMBER[n]:e*bt.NUMBER[n]:e+=bt.NUMBER[n]}return e}bt.zhStringToNumber=kS;function OS(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+bt.NUMBER[n]}return parseInt(e)}bt.zhStringToYear=OS});var Yg=b(fs=>{"use strict";var DS=fs&&fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0});var SS=DS(ge()),RS=L(),_n=ti(),ad=1,qg=2,od=3,ud=class extends RS.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(_n.NUMBER).join("")+"]{4}|["+Object.keys(_n.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(_n.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(_n.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=SS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[qg]);if(isNaN(s)&&(s=_n.zhStringToNumber(t[qg])),i.start.assign("month",s),t[od]){let a=parseInt(t[od]);isNaN(a)&&(a=_n.zhStringToNumber(t[od])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[ad]){let a=parseInt(t[ad]);isNaN(a)&&(a=_n.zhStringToYear(t[ad])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};fs.default=ud});var jg=b(ps=>{"use strict";var MS=ps&&ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ps,"__esModule",{value:!0});var xS=MS(ge()),AS=L(),$g=ti(),PS=new RegExp("(\\d+|["+Object.keys($g.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),ld=1,CS=2,cd=class extends AS.AbstractParserWithWordBoundaryChecking{innerPattern(){return PS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[ld]);if(isNaN(i)&&(i=$g.zhStringToNumber(t[ld])),isNaN(i)){let u=t[ld];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=xS.default(e.refDate),o=t[CS][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ps.default=cd});var Bg=b(ms=>{"use strict";var NS=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});var IS=NS(ge()),FS=L(),Gg=ti(),LS=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Gg.WEEKDAY_OFFSET).join("|")+")"),dd=class extends FS.AbstractParserWithWordBoundaryChecking{innerPattern(){return LS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Gg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=IS.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};ms.default=dd});var Hg=b(hs=>{"use strict";var US=hs&&hs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0});var WS=US(ge()),qS=L(),$t=ti(),YS=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),$S=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys($t.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),$a=1,ja=2,Ga=3,Ba=4,Ha=5,za=6,Yt=7,ri=8,Ka=9,fd=class extends qS.AbstractParserWithWordBoundaryChecking{innerPattern(){return YS}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=WS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[$a]){var a=t[$a];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Ba]){var o=t[Ba];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[ri]){var p=parseInt(t[ri]);if(isNaN(p)&&(p=$t.zhStringToNumber(t[ri])),p>=60)return null;i.start.assign("second",p)}if(u=parseInt(t[za]),isNaN(u)&&(u=$t.zhStringToNumber(t[za])),t[Yt]?t[Yt]=="\u534A"?l=30:t[Yt]=="\u6B63"||t[Yt]=="\u6574"?l=0:(l=parseInt(t[Yt]),isNaN(l)&&(l=$t.zhStringToNumber(t[Yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Ka]){if(u>12)return null;var m=t[Ka][0].toLowerCase();m=="a"&&(c=0,u==12&&(u=0)),m=="p"&&(c=1,u!=12&&(u+=12))}else if(t[ja]){var T=t[ja],y=T[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ga]){var E=t[Ga],M=E[0];M=="\u4E0A"||M=="\u671D"||M=="\u65E9"||M=="\u51CC"?(c=0,u==12&&(u=0)):(M=="\u4E0B"||M=="\u664F"||M=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Ha]){var U=t[Ha],q=U[0];q=="\u4E0A"||q=="\u671D"||q=="\u65E9"||q=="\u51CC"?(c=0,u==12&&(u=0)):(q=="\u4E0B"||q=="\u664F"||q=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=$S.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let W=s.clone();if(i.end=e.createParsingComponents(),t[$a]){var a=t[$a];a=="\u660E"||a=="\u807D"?n.hour()>1&&W.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?W.add(-1,"day"):a=="\u524D"?W.add(-2,"day"):a=="\u5927\u524D"?W.add(-3,"day"):a=="\u5F8C"?W.add(2,"day"):a=="\u5927\u5F8C"&&W.add(3,"day"),i.end.assign("day",W.date()),i.end.assign("month",W.month()+1),i.end.assign("year",W.year())}else if(t[Ba]){var o=t[Ba];o=="\u660E"||o=="\u807D"?W.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?W.add(-1,"day"):o=="\u524D"?W.add(-2,"day"):o=="\u5927\u524D"?W.add(-3,"day"):o=="\u5F8C"?W.add(2,"day"):o=="\u5927\u5F8C"&&W.add(3,"day"),i.end.assign("day",W.date()),i.end.assign("month",W.month()+1),i.end.assign("year",W.year())}else i.end.imply("day",W.date()),i.end.imply("month",W.month()+1),i.end.imply("year",W.year());if(u=0,l=0,c=-1,t[ri]){var p=parseInt(t[ri]);if(isNaN(p)&&(p=$t.zhStringToNumber(t[ri])),p>=60)return null;i.end.assign("second",p)}if(u=parseInt(t[za]),isNaN(u)&&(u=$t.zhStringToNumber(t[za])),t[Yt]?t[Yt]=="\u534A"?l=30:t[Yt]=="\u6B63"||t[Yt]=="\u6574"?l=0:(l=parseInt(t[Yt]),isNaN(l)&&(l=$t.zhStringToNumber(t[Yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Ka]){if(u>12)return null;var m=t[Ka][0].toLowerCase();m=="a"&&(c=0,u==12&&(u=0)),m=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ja]){var T=t[ja],y=T[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Ga]){var E=t[Ga],M=E[0];M=="\u4E0A"||M=="\u671D"||M=="\u65E9"||M=="\u51CC"?(c=0,u==12&&(u=0)):(M=="\u4E0B"||M=="\u664F"||M=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Ha]){var U=t[Ha],q=U[0];q=="\u4E0A"||q=="\u671D"||q=="\u65E9"||q=="\u51CC"?(c=0,u==12&&(u=0)):(q=="\u4E0B"||q=="\u664F"||q=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};hs.default=fd});var Kg=b(gs=>{"use strict";var jS=gs&&gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gs,"__esModule",{value:!0});var GS=jS(ge()),BS=L(),zg=ti(),HS=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(zg.WEEKDAY_OFFSET).join("|")+")"),pd=class extends BS.AbstractParserWithWordBoundaryChecking{innerPattern(){return HS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=zg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=GS.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};gs.default=pd});var Vg=b(ys=>{"use strict";var zS=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});var KS=zS(lr()),md=class extends KS.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};ys.default=md});var Qg=b(_s=>{"use strict";var VS=_s&&_s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_s,"__esModule",{value:!0});var QS=VS(Tr()),hd=class extends QS.default{patternBetween(){return/^\s*$/i}};_s.default=hd});var Xg=b(Ye=>{"use strict";var Or=Ye&&Ye.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConfiguration=Ye.createCasualConfiguration=Ye.parseDate=Ye.parse=Ye.strict=Ye.casual=Ye.hant=void 0;var gd=Qt(),XS=Or(ka()),ZS=br(),JS=Or(Wg()),e0=Or(Yg()),t0=Or(jg()),r0=Or(Bg()),n0=Or(Hg()),i0=Or(Kg()),s0=Or(Vg()),a0=Or(Qg());Ye.hant=new gd.Chrono(yd());Ye.casual=new gd.Chrono(yd());Ye.strict=new gd.Chrono(_d());function o0(r,e,t){return Ye.casual.parse(r,e,t)}Ye.parse=o0;function u0(r,e,t){return Ye.casual.parseDate(r,e,t)}Ye.parseDate=u0;function yd(){let r=_d();return r.parsers.unshift(new JS.default),r}Ye.createCasualConfiguration=yd;function _d(){let r=ZS.includeCommonConfiguration({parsers:[new e0.default,new r0.default,new i0.default,new n0.default,new t0.default],refiners:[new s0.default,new a0.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof XS.default)),r}Ye.createConfiguration=_d});var ty=b(Ts=>{"use strict";var l0=Ts&&Ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ts,"__esModule",{value:!0});var c0=l0(ge()),d0=L(),f0=1,Zg=2,p0=3,Jg=4,ey=5,m0=6,Td=class extends d0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=c0.default(e.refDate),a=s;if(t[f0])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Zg]){let o=t[Zg],u=t[p0];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Jg]){let u=t[Jg][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ey]){let o=t[ey];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[m0];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ts.default=Td});var ni=b(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.zhStringToYear=vt.zhStringToNumber=vt.WEEKDAY_OFFSET=vt.NUMBER=void 0;vt.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};vt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function h0(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?vt.NUMBER[n]:e*vt.NUMBER[n]:e+=vt.NUMBER[n]}return e}vt.zhStringToNumber=h0;function g0(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+vt.NUMBER[n]}return parseInt(e)}vt.zhStringToYear=g0});var ny=b(bs=>{"use strict";var y0=bs&&bs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});var _0=y0(ge()),T0=L(),Tn=ni(),bd=1,ry=2,vd=3,Ed=class extends T0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Tn.NUMBER).join("")+"]{4}|["+Object.keys(Tn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Tn.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Tn.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=_0.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[ry]);if(isNaN(s)&&(s=Tn.zhStringToNumber(t[ry])),i.start.assign("month",s),t[vd]){let a=parseInt(t[vd]);isNaN(a)&&(a=Tn.zhStringToNumber(t[vd])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[bd]){let a=parseInt(t[bd]);isNaN(a)&&(a=Tn.zhStringToYear(t[bd])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};bs.default=Ed});var sy=b(vs=>{"use strict";var b0=vs&&vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});var v0=b0(ge()),E0=L(),iy=ni(),w0=new RegExp("(\\d+|["+Object.keys(iy.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),wd=1,k0=2,kd=class extends E0.AbstractParserWithWordBoundaryChecking{innerPattern(){return w0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[wd]);if(isNaN(i)&&(i=iy.zhStringToNumber(t[wd])),isNaN(i)){let u=t[wd];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=v0.default(e.refDate),o=t[k0][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};vs.default=kd});var oy=b(Es=>{"use strict";var O0=Es&&Es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Es,"__esModule",{value:!0});var D0=O0(ge()),S0=L(),ay=ni(),R0=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(ay.WEEKDAY_OFFSET).join("|")+")"),Od=class extends S0.AbstractParserWithWordBoundaryChecking{innerPattern(){return R0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ay.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=D0.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Es.default=Od});var uy=b(ws=>{"use strict";var M0=ws&&ws.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ws,"__esModule",{value:!0});var x0=M0(ge()),A0=L(),Gt=ni(),P0=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),C0=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Va=1,Qa=2,Xa=3,Za=4,Ja=5,eo=6,jt=7,ii=8,to=9,Dd=class extends A0.AbstractParserWithWordBoundaryChecking{innerPattern(){return P0}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=x0.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Va]){let c=t[Va];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Za]){let c=t[Za];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[ii]){let c=parseInt(t[ii]);if(isNaN(c)&&(c=Gt.zhStringToNumber(t[ii])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[eo]),isNaN(a)&&(a=Gt.zhStringToNumber(t[eo])),t[jt]?t[jt]=="\u534A"?o=30:t[jt]=="\u6B63"||t[jt]=="\u6574"?o=0:(o=parseInt(t[jt]),isNaN(o)&&(o=Gt.zhStringToNumber(t[jt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[to]){if(a>12)return null;let c=t[to][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[Qa]){let p=t[Qa][0];p=="\u65E9"?(u=0,a==12&&(a=0)):p=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Xa]){let p=t[Xa][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Ja]){let p=t[Ja][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=C0.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[Va]){let c=t[Va];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[Za]){let c=t[Za];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[ii]){let c=parseInt(t[ii]);if(isNaN(c)&&(c=Gt.zhStringToNumber(t[ii])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[eo]),isNaN(a)&&(a=Gt.zhStringToNumber(t[eo])),t[jt]?t[jt]=="\u534A"?o=30:t[jt]=="\u6B63"||t[jt]=="\u6574"?o=0:(o=parseInt(t[jt]),isNaN(o)&&(o=Gt.zhStringToNumber(t[jt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[to]){if(a>12)return null;let c=t[to][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Qa]){let p=t[Qa][0];p=="\u65E9"?(u=0,a==12&&(a=0)):p=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Xa]){let p=t[Xa][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Ja]){let p=t[Ja][0];p=="\u4E0A"||p=="\u65E9"||p=="\u51CC"?(u=0,a==12&&(a=0)):(p=="\u4E0B"||p=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ws.default=Dd});var cy=b(ks=>{"use strict";var N0=ks&&ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ks,"__esModule",{value:!0});var I0=N0(ge()),F0=L(),ly=ni(),L0=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(ly.WEEKDAY_OFFSET).join("|")+")"),Sd=class extends F0.AbstractParserWithWordBoundaryChecking{innerPattern(){return L0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ly.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=I0.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};ks.default=Sd});var dy=b(Os=>{"use strict";var U0=Os&&Os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Os,"__esModule",{value:!0});var W0=U0(lr()),Rd=class extends W0.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Os.default=Rd});var fy=b(Ds=>{"use strict";var q0=Ds&&Ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ds,"__esModule",{value:!0});var Y0=q0(Tr()),Md=class extends Y0.default{patternBetween(){return/^\s*$/i}};Ds.default=Md});var py=b($e=>{"use strict";var Dr=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});$e.createConfiguration=$e.createCasualConfiguration=$e.parseDate=$e.parse=$e.strict=$e.casual=$e.hans=void 0;var xd=Qt(),$0=Dr(ka()),j0=br(),G0=Dr(ty()),B0=Dr(ny()),H0=Dr(sy()),z0=Dr(oy()),K0=Dr(uy()),V0=Dr(cy()),Q0=Dr(dy()),X0=Dr(fy());$e.hans=new xd.Chrono(Ad());$e.casual=new xd.Chrono(Ad());$e.strict=new xd.Chrono(Pd());function Z0(r,e,t){return $e.casual.parse(r,e,t)}$e.parse=Z0;function J0(r,e,t){return $e.casual.parseDate(r,e,t)}$e.parseDate=J0;function Ad(){let r=Pd();return r.parsers.unshift(new G0.default),r}$e.createCasualConfiguration=Ad;function Pd(){let r=j0.includeCommonConfiguration({parsers:[new B0.default,new z0.default,new V0.default,new K0.default,new H0.default],refiners:[new Q0.default,new X0.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof $0.default)),r}$e.createConfiguration=Pd});var hy=b(Rt=>{"use strict";var my=Rt&&Rt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),eR=Rt&&Rt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),tR=Rt&&Rt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&my(e,r,t)},rR=Rt&&Rt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&my(e,r,t);return eR(e,r),e};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.hans=void 0;tR(Xg(),Rt);Rt.hans=rR(py())});var Et=b(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.parseTimeUnits=Z.TIME_UNITS_PATTERN=Z.parseYear=Z.YEAR_PATTERN=Z.parseOrdinalNumberPattern=Z.ORDINAL_NUMBER_PATTERN=Z.parseNumberPattern=Z.NUMBER_PATTERN=Z.TIME_UNIT_DICTIONARY=Z.ORDINAL_WORD_DICTIONARY=Z.INTEGER_WORD_DICTIONARY=Z.MONTH_DICTIONARY=Z.FULL_MONTH_NAME_DICTIONARY=Z.WEEKDAY_DICTIONARY=Z.REGEX_PARTS=void 0;var ro=Ee(),nR=nt();Z.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};Z.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};Z.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};Z.MONTH_DICTIONARY=Object.assign(Object.assign({},Z.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});Z.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};Z.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};Z.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};Z.NUMBER_PATTERN=`(?:${ro.matchAnyPattern(Z.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function yy(r){let e=r.toLowerCase();return Z.INTEGER_WORD_DICTIONARY[e]!==void 0?Z.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}Z.parseNumberPattern=yy;Z.ORDINAL_NUMBER_PATTERN=`(?:${ro.matchAnyPattern(Z.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function iR(r){let e=r.toLowerCase();return Z.ORDINAL_WORD_DICTIONARY[e]!==void 0?Z.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}Z.parseOrdinalNumberPattern=iR;var Cd="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";Z.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Cd}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Cd}|[5-9][0-9]${Cd})`;function sR(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return nR.findMostLikelyADYear(e)}Z.parseYear=sR;var _y=`(${Z.NUMBER_PATTERN})\\s{0,3}(${ro.matchAnyPattern(Z.TIME_UNIT_DICTIONARY)})`,gy=new RegExp(_y,"i");Z.TIME_UNITS_PATTERN=ro.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",_y);function aR(r){let e={},t=r,n=gy.exec(t);for(;n;)oR(e,n),t=t.substring(n[0].length).trim(),n=gy.exec(t);return e}Z.parseTimeUnits=aR;function oR(r,e){let t=yy(e[1]),n=Z.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var by=b(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var Ss=Et(),uR=Ne(),lR=L(),Ty=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Ss.TIME_UNITS_PATTERN})${Ss.REGEX_PARTS.rightBoundary}`,cR=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Ty}`,Ss.REGEX_PARTS.flags),dR=new RegExp(Ty,"i"),Nd=class extends lR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ss.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?dR:cR}innerExtract(e,t){let n=Ss.parseTimeUnits(t[1]);return uR.ParsingComponents.createRelativeFromReference(e.reference,n)}};Id.default=Nd});var Oy=b(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});var fR=nt(),Rs=Et(),ky=Et(),no=Et(),pR=Ee(),mR=L(),hR=new RegExp(`(?:\u0441)?\\s*(${no.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${no.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${pR.matchAnyPattern(Rs.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${ky.YEAR_PATTERN}(?![^\\s]\\d)))?${Rs.REGEX_PARTS.rightBoundary}`,Rs.REGEX_PARTS.flags),vy=1,Ey=2,gR=3,wy=4,Fd=class extends mR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Rs.REGEX_PARTS.leftBoundary}innerPattern(){return hR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Rs.MONTH_DICTIONARY[t[gR].toLowerCase()],s=no.parseOrdinalNumberPattern(t[vy]);if(s>31)return t.index=t.index+t[vy].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[wy]){let a=ky.parseYear(t[wy]);n.start.assign("year",a)}else{let a=fR.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Ey]){let a=no.parseOrdinalNumberPattern(t[Ey]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ld.default=Fd});var Ry=b(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});var Ms=Et(),yR=nt(),_R=Ee(),Sy=Et(),TR=L(),bR=new RegExp(`((?:\u0432)\\s*)?(${_R.matchAnyPattern(Ms.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Sy.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Ms.REGEX_PARTS.flags),vR=2,Dy=3,Ud=class extends TR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ms.REGEX_PARTS.leftBoundary}innerPattern(){return bR}innerExtract(e,t){let n=t[vR].toLowerCase();if(t[0].length<=3&&!Ms.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Ms.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Dy]){let a=Sy.parseYear(t[Dy]);i.start.assign("year",a)}else{let a=yR.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Wd.default=Ud});var xy=b(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});var io=Be(),ER=fn(),My=Et(),qd=class extends ER.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return My.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${My.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",io.Meridiem.PM)):i<6&&n.assign("meridiem",io.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",io.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",io.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Yd.default=qd});var Ay=b(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var so=Et(),wR=Ne(),kR=L(),OR=Wt(),DR=new RegExp(`(${so.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,so.REGEX_PARTS.flags),$d=class extends kR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return so.REGEX_PARTS.leftBoundary}innerPattern(){return DR}innerExtract(e,t){let n=so.parseTimeUnits(t[1]),i=OR.reverseTimeUnits(n);return wR.ParsingComponents.createRelativeFromReference(e.reference,i)}};jd.default=$d});var Py=b(xs=>{"use strict";var SR=xs&&xs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xs,"__esModule",{value:!0});var RR=SR(lr()),Gd=class extends RR.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};xs.default=Gd});var Cy=b(As=>{"use strict";var MR=As&&As.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(As,"__esModule",{value:!0});var xR=MR(Tr()),Bd=class extends xR.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};As.default=Bd});var Ny=b(Sr=>{"use strict";var AR=Sr&&Sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),PR=Sr&&Sr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),CR=Sr&&Sr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&AR(e,r,t);return PR(e,r),e};Object.defineProperty(Sr,"__esModule",{value:!0});var NR=L(),Ps=CR(Er()),Hd=Et(),IR=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Hd.REGEX_PARTS.rightBoundary}`,Hd.REGEX_PARTS.flags),zd=class extends NR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Hd.REGEX_PARTS.leftBoundary}innerPattern(e){return IR}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Ps.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Ps.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Ps.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Ps.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Ps.theDayBefore(e.reference,2)}return i}};Sr.default=zd});var Iy=b(tr=>{"use strict";var FR=tr&&tr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),LR=tr&&tr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),UR=tr&&tr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&FR(e,r,t);return LR(e,r),e},WR=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tr,"__esModule",{value:!0});var qR=L(),bn=UR(Er()),YR=Ut(),$R=WR(ge()),Kd=Et(),jR=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${Kd.REGEX_PARTS.rightBoundary}`,Kd.REGEX_PARTS.flags),Vd=class extends qR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Kd.REGEX_PARTS.leftBoundary}innerPattern(){return jR}innerExtract(e,t){let n=$R.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return bn.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return bn.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return bn.morning(e.reference);if(i.match(/в\s*полдень/))return bn.noon(e.reference);if(i.match(/прошлой\s*ночью/))return bn.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return bn.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),YR.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?bn.midnight(e.reference):s}};tr.default=Vd});var Fy=b(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});var Cs=Et(),GR=Ee(),BR=L(),HR=mn(),zR=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${GR.matchAnyPattern(Cs.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Cs.REGEX_PARTS.rightBoundary}`,Cs.REGEX_PARTS.flags),KR=1,VR=2,QR=3,Qd=class extends BR.AbstractParserWithWordBoundaryChecking{innerPattern(){return zR}patternLeftBoundary(){return Cs.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[VR].toLowerCase(),i=Cs.WEEKDAY_DICTIONARY[n],s=t[KR],a=t[QR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=HR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Xd.default=Qd});var Uy=b(Is=>{"use strict";var XR=Is&&Is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Is,"__esModule",{value:!0});var Ns=Et(),Ly=Ne(),ZR=XR(ge()),JR=L(),eM=Ee(),tM=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${eM.matchAnyPattern(Ns.TIME_UNIT_DICTIONARY)})(?=\\s*)${Ns.REGEX_PARTS.rightBoundary}`,Ns.REGEX_PARTS.flags),rM=1,nM=2,Zd=class extends JR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ns.REGEX_PARTS.leftBoundary}innerPattern(){return tM}innerExtract(e,t){let n=t[rM].toLowerCase(),i=t[nM].toLowerCase(),s=Ns.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,Ly.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,Ly.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=ZR.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Is.default=Zd});var Wy=b(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var Fs=Et(),iM=Ne(),sM=L(),aM=Wt(),oM=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Fs.TIME_UNITS_PATTERN})${Fs.REGEX_PARTS.rightBoundary}`,Fs.REGEX_PARTS.flags),Jd=class extends sM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Fs.REGEX_PARTS.leftBoundary}innerPattern(){return oM}innerExtract(e,t){let n=t[1].toLowerCase(),i=Fs.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=aM.reverseTimeUnits(i);break}return iM.ParsingComponents.createRelativeFromReference(e.reference,i)}};ef.default=Jd});var $y=b(Je=>{"use strict";var Mt=Je&&Je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});Je.createConfiguration=Je.createCasualConfiguration=Je.parseDate=Je.parse=Je.strict=Je.casual=void 0;var uM=Mt(by()),lM=Mt(Oy()),cM=Mt(Ry()),dM=Mt(xy()),fM=Mt(Ay()),pM=Mt(Py()),mM=Mt(Cy()),hM=br(),gM=Mt(Ny()),yM=Mt(Iy()),_M=Mt(Fy()),TM=Mt(Uy()),qy=Qt(),bM=Mt(hn()),vM=Mt(Wy());Je.casual=new qy.Chrono(Yy());Je.strict=new qy.Chrono(tf(!0));function EM(r,e,t){return Je.casual.parse(r,e,t)}Je.parse=EM;function wM(r,e,t){return Je.casual.parseDate(r,e,t)}Je.parseDate=wM;function Yy(){let r=tf(!1);return r.parsers.unshift(new gM.default),r.parsers.unshift(new yM.default),r.parsers.unshift(new cM.default),r.parsers.unshift(new TM.default),r.parsers.unshift(new vM.default),r}Je.createCasualConfiguration=Yy;function tf(r=!0){return hM.includeCommonConfiguration({parsers:[new bM.default(!0),new uM.default,new lM.default,new _M.default,new dM.default(r),new fM.default],refiners:[new mM.default,new pM.default]},r)}Je.createConfiguration=tf});var Be=b(se=>{"use strict";var kM=se&&se.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),OM=se&&se.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Kr=se&&se.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kM(e,r,t);return OM(e,r),e};Object.defineProperty(se,"__esModule",{value:!0});se.parseDate=se.parse=se.casual=se.strict=se.ru=se.zh=se.nl=se.pt=se.ja=se.fr=se.de=se.Meridiem=se.Chrono=se.en=void 0;var rf=Kr(Tl());se.en=rf;var DM=Qt();Object.defineProperty(se,"Chrono",{enumerable:!0,get:function(){return DM.Chrono}});var SM;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(SM=se.Meridiem||(se.Meridiem={}));var RM=Kr(Xm());se.de=RM;var MM=Kr(Dh());se.fr=MM;var xM=Kr(Ih());se.ja=xM;var AM=Kr(Xh());se.pt=AM;var PM=Kr(Ig());se.nl=PM;var CM=Kr(hy());se.zh=CM;var NM=Kr($y());se.ru=NM;se.strict=rf.strict;se.casual=rf.casual;function IM(r,e,t){return se.casual.parse(r,e,t)}se.parse=IM;function FM(r,e,t){return se.casual.parseDate(r,e,t)}se.parseDate=FM});var f_=b((nN,fo)=>{var By,Hy,zy,Ky,Vy,Qy,Xy,Zy,Jy,lo,sf,e_,t_,r_,ai,n_,i_,s_,a_,o_,u_,l_,c_,d_,co;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof fo=="object"&&typeof fo.exports=="object"?r(t(e,t(fo.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};By=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},Hy=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},zy=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},Ky=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},Vy=function(n,i){return function(s,a){i(s,a,n)}},Qy=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},Xy=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(T){try{m(a.next(T))}catch(y){l(y)}}function p(T){try{m(a.throw(T))}catch(y){l(y)}}function m(T){T.done?u(T.value):o(T.value).then(c,p)}m((a=a.apply(n,i||[])).next())})},Zy=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(m){return function(T){return p([m,T])}}function p(m){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=m[0]&2?o.return:m[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,m[1])).done)return u;switch(o=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,o=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){s=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){s.label=m[1];break}if(m[0]===6&&s.label<u[1]){s.label=u[1],u=m;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(m);break}u[2]&&s.ops.pop(),s.trys.pop();continue}m=i.call(n,s)}catch(T){m=[6,T],o=0}finally{a=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Jy=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&co(i,n,s)},co=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},lo=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},sf=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},e_=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(sf(arguments[i]));return n},t_=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},r_=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},ai=function(n){return this instanceof ai?(this.v=n,this):new ai(n)},n_=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(E){a[E]&&(o[E]=function(M){return new Promise(function(U,q){u.push([E,M,U,q])>1||c(E,M)})})}function c(E,M){try{p(a[E](M))}catch(U){y(u[0][3],U)}}function p(E){E.value instanceof ai?Promise.resolve(E.value.v).then(m,T):y(u[0][2],E)}function m(E){c("next",E)}function T(E){c("throw",E)}function y(E,M){E(M),u.shift(),u.length&&c(u[0][0],u[0][1])}},i_=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:ai(n[o](l)),done:o==="return"}:u?u(l):l}:u}},s_=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof lo=="function"?lo(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,p){l=n[u](l),o(c,p,l.done,l.value)})}}function o(u,l,c,p){Promise.resolve(p).then(function(m){u({value:m,done:c})},l)}},a_=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};o_=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&co(i,n,s);return t(i,n),i},u_=function(n){return n&&n.__esModule?n:{default:n}},l_=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},c_=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},d_=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",By),r("__assign",Hy),r("__rest",zy),r("__decorate",Ky),r("__param",Vy),r("__metadata",Qy),r("__awaiter",Xy),r("__generator",Zy),r("__exportStar",Jy),r("__createBinding",co),r("__values",lo),r("__read",sf),r("__spread",e_),r("__spreadArrays",t_),r("__spreadArray",r_),r("__await",ai),r("__asyncGenerator",n_),r("__asyncDelegator",i_),r("__asyncValues",s_),r("__makeTemplateObject",a_),r("__importStar",o_),r("__importDefault",u_),r("__classPrivateFieldGet",l_),r("__classPrivateFieldSet",c_),r("__classPrivateFieldIn",d_)})});var X_=b((V_,Q_)=>{(function(r){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]"},n=10,i=typeof process=="object"&&typeof process.nextTick=="function",s=typeof Symbol=="function",a=typeof Reflect=="object",o=typeof setImmediate=="function",u=o?setImmediate:setTimeout,l=s?a&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(d){var f=Object.getOwnPropertyNames(d);return f.push.apply(f,Object.getOwnPropertySymbols(d)),f}:Object.keys;function c(){this._events={},this._conf&&p.call(this,this._conf)}function p(d){d&&(this._conf=d,d.delimiter&&(this.delimiter=d.delimiter),d.maxListeners!==r&&(this._maxListeners=d.maxListeners),d.wildcard&&(this.wildcard=d.wildcard),d.newListener&&(this._newListener=d.newListener),d.removeListener&&(this._removeListener=d.removeListener),d.verboseMemoryLeak&&(this.verboseMemoryLeak=d.verboseMemoryLeak),d.ignoreErrors&&(this.ignoreErrors=d.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function m(d,f){var h="(node) warning: possible EventEmitter memory leak detected. "+d+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(h+=" Event name: "+f+"."),typeof process!="undefined"&&process.emitWarning){var g=new Error(h);g.name="MaxListenersExceededWarning",g.emitter=this,g.count=d,process.emitWarning(g)}else console.error(h),console.trace&&console.trace()}var T=function(d,f,h){var g=arguments.length;switch(g){case 0:return[];case 1:return[d];case 2:return[d,f];case 3:return[d,f,h];default:for(var _=new Array(g);g--;)_[g]=arguments[g];return _}};function y(d,f){for(var h={},g,_=d.length,v=f?f.length:0,k=0;k<_;k++)g=d[k],h[g]=k<v?f[k]:r;return h}function E(d,f,h){this._emitter=d,this._target=f,this._listeners={},this._listenersCount=0;var g,_;if((h.on||h.off)&&(g=h.on,_=h.off),f.addEventListener?(g=f.addEventListener,_=f.removeEventListener):f.addListener?(g=f.addListener,_=f.removeListener):f.on&&(g=f.on,_=f.off),!g&&!_)throw Error("target does not implement any known event API");if(typeof g!="function")throw TypeError("on method must be a function");if(typeof _!="function")throw TypeError("off method must be a function");this._on=g,this._off=_;var v=d._observers;v?v.push(this):d._observers=[this]}Object.assign(E.prototype,{subscribe:function(d,f,h){var g=this,_=this._target,v=this._emitter,k=this._listeners,S=function(){var O=T.apply(null,arguments),D={data:O,name:f,original:d};if(h){var C=h.call(_,D);C!==!1&&v.emit.apply(v,[D.name].concat(O));return}v.emit.apply(v,[f].concat(O))};if(k[d])throw Error("Event '"+d+"' is already listening");this._listenersCount++,v._newListener&&v._removeListener&&!g._onNewListener?(this._onNewListener=function(O){O===f&&k[d]===null&&(k[d]=S,g._on.call(_,d,S))},v.on("newListener",this._onNewListener),this._onRemoveListener=function(O){O===f&&!v.hasListeners(O)&&k[d]&&(k[d]=null,g._off.call(_,d,S))},k[d]=null,v.on("removeListener",this._onRemoveListener)):(k[d]=S,g._on.call(_,d,S))},unsubscribe:function(d){var f=this,h=this._listeners,g=this._emitter,_,v,k=this._off,S=this._target,O;if(d&&typeof d!="string")throw TypeError("event must be a string");function D(){f._onNewListener&&(g.off("newListener",f._onNewListener),g.off("removeListener",f._onRemoveListener),f._onNewListener=null,f._onRemoveListener=null);var C=ve.call(g,f);g._observers.splice(C,1)}if(d){if(_=h[d],!_)return;k.call(S,d,_),delete h[d],--this._listenersCount||D()}else{for(v=l(h),O=v.length;O-- >0;)d=v[O],k.call(S,d,h[d]);this._listeners={},this._listenersCount=0,D()}}});function M(d,f,h,g){var _=Object.assign({},f);if(!d)return _;if(typeof d!="object")throw TypeError("options must be an object");var v=Object.keys(d),k=v.length,S,O,D;function C(ae){throw Error('Invalid "'+S+'" option value'+(ae?". Reason: "+ae:""))}for(var me=0;me<k;me++){if(S=v[me],!g&&!e.call(f,S))throw Error('Unknown "'+S+'" option');O=d[S],O!==r&&(D=h[S],_[S]=D?D(O,C):O)}return _}function U(d,f){return(typeof d!="function"||!d.hasOwnProperty("prototype"))&&f("value must be a constructor"),d}function q(d){var f="value must be type of "+d.join("|"),h=d.length,g=d[0],_=d[1];return h===1?function(v,k){if(typeof v===g)return v;k(f)}:h===2?function(v,k){var S=typeof v;if(S===g||S===_)return v;k(f)}:function(v,k){for(var S=typeof v,O=h;O-- >0;)if(S===d[O])return v;k(f)}}var W=q(["function"]),ie=q(["object","function"]);function te(d,f,h){var g,_,v=0,k,S=new d(function(O,D,C){h=M(h,{timeout:0,overload:!1},{timeout:function(De,I){return De*=1,(typeof De!="number"||De<0||!Number.isFinite(De))&&I("timeout must be a positive number"),De}}),g=!h.overload&&typeof d.prototype.cancel=="function"&&typeof C=="function";function me(){_&&(_=null),v&&(clearTimeout(v),v=0)}var ae=function(De){me(),O(De)},ee=function(De){me(),D(De)};g?f(ae,ee,C):(_=[function(De){ee(De||Error("canceled"))}],f(ae,ee,function(De){if(k)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof De!="function")throw TypeError("onCancel callback must be a function");_.push(De)}),k=!0),h.timeout>0&&(v=setTimeout(function(){var De=Error("timeout");De.code="ETIMEDOUT",v=0,S.cancel(De),D(De)},h.timeout))});return g||(S.cancel=function(O){if(!!_){for(var D=_.length,C=1;C<D;C++)_[C](O);_[0](O),_=null}}),S}function ve(d){var f=this._observers;if(!f)return-1;for(var h=f.length,g=0;g<h;g++)if(f[g]._target===d)return g;return-1}function G(d,f,h,g,_){if(!h)return null;if(g===0){var v=typeof f;if(v==="string"){var k,S,O=0,D=0,C=this.delimiter,me=C.length;if((S=f.indexOf(C))!==-1){k=new Array(5);do k[O++]=f.slice(D,S),D=S+me;while((S=f.indexOf(C,D))!==-1);k[O++]=f.slice(D),f=k,_=O}else f=[f],_=1}else v==="object"?_=f.length:(f=[f],_=1)}var ae=null,ee,De,I,xe,Pe,rt=f[g],_r=f[g+1],We,Le;if(g===_)h._listeners&&(typeof h._listeners=="function"?(d&&d.push(h._listeners),ae=[h]):(d&&d.push.apply(d,h._listeners),ae=[h]));else if(rt==="*"){for(We=l(h),S=We.length;S-- >0;)ee=We[S],ee!=="_listeners"&&(Le=G(d,f,h[ee],g+1,_),Le&&(ae?ae.push.apply(ae,Le):ae=Le));return ae}else if(rt==="**"){for(Pe=g+1===_||g+2===_&&_r==="*",Pe&&h._listeners&&(ae=G(d,f,h,_,_)),We=l(h),S=We.length;S-- >0;)ee=We[S],ee!=="_listeners"&&(ee==="*"||ee==="**"?(h[ee]._listeners&&!Pe&&(Le=G(d,f,h[ee],_,_),Le&&(ae?ae.push.apply(ae,Le):ae=Le)),Le=G(d,f,h[ee],g,_)):ee===_r?Le=G(d,f,h[ee],g+2,_):Le=G(d,f,h[ee],g,_),Le&&(ae?ae.push.apply(ae,Le):ae=Le));return ae}else h[rt]&&(ae=G(d,f,h[rt],g+1,_));if(De=h["*"],De&&G(d,f,De,g+1,_),I=h["**"],I)if(g<_)for(I._listeners&&G(d,f,I,_,_),We=l(I),S=We.length;S-- >0;)ee=We[S],ee!=="_listeners"&&(ee===_r?G(d,f,I[ee],g+2,_):ee===rt?G(d,f,I[ee],g+1,_):(xe={},xe[ee]=I[ee],G(d,f,{"**":xe},g+1,_)));else I._listeners?G(d,f,I,_,_):I["*"]&&I["*"]._listeners&&G(d,f,I["*"],_,_);return ae}function V(d,f,h){var g=0,_=0,v,k=this.delimiter,S=k.length,O;if(typeof d=="string")if((v=d.indexOf(k))!==-1){O=new Array(5);do O[g++]=d.slice(_,v),_=v+S;while((v=d.indexOf(k,_))!==-1);O[g++]=d.slice(_)}else O=[d],g=1;else O=d,g=d.length;if(g>1){for(v=0;v+1<g;v++)if(O[v]==="**"&&O[v+1]==="**")return}var D=this.listenerTree,C;for(v=0;v<g;v++)if(C=O[v],D=D[C]||(D[C]={}),v===g-1)return D._listeners?(typeof D._listeners=="function"&&(D._listeners=[D._listeners]),h?D._listeners.unshift(f):D._listeners.push(f),!D._listeners.warned&&this._maxListeners>0&&D._listeners.length>this._maxListeners&&(D._listeners.warned=!0,m.call(this,D._listeners.length,C))):D._listeners=f,!0;return!0}function Ce(d,f,h,g){for(var _=l(d),v=_.length,k,S,O,D=d._listeners,C;v-- >0;)S=_[v],k=d[S],S==="_listeners"?O=h:O=h?h.concat(S):[S],C=g||typeof S=="symbol",D&&f.push(C?O:O.join(this.delimiter)),typeof k=="object"&&Ce.call(this,k,f,O,C);return f}function Fe(d){for(var f=l(d),h=f.length,g,_,v;h-- >0;)_=f[h],g=d[_],g&&(v=!0,_!=="_listeners"&&!Fe(g)&&delete d[_]);return v}function j(d,f,h){this.emitter=d,this.event=f,this.listener=h}j.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function A(d,f,h){if(h===!0)_=!0;else if(h===!1)g=!0;else{if(!h||typeof h!="object")throw TypeError("options should be an object or true");var g=h.async,_=h.promisify,v=h.nextTick,k=h.objectify}if(g||v||_){var S=f,O=f._origin||f;if(v&&!i)throw Error("process.nextTick is not supported");_===r&&(_=f.constructor.name==="AsyncFunction"),f=function(){var D=arguments,C=this,me=this.event;return _?v?Promise.resolve():new Promise(function(ae){u(ae)}).then(function(){return C.event=me,S.apply(C,D)}):(v?process.nextTick:u)(function(){C.event=me,S.apply(C,D)})},f._async=!0,f._origin=O}return[f,k?new j(this,d,f):this]}function w(d){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,p.call(this,d)}w.EventEmitter2=w,w.prototype.listenTo=function(d,f,h){if(typeof d!="object")throw TypeError("target musts be an object");var g=this;h=M(h,{on:r,off:r,reducers:r},{on:W,off:W,reducers:ie});function _(v){if(typeof v!="object")throw TypeError("events must be an object");var k=h.reducers,S=ve.call(g,d),O;S===-1?O=new E(g,d,h):O=g._observers[S];for(var D=l(v),C=D.length,me,ae=typeof k=="function",ee=0;ee<C;ee++)me=D[ee],O.subscribe(me,v[me]||me,ae?k:k&&k[me])}return t(f)?_(y(f)):_(typeof f=="string"?y(f.split(/\s+/)):f),this},w.prototype.stopListeningTo=function(d,f){var h=this._observers;if(!h)return!1;var g=h.length,_,v=!1;if(d&&typeof d!="object")throw TypeError("target should be an object");for(;g-- >0;)_=h[g],(!d||_._target===d)&&(_.unsubscribe(f),v=!0);return v},w.prototype.delimiter=".",w.prototype.setMaxListeners=function(d){d!==r&&(this._maxListeners=d,this._conf||(this._conf={}),this._conf.maxListeners=d)},w.prototype.getMaxListeners=function(){return this._maxListeners},w.prototype.event="",w.prototype.once=function(d,f,h){return this._once(d,f,!1,h)},w.prototype.prependOnceListener=function(d,f,h){return this._once(d,f,!0,h)},w.prototype._once=function(d,f,h,g){return this._many(d,1,f,h,g)},w.prototype.many=function(d,f,h,g){return this._many(d,f,h,!1,g)},w.prototype.prependMany=function(d,f,h,g){return this._many(d,f,h,!0,g)},w.prototype._many=function(d,f,h,g,_){var v=this;if(typeof h!="function")throw new Error("many only accepts instances of Function");function k(){return--f===0&&v.off(d,k),h.apply(this,arguments)}return k._origin=h,this._on(d,k,g,_)},w.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],f,h=this.wildcard,g,_,v,k,S;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(h&&(f=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(_=d.length,s){for(v=0;v<_;v++)if(typeof d[v]=="symbol"){S=!0;break}}S||(d=d.join(this.delimiter))}var O=arguments.length,D;if(this._all&&this._all.length)for(D=this._all.slice(),v=0,_=D.length;v<_;v++)switch(this.event=d,O){case 1:D[v].call(this,d);break;case 2:D[v].call(this,d,arguments[1]);break;case 3:D[v].call(this,d,arguments[1],arguments[2]);break;default:D[v].apply(this,arguments)}if(h)D=[],G.call(this,D,f,this.listenerTree,0,_);else if(D=this._events[d],typeof D=="function"){switch(this.event=d,O){case 1:D.call(this);break;case 2:D.call(this,arguments[1]);break;case 3:D.call(this,arguments[1],arguments[2]);break;default:for(g=new Array(O-1),k=1;k<O;k++)g[k-1]=arguments[k];D.apply(this,g)}return!0}else D&&(D=D.slice());if(D&&D.length){if(O>3)for(g=new Array(O-1),k=1;k<O;k++)g[k-1]=arguments[k];for(v=0,_=D.length;v<_;v++)switch(this.event=d,O){case 1:D[v].call(this);break;case 2:D[v].call(this,arguments[1]);break;case 3:D[v].call(this,arguments[1],arguments[2]);break;default:D[v].apply(this,g)}return!0}else if(!this.ignoreErrors&&!this._all&&d==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},w.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],f=this.wildcard,h,g,_,v,k,S;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(f&&(h=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(v=d.length,s){for(k=0;k<v;k++)if(typeof d[k]=="symbol"){g=!0;break}}g||(d=d.join(this.delimiter))}var O=[],D=arguments.length,C;if(this._all)for(k=0,v=this._all.length;k<v;k++)switch(this.event=d,D){case 1:O.push(this._all[k].call(this,d));break;case 2:O.push(this._all[k].call(this,d,arguments[1]));break;case 3:O.push(this._all[k].call(this,d,arguments[1],arguments[2]));break;default:O.push(this._all[k].apply(this,arguments))}if(f?(C=[],G.call(this,C,h,this.listenerTree,0)):C=this._events[d],typeof C=="function")switch(this.event=d,D){case 1:O.push(C.call(this));break;case 2:O.push(C.call(this,arguments[1]));break;case 3:O.push(C.call(this,arguments[1],arguments[2]));break;default:for(_=new Array(D-1),S=1;S<D;S++)_[S-1]=arguments[S];O.push(C.apply(this,_))}else if(C&&C.length){if(C=C.slice(),D>3)for(_=new Array(D-1),S=1;S<D;S++)_[S-1]=arguments[S];for(k=0,v=C.length;k<v;k++)switch(this.event=d,D){case 1:O.push(C[k].call(this));break;case 2:O.push(C[k].call(this,arguments[1]));break;case 3:O.push(C[k].call(this,arguments[1],arguments[2]));break;default:O.push(C[k].apply(this,_))}}else if(!this.ignoreErrors&&!this._all&&d==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(O)},w.prototype.on=function(d,f,h){return this._on(d,f,!1,h)},w.prototype.prependListener=function(d,f,h){return this._on(d,f,!0,h)},w.prototype.onAny=function(d){return this._onAny(d,!1)},w.prototype.prependAny=function(d){return this._onAny(d,!0)},w.prototype.addListener=w.prototype.on,w.prototype._onAny=function(d,f){if(typeof d!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),f?this._all.unshift(d):this._all.push(d),this},w.prototype._on=function(d,f,h,g){if(typeof d=="function")return this._onAny(d,f),this;if(typeof f!="function")throw new Error("on only accepts instances of Function");this._events||c.call(this);var _=this,v;return g!==r&&(v=A.call(this,d,f,g),f=v[0],_=v[1]),this._newListener&&this.emit("newListener",d,f),this.wildcard?(V.call(this,d,f,h),_):(this._events[d]?(typeof this._events[d]=="function"&&(this._events[d]=[this._events[d]]),h?this._events[d].unshift(f):this._events[d].push(f),!this._events[d].warned&&this._maxListeners>0&&this._events[d].length>this._maxListeners&&(this._events[d].warned=!0,m.call(this,this._events[d].length,d))):this._events[d]=f,_)},w.prototype.off=function(d,f){if(typeof f!="function")throw new Error("removeListener only takes instances of Function");var h,g=[];if(this.wildcard){var _=typeof d=="string"?d.split(this.delimiter):d.slice();if(g=G.call(this,null,_,this.listenerTree,0),!g)return this}else{if(!this._events[d])return this;h=this._events[d],g.push({_listeners:h})}for(var v=0;v<g.length;v++){var k=g[v];if(h=k._listeners,t(h)){for(var S=-1,O=0,D=h.length;O<D;O++)if(h[O]===f||h[O].listener&&h[O].listener===f||h[O]._origin&&h[O]._origin===f){S=O;break}if(S<0)continue;return this.wildcard?k._listeners.splice(S,1):this._events[d].splice(S,1),h.length===0&&(this.wildcard?delete k._listeners:delete this._events[d]),this._removeListener&&this.emit("removeListener",d,f),this}else(h===f||h.listener&&h.listener===f||h._origin&&h._origin===f)&&(this.wildcard?delete k._listeners:delete this._events[d],this._removeListener&&this.emit("removeListener",d,f))}return this.listenerTree&&Fe(this.listenerTree),this},w.prototype.offAny=function(d){var f=0,h=0,g;if(d&&this._all&&this._all.length>0){for(g=this._all,f=0,h=g.length;f<h;f++)if(d===g[f])return g.splice(f,1),this._removeListener&&this.emit("removeListenerAny",d),this}else{if(g=this._all,this._removeListener)for(f=0,h=g.length;f<h;f++)this.emit("removeListenerAny",g[f]);this._all=[]}return this},w.prototype.removeListener=w.prototype.off,w.prototype.removeAllListeners=function(d){if(d===r)return!this._events||c.call(this),this;if(this.wildcard){var f=G.call(this,null,d,this.listenerTree,0),h,g;if(!f)return this;for(g=0;g<f.length;g++)h=f[g],h._listeners=null;this.listenerTree&&Fe(this.listenerTree)}else this._events&&(this._events[d]=null);return this},w.prototype.listeners=function(d){var f=this._events,h,g,_,v,k;if(d===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!f)return[];for(h=l(f),v=h.length,_=[];v-- >0;)g=f[h[v]],typeof g=="function"?_.push(g):_.push.apply(_,g);return _}else{if(this.wildcard){if(k=this.listenerTree,!k)return[];var S=[],O=typeof d=="string"?d.split(this.delimiter):d.slice();return G.call(this,S,O,k,0),S}return f?(g=f[d],g?typeof g=="function"?[g]:g:[]):[]}},w.prototype.eventNames=function(d){var f=this._events;return this.wildcard?Ce.call(this,this.listenerTree,[],null,d):f?l(f):[]},w.prototype.listenerCount=function(d){return this.listeners(d).length},w.prototype.hasListeners=function(d){if(this.wildcard){var f=[],h=typeof d=="string"?d.split(this.delimiter):d.slice();return G.call(this,f,h,this.listenerTree,0),f.length>0}var g=this._events,_=this._all;return!!(_&&_.length||g&&(d===r?l(g).length:g[d]))},w.prototype.listenersAny=function(){return this._all?this._all:[]},w.prototype.waitFor=function(d,f){var h=this,g=typeof f;return g==="number"?f={timeout:f}:g==="function"&&(f={filter:f}),f=M(f,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:W,Promise:U}),te(f.Promise,function(_,v,k){function S(){var O=f.filter;if(!(O&&!O.apply(h,arguments)))if(h.off(d,S),f.handleError){var D=arguments[0];D?v(D):_(T.apply(null,arguments).slice(1))}else _(T.apply(null,arguments))}k(function(){h.off(d,S)}),h._on(d,S,!1)},{timeout:f.timeout,overload:f.overload})};function B(d,f,h){h=M(h,{Promise,timeout:0,overload:!1},{Promise:U});var g=h.Promise;return te(g,function(_,v,k){var S;if(typeof d.addEventListener=="function"){S=function(){_(T.apply(null,arguments))},k(function(){d.removeEventListener(f,S)}),d.addEventListener(f,S,{once:!0});return}var O=function(){D&&d.removeListener("error",D),_(T.apply(null,arguments))},D;f!=="error"&&(D=function(C){d.removeListener(f,O),v(C)},d.once("error",D)),k(function(){D&&d.removeListener("error",D),d.removeListener(f,O)}),d.once(f,O)},{timeout:h.timeout,overload:h.overload})}var P=w.prototype;if(Object.defineProperties(w,{defaultMaxListeners:{get:function(){return P._maxListeners},set:function(d){if(typeof d!="number"||d<0||Number.isNaN(d))throw TypeError("n must be a non-negative number");P._maxListeners=d},enumerable:!0},once:{value:B,writable:!0,configurable:!0}}),Object.defineProperties(P,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return w});else if(typeof V_=="object")Q_.exports=w;else{var X=new Function("","return this")();X.EventEmitter2=w}})()});var yr=b(on=>{"use strict";on.__esModule=!0;var rA;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(rA=on.Operators||(on.Operators={}));var nA;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(nA=on.StructuralCharacters||(on.StructuralCharacters={}));var iA;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(iA=on.Tokens||(on.Tokens={}))});var Lf=b(Ko=>{"use strict";Ko.__esModule=!0;var Ie=yr();Ko.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Ko.VALID_TOKENS={identifierOnly:[{name:Ie.Tokens.IDENTIFIER},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:Ie.Tokens.IDENTIFIER},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.OPEN_PARENTHESIS},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.NOT}],binaryOperator:[{name:Ie.Tokens.OPERATOR,value:Ie.Operators.AND},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.OR},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.XOR}],binaryOperatorOrClose:[{name:Ie.Tokens.OPERATOR,value:Ie.Operators.AND},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.OR},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.XOR},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Uf=b(Ir=>{"use strict";Ir.__esModule=!0;var Ei=yr();Ir.STRUCTURAL_CHARACTERS={"(":Ei.StructuralCharacters.OPEN_PARENTHESIS,")":Ei.StructuralCharacters.CLOSE_PARENTHESIS};Ir.OPERATORS={AND:Ei.Operators.AND,OR:Ei.Operators.OR,XOR:Ei.Operators.XOR,NOT:Ei.Operators.NOT};Ir.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));Ir.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);Ir.COMMENT_DELIMITER=String.fromCodePoint(35);Ir.EOL=String.fromCodePoint(10);Ir.ESCAPE_CHARACTER=String.fromCodePoint(92)});var CT=b(Fr=>{"use strict";var Wf=Fr&&Fr.__assign||function(){return Wf=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Wf.apply(this,arguments)};Fr.__esModule=!0;var PT=yr(),Nn=Uf();Fr.createResult=function(r,e,t){return{token:Wf({name:r},e!==null?{value:e}:{}),remainingString:t}};Fr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Nn.EOL){e=t;break}}return Fr.createResult(PT.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};Fr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Nn.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Nn.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Nn.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Nn.SEPARATORS.has(s)&&!Nn.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Nn.QUOTED_IDENTIFIER_DELIMITER+" character");return Fr.createResult(PT.Tokens.IDENTIFIER,t,r.slice(n+1))}});var NT=b(qf=>{"use strict";qf.__esModule=!0;var wi=yr(),Nt=Uf(),ki=CT();qf.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!Nt.SEPARATORS.has(s)){var a=Nt.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===wi.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!Nt.SEPARATORS.has(o)&&o!==wi.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return ki.createResult(wi.Tokens.STRUCTURAL_CHARACTER,Nt.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===Nt.QUOTED_IDENTIFIER_DELIMITER)return ki.getQuotedIdentifier(r.slice(i+1));if(s===Nt.COMMENT_DELIMITER)return ki.getComment(r.slice(i+1));e=i}}else if(Nt.SEPARATORS.has(s)||Nt.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===Nt.QUOTED_IDENTIFIER_DELIMITER||s===Nt.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(Nt.OPERATORS[u]){if(n&&!Nt.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return ki.createResult(wi.Tokens.OPERATOR,Nt.OPERATORS[u],l)}else return ki.createResult(wi.Tokens.IDENTIFIER,u,l)}return ki.createResult(wi.Tokens.EOF,null,"")}});var IT=b(Lr=>{"use strict";var sA=Lr&&Lr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Lr.__esModule=!0;var aA=NT(),Oi=yr(),Vo=Lf();Lr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=aA.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Oi.Tokens.COMMENT)return Lr.validateToken(s,t,n),s}}};Lr.getValue=function(r,e){var t=r(Vo.VALID_TOKENS.identifierOrNot),n=t.value===Oi.Operators.NOT;n&&(t=r(Vo.VALID_TOKENS.identifierOnly));var i=t.name===Oi.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?sA(i,[{name:Oi.Tokens.OPERATOR,value:Oi.Operators.NOT}]):i};Lr.previousOperatorTakesPrecedent=function(r,e){return Vo.OPERATOR_PRECEDENCE[r]<=Vo.OPERATOR_PRECEDENCE[e]};Lr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Oi.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var $f=b(ta=>{"use strict";var Di=ta&&ta.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};ta.__esModule=!0;var FT=yr(),LT=Lf(),Qo=IT();ta.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Qo.newTokenGenerator(r);return Yf(e)};var Yf=function(r,e){e===void 0&&(e=!1);for(var t=Di(Qo.getValue(r,Yf)),n=[];;){var i=e?LT.VALID_TOKENS.binaryOperatorOrClose:LT.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===FT.Tokens.EOF||s.name===FT.Tokens.STRUCTURAL_CHARACTER)return Di(t,Di(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Qo.previousOperatorTakesPrecedent(a.value,s.value))t=Di(t,[a]),n=n.slice(0,-1);else break}n=Di(n,[s]),t=Di(t,Qo.getValue(r,Yf))}}});var jf=b(Ur=>{"use strict";Ur.__esModule=!0;var UT=yr();Ur.andUtil=function(r,e){return r&&e};Ur.orUtil=function(r,e){return r||e};Ur.xorUtil=function(r,e){return r!==e};Ur.notUtil=function(r){return!r};Ur.isIdentifier=function(r){var e=r.name,t=r.value;return e===UT.Tokens.IDENTIFIER&&typeof t=="string"};Ur.isOperator=function(r){var e=r.name,t=r.value;return e===UT.Tokens.OPERATOR&&typeof t=="string"};Ur.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var WT=b(Hf=>{"use strict";var ra;Hf.__esModule=!0;var Gf=yr(),Bf=jf();Hf.OPERATOR_MAP=(ra={},ra[Gf.Operators.AND]=Bf.andUtil,ra[Gf.Operators.OR]=Bf.orUtil,ra[Gf.Operators.XOR]=Bf.xorUtil,ra)});var YT=b(Fn=>{"use strict";var zf=Fn&&Fn.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Fn.__esModule=!0;var oA=$f(),qT=yr(),uA=WT(),In=jf();Fn.getEvaluator=function(r){var e=oA.parse(r);return function(t){return Fn.evaluate(e,t)}};Fn.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(In.isIdentifier(i)||In.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===qT.Tokens.IDENTIFIER)return zf(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===qT.Operators.NOT)return o===void 0&&In.throwInvalidExpression("missing identifier"),zf(n.slice(0,-1),[In.notUtil(o)]);(o===void 0||a===void 0)&&In.throwInvalidExpression("missing identifier");var u=uA.OPERATOR_MAP[i.value];return u||In.throwInvalidExpression("unknown operator"),zf(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&In.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var jT=b(na=>{"use strict";na.__esModule=!0;var $T=YT();na.getEvaluator=$T.getEvaluator;na.evaluate=$T.evaluate;var lA=$f();na.parse=lA.parse});var hA={};hb(hA,{default:()=>lu});module.exports=gb(hA);var ob=require("obsidian");var ci=require("obsidian");var yA=new Error("timeout while waiting for mutex to become available"),_A=new Error("mutex already locked"),yb=new Error("request for lock canceled"),_b=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(p){a(p)}}function u(c){try{l(n.throw(c))}catch(p){a(p)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},pu=class{constructor(e,t=yb){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()})}runExclusive(e,t=1){return _b(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(t);try{return yield e(n)}finally{i()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(t=>t.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){let n=(e=this._weightedQueues[t-1])===null||e===void 0?void 0:e.shift();if(!n)continue;let i=this._value,s=t;this._value-=t,t=this._value+1,n.resolve([i,this._newReleaser(s)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)!this._weightedWaiters[e-1]||(this._weightedWaiters[e-1].forEach(t=>t()),this._weightedWaiters[e-1]=[])}},Tb=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(p){a(p)}}function u(c){try{l(n.throw(c))}catch(p){a(p)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},ma=class{constructor(e){this._semaphore=new pu(1,e)}acquire(){return Tb(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var ao=Fi(Be());var gt=class{constructor(e,t){this.start=e,this.end=t,t.isBefore(e)&&(this.start=t,this.end=e),this.start=this.start.startOf("day"),this.end=this.end.startOf("day")}static buildRelative(e){let t=e==="week"?"isoWeek":e;return new gt(window.moment().startOf(t).startOf("day"),window.moment().endOf(t).startOf("day"))}static buildInvalid(){return new gt(window.moment.invalid(),window.moment.invalid())}isValid(){return this.start.isValid()&&this.end.isValid()}moveToPrevious(e){let t=window.moment.duration(1,e);this.start.subtract(t),this.end.subtract(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}moveToNext(e){let t=window.moment.duration(1,e);this.start.add(t),this.end.add(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}};var xt=class{static parseDate(e,t=!1){return window.moment(ao.parseDate(e,void 0,{forwardDate:t})).startOf("day")}static parseDateRange(e,t=!1){let n=[xt.parseRelativeDateRange,xt.parseNumberedDateRange,xt.parseAbsoluteDateRange];for(let i of n){let s=i(e,t);if(s.isValid())return s}return gt.buildInvalid()}static parseAbsoluteDateRange(e,t){let n=ao.parse(e,void 0,{forwardDate:t});if(n.length===0)return gt.buildInvalid();let i=n[0].start,s=n[1]&&n[1].start?n[1].start:i,a=window.moment(i.date()),o=window.moment(s.date());return new gt(a,o)}static parseRelativeDateRange(e,t){let n=/(last|this|next) (week|month|quarter|year)/,i=e.match(n);if(i&&i.length===3){let s=i[1],a=i[2],o=gt.buildRelative(a);switch(s){case"last":o.moveToPrevious(a);break;case"next":o.moveToNext(a);break}return o}return gt.buildInvalid()}static parseNumberedDateRange(e,t){let n=[[/^\s*[0-9]{4}\s*$/,"YYYY","year"],[/^\s*[0-9]{4}-Q[1-4]\s*$/,"YYYY-Q","quarter"],[/^\s*[0-9]{4}-[0-9]{2}\s*$/,"YYYY-MM","month"],[/^\s*[0-9]{4}-W[0-9]{2}\s*$/,"YYYY-WW","isoWeek"]];for(let[i,s,a]of n){let o=e.match(i);if(o){let u=o[0].trim();return new gt(window.moment(u,s).startOf(a),window.moment(u,s).endOf(a))}}return gt.buildInvalid()}};var LM={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function si(r){for(let[e,t]of Object.entries(LM))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}var oo=["MO","TU","WE","TH","FR","SA","SU"],je=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(oo.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=oo[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var Re=function(r){return r!=null},At=function(r){return typeof r=="number"},nf=function(r){return typeof r=="string"&&oo.includes(r)},at=Array.isArray,Bt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var le=function(r,e){var t=0,n=[];if(at(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},jy=function(r){return at(r)?r:[r]};function vn(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=le(t,e/t.length)),t.slice(0,e)+String(n))}var Gy=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},ut=function(r,e){var t=r%e;return t*e<0?t+e:t},uo=function(r,e){return{div:Math.floor(r/e),mod:ut(r,e)}},Pt=function(r){return!Re(r)||r.length===0},Ue=function(r){return!Pt(r)},de=function(r,e){return Ue(r)&&r.indexOf(e)!==-1};var Vr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[vn(n.getUTCFullYear().toString(),4,"0"),vn(n.getUTCMonth()+1,2,"0"),vn(n.getUTCDate(),2,"0"),"T",vn(n.getUTCHours(),2,"0"),vn(n.getUTCMinutes(),2,"0"),vn(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(Vr||(Vr={}));var z=Vr;var UM=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Rr=UM;var p_=Fi(f_(),1),{__extends:oi,__assign:yt,__rest:iN,__decorate:sN,__param:aN,__metadata:oN,__awaiter:uN,__generator:lN,__exportStar:cN,__createBinding:dN,__values:fN,__read:pN,__spread:mN,__spreadArrays:hN,__spreadArray:x,__await:gN,__asyncGenerator:yN,__asyncDelegator:_N,__asyncValues:TN,__makeTemplateObject:bN,__importStar:vN,__importDefault:EN,__classPrivateFieldGet:wN,__classPrivateFieldSet:kN,__classPrivateFieldIn:ON}=p_.default;var WM=function(r){oi(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Rr),af=WM;var qM={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},En=qM;var m_=function(r,e){return r.indexOf(e)!==-1},YM=function(r){return r.toString()},$M=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},jM=function(){function r(e,t,n,i){if(t===void 0&&(t=YM),n===void 0&&(n=En),i===void 0&&(i=$M),this.text=[],this.language=n||En,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,p){return c-p}),a.sort(function(c,p){return p-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(Re(this.origOptions.byweekday)){var o=at(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,p){return c.weekday-p.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(m_(["dtstart","wkst","freq"],n))return!0;if(!m_(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Y.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=At(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),at(e)||(e=[e]);var a=function(u,l,c){for(var p="",m=0;m<u.length;m++)m!==0&&(m===u.length-1?p+=" "+c+" ":p+=l+" "),p+=u[m];return p};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),fr=jM;var GM=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Ls(r,e){e===void 0&&(e=En);var t={},n=new GM(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var m=n.acceptNumber();if(m&&(t.interval=parseInt(m[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=Y.DAILY,n.nextSymbol()&&(a(),p());break;case"weekday(s)":t.freq=Y.WEEKLY,t.byweekday=[Y.MO,Y.TU,Y.WE,Y.TH,Y.FR],n.nextSymbol(),p();break;case"week(s)":t.freq=Y.WEEKLY,n.nextSymbol()&&(s(),p());break;case"hour(s)":t.freq=Y.HOURLY,n.nextSymbol()&&(s(),p());break;case"minute(s)":t.freq=Y.MINUTELY,n.nextSymbol()&&(s(),p());break;case"month(s)":t.freq=Y.MONTHLY,n.nextSymbol()&&(s(),p());break;case"year(s)":t.freq=Y.YEARLY,n.nextSymbol()&&(s(),p());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=Y.WEEKLY;var T=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[Y[T]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(Y[y]),n.nextSymbol()}c(),p();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=Y.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var E=o();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(E),n.nextSymbol()}s(),p();break;default:throw new Error("Unknown symbol")}}function s(){var m=n.accept("on"),T=n.accept("the");if(!!(m||T))do{var y=l(),E=u(),M=o();if(y)E?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(Y[E].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(E)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(Y[E]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[Y.MO,Y.TU,Y.WE,Y.TH,Y.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var U=n.acceptNumber();if(!U)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(U[0],10)];n.accept("comma");){if(U=n.acceptNumber(),!U)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(U[0],10))}}else if(M)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(M);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var m=n.accept("at");if(!!m)do{var T=n.acceptNumber();if(!T)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(T[0],10)];n.accept("comma");){if(T=n.acceptNumber(),!T)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(T[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var m=parseInt(n.value[1],10);if(m<-366||m>366)throw new Error("Nth out of range: "+m);return n.nextSymbol(),n.accept("last")?-m:m;default:return!1}}function c(){n.accept("on"),n.accept("the");var m=l();if(!!m)for(t.bymonthday=[m],n.nextSymbol();n.accept("comma");){if(m=l(),!m)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(m),n.nextSymbol()}}function p(){if(n.symbol==="until"){var m=Date.parse(n.text);if(!m)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(m)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var oe;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(oe||(oe={}));function Us(r){return r<oe.HOURLY}var h_=function(r,e){return e===void 0&&(e=En),new Y(Ls(r,e)||void 0)},ui=["count","until","interval","byweekday","bymonthday","bymonth"];fr.IMPLEMENTED=[];fr.IMPLEMENTED[oe.HOURLY]=ui;fr.IMPLEMENTED[oe.MINUTELY]=ui;fr.IMPLEMENTED[oe.DAILY]=["byhour"].concat(ui);fr.IMPLEMENTED[oe.WEEKLY]=ui;fr.IMPLEMENTED[oe.MONTHLY]=ui;fr.IMPLEMENTED[oe.YEARLY]=["byweekno","byyearday"].concat(ui);var g_=function(r,e,t,n){return new fr(r,e,t,n).toString()},y_=fr.isFullyConvertible;var li=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var __=function(r){oi(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return Vr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=ut(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=uo(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Pt(i)||de(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=uo(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Pt(i)||de(i,this.hour))&&(Pt(s)||de(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=uo(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Pt(i)||de(i,this.hour))&&(Pt(s)||de(s,this.minute))&&(Pt(a)||de(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=Vr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Vr.MAXYEAR))return;t=Vr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case oe.YEARLY:return this.addYears(s);case oe.MONTHLY:return this.addMonths(s);case oe.WEEKLY:return this.addWeekly(s,a);case oe.DAILY:return this.addDaily(s);case oe.HOURLY:return this.addHours(s,n,o);case oe.MINUTELY:return this.addMinutes(s,n,o,u);case oe.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(li);function of(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];de(v_,s)||e.push(s),z.isDate(r[s])&&!z.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return yt({},r)}function T_(r){var e=yt(yt({},Ws),of(r));if(Re(e.byeaster)&&(e.freq=Y.YEARLY),!(Re(e.freq)&&Y.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Re(e.wkst)?At(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Y.MO.weekday,Re(e.bysetpos)){At(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Ue(e.byweekno)||Ue(e.byyearday)||Boolean(e.bymonthday)||Ue(e.bymonthday)||Re(e.byweekday)||Re(e.byeaster)))switch(e.freq){case Y.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Y.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Y.WEEKLY:e.byweekday=[z.getWeekday(e.dtstart)];break}if(Re(e.bymonth)&&!at(e.bymonth)&&(e.bymonth=[e.bymonth]),Re(e.byyearday)&&!at(e.byyearday)&&At(e.byyearday)&&(e.byyearday=[e.byyearday]),!Re(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(at(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Re(e.byweekno)&&!at(e.byweekno)&&(e.byweekno=[e.byweekno]),!Re(e.byweekday))e.bynweekday=null;else if(At(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(nf(e.byweekday))e.byweekday=[je.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof je)!e.byweekday.n||e.freq>Y.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(At(u)){a.push(u);continue}else if(nf(u)){a.push(je.fromStr(u).weekday);continue}!u.n||e.freq>Y.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=Ue(a)?a:null,e.bynweekday=Ue(o)?o:null}return Re(e.byhour)?At(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Y.HOURLY?[e.dtstart.getUTCHours()]:null,Re(e.byminute)?At(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Y.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Re(e.bysecond)?At(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Y.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function b_(r){var e=r.dtstart.getTime()%1e3;if(!Us(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new li(n,i,s,e))})})}),t}function Ys(r){var e=r.split(`
`).map(BM).filter(function(t){return t!==null});return yt(yt({},e[0]),e[1])}function qs(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=z.untilStringToDate(i),e}function BM(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return E_(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return E_(r);case"DTSTART":return qs(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function E_(r){var e=r.replace(/^RRULE:/i,""),t=qs(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=oe[o.toUpperCase()];break;case"WKST":t.wkst=Ht[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=HM(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=zM(o);break;case"DTSTART":case"TZID":var c=qs(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=z.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function HM(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(w_)}return w_(r)}function w_(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function zM(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return Ht[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=Ht[s].weekday;return new je(a,i)})}var wn=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=z.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function $s(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Ws),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!de(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!Re(o)||at(o)&&!o.length)){switch(a){case"FREQ":u=Y.FREQUENCIES[r.freq];break;case"WKST":At(o)?u=new je(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=jy(o).map(function(T){return T instanceof je?T:at(T)?new je(T[0],T[1]):new je(T)}).toString();break;case"DTSTART":t=KM(o,r.tzid);break;case"UNTIL":u=z.timeToUntilString(o,!r.tzid);break;default:if(at(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var p=e.map(function(T){var y=T[0],E=T[1];return"".concat(y,"=").concat(E.toString())}).join(";"),m="";return p!==""&&(m="RRULE:".concat(p)),[t,m].filter(function(T){return!!T}).join(`
`)}function KM(r,e){return r?"DTSTART"+new wn(new Date(r),e).toString():""}function VM(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var k_=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?z.clone(t):z.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var p=0;p<i.length;p++){var m=i[p];if(!VM(t[m],c[m]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(at(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Rr(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return at(n)?z.cloneDates(n):n instanceof Date?z.clone(n):n},r}();var O_=x(x(x(x(x(x(x(x(x(x(x(x(x([],le(1,31),!0),le(2,28),!0),le(3,31),!0),le(4,30),!0),le(5,31),!0),le(6,30),!0),le(7,31),!0),le(8,31),!0),le(9,30),!0),le(10,31),!0),le(11,30),!0),le(12,31),!0),le(1,7),!0),D_=x(x(x(x(x(x(x(x(x(x(x(x(x([],le(1,31),!0),le(2,29),!0),le(3,31),!0),le(4,30),!0),le(5,31),!0),le(6,30),!0),le(7,31),!0),le(8,31),!0),le(9,30),!0),le(10,31),!0),le(11,30),!0),le(12,31),!0),le(1,7),!0),QM=Bt(1,29),XM=Bt(1,30),Qr=Bt(1,31),lt=Bt(1,32),S_=x(x(x(x(x(x(x(x(x(x(x(x(x([],lt,!0),XM,!0),lt,!0),Qr,!0),lt,!0),Qr,!0),lt,!0),lt,!0),Qr,!0),lt,!0),Qr,!0),lt,!0),lt.slice(0,7),!0),R_=x(x(x(x(x(x(x(x(x(x(x(x(x([],lt,!0),QM,!0),lt,!0),Qr,!0),lt,!0),Qr,!0),lt,!0),lt,!0),Qr,!0),lt,!0),Qr,!0),lt,!0),lt.slice(0,7),!0),ZM=Bt(-28,0),JM=Bt(-29,0),Xr=Bt(-30,0),ct=Bt(-31,0),M_=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),JM,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct.slice(0,7),!0),x_=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),ZM,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct,!0),Xr,!0),ct,!0),Xr,!0),ct,!0),ct.slice(0,7),!0),A_=[0,31,60,91,121,152,182,213,244,274,305,335,366],P_=[0,31,59,90,120,151,181,212,243,273,304,334,365],uf=function(){for(var r=[],e=0;e<55;e++)r=r.concat(Bt(7));return r}();function C_(r,e){var t=new Date(Date.UTC(r,0,1)),n=z.isLeapYear(r)?366:365,i=z.isLeapYear(r+1)?366:365,s=z.toOrdinal(t),a=z.getWeekday(t),o=yt(yt({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},ex(r)),{wnomask:null});if(Pt(e.byweekno))return o;o.wnomask=le(0,n+7);var u,l,c=u=ut(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+ut(a-e.wkst,7)):l=n-c;for(var p=Math.floor(l/7),m=ut(l,7),T=Math.floor(p+m/4),y=0;y<e.byweekno.length;y++){var E=e.byweekno[y];if(E<0&&(E+=T+1),E>0&&E<=T){var M=void 0;E>1?(M=c+(E-1)*7,c!==u&&(M-=7-u)):M=c;for(var U=0;U<7&&(o.wnomask[M]=1,M++,o.wdaymask[M]!==e.wkst);U++);}}if(de(e.byweekno,1)){var M=c+T*7;if(c!==u&&(M-=7-u),M<n)for(var y=0;y<7&&(o.wnomask[M]=1,M+=1,o.wdaymask[M]!==e.wkst);y++);}if(c){var q=void 0;if(de(e.byweekno,-1))q=-1;else{var W=z.getWeekday(new Date(Date.UTC(r-1,0,1))),ie=ut(7-W.valueOf()+e.wkst,7),te=z.isLeapYear(r-1)?366:365,ve=void 0;ie>=4?(ie=0,ve=te+ut(W-e.wkst,7)):ve=n-c,q=Math.floor(52+ut(ve,7)/4)}if(de(e.byweekno,q))for(var M=0;M<c;M++)o.wnomask[M]=1}return o}function ex(r){var e=z.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=z.getWeekday(t);return e===365?{mmask:O_,mdaymask:R_,nmdaymask:x_,wdaymask:uf.slice(n),mrange:P_}:{mmask:D_,mdaymask:S_,nmdaymask:M_,wdaymask:uf.slice(n),mrange:A_}}function N_(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===Y.YEARLY)if(Pt(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===Y.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Pt(o))return a;a.nwdaymask=le(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],p=l[1]-1,m=0;m<s.bynweekday.length;m++){var T=void 0,y=s.bynweekday[m],E=y[0],M=y[1];M<0?(T=p+(M+1)*7,T-=ut(i[T]-E,7)):(T=c+(M-1)*7,T+=ut(7-i[T]+E,7)),c<=T&&T<=p&&(a.nwdaymask[T]=1)}return a}function I_(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),p=i%4,m=Math.floor(32+2*a+2*c-l-p)%7,T=Math.floor((t+11*l+22*m)/451),y=Math.floor((l+m-7*T+114)/31),E=(l+m-7*T+114)%31+1,M=Date.UTC(r,y-1,E+e),U=Date.UTC(r,0,1);return[Math.ceil((M-U)/(1e3*60*60*24))]}var tx=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=C_(e,n)),Ue(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=N_(e,t,s,a,o,n)}Re(n.byeaster)&&(this.eastermask=I_(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[Bt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=le(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=le(null,this.yearlen+7),s=z.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=le(null,this.yearlen),s=z.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),z.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new li(e,t,a,i)});return z.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new li(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case oe.YEARLY:return this.ydayset.bind(this);case oe.MONTHLY:return this.mdayset.bind(this);case oe.WEEKLY:return this.wdayset.bind(this);case oe.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case oe.HOURLY:return this.htimeset.bind(this);case oe.MINUTELY:return this.mtimeset.bind(this);case oe.SECONDLY:return this.stimeset.bind(this)}},r}(),F_=tx;function L_(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=ut(c,e.length)):(u=Math.floor((c-1)/e.length),l=ut(c-1,e.length));for(var p=[],m=t;m<n;m++){var T=s[m];!Re(T)||p.push(T)}var y=void 0;u<0?y=p.slice(u)[0]:y=p[u];var E=e[l],M=z.fromOrdinal(i.yearordinal+y),U=z.combine(M,E);de(a,U)||a.push(U)}return z.sort(a),a}function po(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Mr(r);var u=__.fromDate(t),l=new F_(e);l.rebuild(u.year,u.month);for(var c=ix(l,u,e);;){var p=l.getdayset(n)(u.year,u.month,u.day),m=p[0],T=p[1],y=p[2],E=nx(m,T,y,l,e);if(Ue(a))for(var M=L_(a,c,T,y,l,m),U=0;U<M.length;U++){var q=M[U];if(s&&q>s)return Mr(r);if(q>=t){var W=U_(q,e);if(!r.accept(W)||o&&(--o,!o))return Mr(r)}}else for(var U=T;U<y;U++){var ie=m[U];if(!!Re(ie))for(var te=z.fromOrdinal(l.yearordinal+ie),ve=0;ve<c.length;ve++){var G=c[ve],q=z.combine(te,G);if(s&&q>s)return Mr(r);if(q>=t){var W=U_(q,e);if(!r.accept(W)||o&&(--o,!o))return Mr(r)}}}if(e.interval===0||(u.add(e,E),u.year>z.MAXYEAR))return Mr(r);Us(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function rx(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return Ue(n)&&!de(n,r.mmask[e])||Ue(i)&&!r.wnomask[e]||Ue(s)&&!de(s,r.wdaymask[e])||Ue(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!de(r.eastermask,e)||(Ue(o)||Ue(u))&&!de(o,r.mdaymask[e])&&!de(u,r.nmdaymask[e])||Ue(l)&&(e<r.yearlen&&!de(l,e+1)&&!de(l,-r.yearlen+e)||e>=r.yearlen&&!de(l,e+1-r.yearlen)&&!de(l,-r.nextyearlen+e-r.yearlen))}function U_(r,e){return new wn(r,e.tzid).rezonedDate()}function Mr(r){return r.getValue()}function nx(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=rx(n,o,i),s&&(r[o]=null)}return s}function ix(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Us(n)?b_(t):n>=Y.HOURLY&&Ue(i)&&!de(i,e.hour)||n>=Y.MINUTELY&&Ue(s)&&!de(s,e.minute)||n>=Y.SECONDLY&&Ue(a)&&!de(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var Ht={MO:new je(0),TU:new je(1),WE:new je(2),TH:new je(3),FR:new je(4),SA:new je(5),SU:new je(6)},Ws={freq:oe.YEARLY,dtstart:null,interval:1,wkst:Ht.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},v_=Object.keys(Ws),Y=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new k_,this.origOptions=of(e);var n=T_(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Ls(e,t)},r.fromText=function(e,t){return h_(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return po(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new af("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Rr("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!z.isValidDate(e)||!z.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new af("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Rr("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!z.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Rr("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!z.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Rr("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return $s(this.origOptions)},r.prototype.toText=function(e,t,n){return g_(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return y_(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=oe.YEARLY,r.MONTHLY=oe.MONTHLY,r.WEEKLY=oe.WEEKLY,r.DAILY=oe.DAILY,r.HOURLY=oe.HOURLY,r.MINUTELY=oe.MINUTELY,r.SECONDLY=oe.SECONDLY,r.MO=Ht.MO,r.TU=Ht.TU,r.WE=Ht.WE,r.TH=Ht.TH,r.FR=Ht.FR,r.SA=Ht.SA,r.SU=Ht.SU,r.parseString=Ys,r.optionsToString=$s,r}();function W_(r,e,t,n,i,s){var a={},o=r.accept;function u(m,T){t.forEach(function(y){y.between(m,T,!0).forEach(function(E){a[Number(E)]=!0})})}i.forEach(function(m){var T=new wn(m,s).rezonedDate();a[Number(T)]=!0}),r.accept=function(m){var T=Number(m);return isNaN(T)?o.call(this,m):!a[T]&&(u(new Date(T-1),new Date(T+1)),!a[T])?(a[T]=!0,o.call(this,m)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(m){var T=Number(m);return a[T]?!0:(a[T]=!0,o.call(this,m))});for(var l=0;l<n.length;l++){var c=new wn(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(m){po(r,m.options)});var p=r._result;switch(z.sort(p),r.method){case"all":case"between":return p;case"before":return p.length&&p[p.length-1]||null;case"after":default:return p.length&&p[0]||null}}var q_={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function sx(r,e){var t=[],n=[],i=[],s=[],a=qs(r),o=a.dtstart,u=a.tzid,l=cx(r,e.unfold);return l.forEach(function(c){var p;if(!!c){var m=lx(c),T=m.name,y=m.parms,E=m.value;switch(T.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Ys(c));break;case"RDATE":var M=(p=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&p!==void 0?p:[],U=M[1];U&&!u&&(u=U),n=n.concat(Y_(E,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Ys(E));break;case"EXDATE":s=s.concat(Y_(E,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+T)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function ax(r,e){var t=sx(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new cf(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(m){c.rrule(new Y(lf(m,o,u),l))}),i.forEach(function(m){c.rdate(m)}),s.forEach(function(m){c.exrule(new Y(lf(m,o,u),l))}),a.forEach(function(m){c.exdate(m)}),e.compatible&&e.dtstart&&c.rdate(o),c}var p=n[0]||{};return new Y(lf(p,p.dtstart||e.dtstart||o,p.tzid||e.tzid||u),l)}function mo(r,e){return e===void 0&&(e={}),ax(r,ox(e))}function lf(r,e,t){return yt(yt({},r),{dtstart:e,tzid:t})}function ox(r){var e=[],t=Object.keys(r),n=Object.keys(q_);if(t.forEach(function(i){de(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return yt(yt({},q_),r)}function ux(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=Gy(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function lx(r){var e=ux(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function cx(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function dx(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Y_(r,e){return dx(e),r.split(",").map(function(t){return z.untilStringToDate(t)})}function $_(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var cf=function(r){oi(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=$_.apply(n,["dtstart"]),n.tzid=$_.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return W_(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){j_(t,this._rrule)},e.prototype.exrule=function(t){j_(t,this._exrule)},e.prototype.rdate=function(t){G_(t,this._rdate)},e.prototype.exdate=function(t){G_(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return mo(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return mo(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat($s({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(B_("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(B_("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(Y);function j_(r,e){if(!(r instanceof Y))throw new TypeError(String(r)+" is not RRule instance");de(e.map(String),String(r))||e.push(r)}function G_(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");de(e.map(Number),Number(r))||(e.push(r),z.sort(e))}function B_(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return z.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}function xr(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?-1:!r.isValid()&&e.isValid()||r.isAfter(e)?1:r.isBefore(e)?-1:0:0}var et=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=Y.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new Y(u);return new et({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){s instanceof Error&&console.log(s.message)}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){let e=this.nextReferenceDate();if(e!==null){let t=null,n=null,i=null;if(this.referenceDate){if(this.startDate){let s=window.moment.duration(this.startDate.diff(this.referenceDate));t=window.moment(e),t.add(Math.round(s.asDays()),"days")}if(this.scheduledDate){let s=window.moment.duration(this.scheduledDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(s.asDays()),"days")}if(this.dueDate){let s=window.moment.duration(this.dueDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(s.asDays()),"days")}}return{startDate:t,scheduledDate:n,dueDate:i}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||xr(this.startDate,e.startDate)!==0||xr(this.scheduledDate,e.scheduledDate)!==0||xr(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextReferenceDate(){if(this.baseOnToday){let e=window.moment();return this.nextReferenceDateFromToday(e).toDate()}else return this.nextReferenceDateFromOriginalReferenceDate().toDate()}nextReferenceDateFromToday(e){let t=new Y(Dt(he({},this.rrule.origOptions),{dtstart:e.startOf("day").utc(!0).toDate()}));return this.nextAfter(e.endOf("day"),t)}nextReferenceDateFromOriginalReferenceDate(){var t;let e=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");return this.nextAfter(e,this.rrule)}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=et.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=et.nextAfterYears(e,n,t,a[1])),et.addTimezone(n)}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));et.isSkippingTooManyMonths(e,t,s);)t=et.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));et.isSkippingTooManyYears(e,t,s);)t=et.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new Y(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var df=5;function ff(r,e){let t=[r.startDateSymbol,r.scheduledDateSymbol,r.dueDateSymbol].join("|");return(n,i,s)=>{let a=[];return a=a.concat(px(n,i,s,t,e)),a=a.concat(mx(n,i,s,r.recurrenceSymbol)),a=a.concat(fx(n,i,s,r)),a.length>0&&!a.some(o=>o.suggestionType==="match")&&a.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),a=a.slice(0,s.autoSuggestMaxItems),a}}function fx(r,e,t,n){let i=u=>Object.values(n.prioritySymbols).some(l=>l.length>0&&u.includes(l)),s=[];if(r.includes(n.dueDateSymbol)||s.push({displayText:`${n.dueDateSymbol} due date`,appendText:`${n.dueDateSymbol} `}),r.includes(n.startDateSymbol)||s.push({displayText:`${n.startDateSymbol} start date`,appendText:`${n.startDateSymbol} `}),r.includes(n.scheduledDateSymbol)||s.push({displayText:`${n.scheduledDateSymbol} scheduled date`,appendText:`${n.scheduledDateSymbol} `}),i(r)||(s.push({displayText:`${n.prioritySymbols.High} high priority`,appendText:`${n.prioritySymbols.High} `}),s.push({displayText:`${n.prioritySymbols.Medium} medium priority`,appendText:`${n.prioritySymbols.Medium} `}),s.push({displayText:`${n.prioritySymbols.Low} low priority`,appendText:`${n.prioritySymbols.Low} `}),s.push({displayText:`${n.prioritySymbols.Highest} highest priority`,appendText:`${n.prioritySymbols.Highest} `}),s.push({displayText:`${n.prioritySymbols.Lowest} lowest priority`,appendText:`${n.prioritySymbols.Lowest} `})),r.includes(n.recurrenceSymbol)||s.push({displayText:`${n.recurrenceSymbol} recurring (repeat)`,appendText:`${n.recurrenceSymbol} `}),!r.includes(n.createdDateSymbol)){let l=xt.parseDate("today",!0).format(H.dateFormat);s.push({textToMatch:`${n.createdDateSymbol} created`,displayText:`${n.createdDateSymbol} created today (${l})`,appendText:`${n.createdDateSymbol} ${l} `})}let a=pf(r,/([a-zA-Z'_-]*)/g,e),o=[];if(a&&a.length>0){let u=a[0];if(u.length>=Math.max(1,t.autoSuggestMinMatch)){let l=s.filter(c=>(c.textToMatch||c.displayText).toLowerCase().includes(u.toLowerCase()));for(let c of l)o.push({suggestionType:"match",displayText:c.displayText,appendText:c.appendText,insertAt:a.index,insertSkip:u.length})}}return o.length===0&&t.autoSuggestMinMatch===0?s:o}function px(r,e,t,n,i){let s=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],a=[],o=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),u=pf(r,o,e);if(u&&u.length>=2){let l=u[1],c=u[2];if(c.length<t.autoSuggestMinMatch)return[];let p=c&&c.length>1?xt.parseDate(si(c),!0):null;p&&p.isValid()&&a.push({displayText:`${p.format(H.dateFormat)}`,appendText:`${l} ${p.format(H.dateFormat)} `,insertAt:u.index,insertSkip:u[0].length});let m=1,T=s.filter(y=>c&&c.length>=m&&y.toLowerCase().includes(c.toLowerCase())).slice(0,i);T.length===0&&(T=s.slice(0,i));for(let y of T){let M=`${xt.parseDate(y,!0).format(H.dateFormat)}`;a.push({suggestionType:"match",displayText:`${y} (${M})`,appendText:`${l} ${M} `,insertAt:u.index,insertSkip:u[0].length})}}return a}function mx(r,e,t,n){var u;let i=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],s=[],a=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),o=pf(r,a,e);if(o&&o.length>=2){let l=o[1],c=o[2];if(c.length<t.autoSuggestMinMatch)return[];if(c.length>0){let y=(u=et.fromText({recurrenceRuleText:c,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:u.toText();if(y){let E=`${l} ${y} `;if(s.push({suggestionType:"match",displayText:`\u2705 ${y}`,appendText:E,insertAt:o.index,insertSkip:o[0].length}),o[0]==E)return[]}}let p=1,m=t.autoSuggestMaxItems/2,T=i.filter(y=>c&&c.length>=p&&y.toLowerCase().includes(c.toLowerCase())).slice(0,m);T.length===0&&c.trim().length===0&&(T=i.slice(0,m));for(let y of T)s.push({suggestionType:"match",displayText:`${y}`,appendText:`${l} ${y} `,insertAt:o.index,insertSkip:o[0].length})}return s}function pf(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i}var js=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideCreatedDate=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.hideTags=!1;this.shortMode=!1;this.explainQuery=!1}},Zr=class{constructor(e,t){this.defaultLayout=["description","priority","recurrenceRule","createdDate","startDate","scheduledDate","dueDate","doneDate","blockLink"];this.hiddenComponents=[];this.specificClasses=[];e?this.options=e:this.options=new js,t?this.layoutComponents=t:this.layoutComponents=this.defaultLayout,this.layoutComponents=this.applyOptions(this.options)}applyOptions(e){let t=(s,a,o)=>a?(this.specificClasses.push(`tasks-layout-hide-${o}`),this.hiddenComponents.push(o),s.filter(u=>u!=o)):s,n=(s,a)=>{s&&this.specificClasses.push(`tasks-layout-hide-${a}`)},i=this.layoutComponents;return i=t(i,e.hidePriority,"priority"),i=t(i,e.hideRecurrenceRule,"recurrenceRule"),i=t(i,e.hideCreatedDate,"createdDate"),i=t(i,e.hideStartDate,"startDate"),i=t(i,e.hideScheduledDate,"scheduledDate"),i=t(i,e.hideDueDate,"dueDate"),i=t(i,e.hideDoneDate,"doneDate"),n(e.hideTags,"tags"),n(e.hideUrgency,"urgency"),n(e.hideBacklinks,"backlinks"),n(e.hideEditButton,"edit-button"),e.shortMode&&this.specificClasses.push("tasks-layout-short-mode"),i}};var mf={prioritySymbols:{Highest:"\u{1F53A}",High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",Lowest:"\u23EC",None:""},startDateSymbol:"\u{1F6EB}",createdDateSymbol:"\u2795",scheduledDateSymbol:"\u23F3",dueDateSymbol:"\u{1F4C5}",doneDateSymbol:"\u2705",recurrenceSymbol:"\u{1F501}",TaskFormatRegularExpressions:{priorityRegex:/([🔺⏫🔼🔽⏬])$/u,startDateRegex:/🛫 *(\d{4}-\d{2}-\d{2})$/u,createdDateRegex:/➕ *(\d{4}-\d{2}-\d{2})$/u,scheduledDateRegex:/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,dueDateRegex:/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,doneDateRegex:/✅ *(\d{4}-\d{2}-\d{2})$/u,recurrenceRegex:/🔁 ?([a-zA-Z0-9, !]+)$/iu}},kn=class{constructor(e){this.symbols=e}serialize(e){let t=new Zr,n="";for(let i of t.layoutComponents)n+=this.componentToString(e,t,i);return n}componentToString(e,t,n){var p;let{prioritySymbols:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,doneDateSymbol:u,recurrenceSymbol:l,dueDateSymbol:c}=this.symbols;switch(n){case"description":return e.description;case"priority":{let m="";return e.priority==="0"?m=" "+i.Highest:e.priority==="1"?m=" "+i.High:e.priority==="2"?m=" "+i.Medium:e.priority==="4"?m=" "+i.Low:e.priority==="5"&&(m=" "+i.Lowest),m}case"startDate":return e.startDate?t.options.shortMode?" "+s:` ${s} ${e.startDate.format(H.dateFormat)}`:"";case"createdDate":return e.createdDate?t.options.shortMode?" "+a:` ${a} ${e.createdDate.format(H.dateFormat)}`:"";case"scheduledDate":return!e.scheduledDate||e.scheduledDateIsInferred?"":t.options.shortMode?" "+o:` ${o} ${e.scheduledDate.format(H.dateFormat)}`;case"doneDate":return e.doneDate?t.options.shortMode?" "+u:` ${u} ${e.doneDate.format(H.dateFormat)}`:"";case"dueDate":return e.dueDate?t.options.shortMode?" "+c:` ${c} ${e.dueDate.format(H.dateFormat)}`:"";case"recurrenceRule":return e.recurrence?t.options.shortMode?" "+l:` ${l} ${e.recurrence.toText()}`:"";case"blockLink":return(p=e.blockLink)!=null?p:"";default:throw new Error(`Don't know how to render task component of type '${n}'`)}}parsePriority(e){let{prioritySymbols:t}=this.symbols;switch(e){case t.Lowest:return"5";case t.Low:return"4";case t.Medium:return"2";case t.High:return"1";case t.Highest:return"0";default:return"3"}}deserialize(e){let{TaskFormatRegularExpressions:t}=this.symbols,n,i="3",s=null,a=null,o=null,u=null,l=null,c="",p=null,m="",T=20,y=0;do{n=!1;let E=e.match(t.priorityRegex);E!==null&&(i=this.parsePriority(E[1]),e=e.replace(t.priorityRegex,"").trim(),n=!0);let M=e.match(t.doneDateRegex);M!==null&&(u=window.moment(M[1],H.dateFormat),e=e.replace(t.doneDateRegex,"").trim(),n=!0);let U=e.match(t.dueDateRegex);U!==null&&(o=window.moment(U[1],H.dateFormat),e=e.replace(t.dueDateRegex,"").trim(),n=!0);let q=e.match(t.scheduledDateRegex);q!==null&&(a=window.moment(q[1],H.dateFormat),e=e.replace(t.scheduledDateRegex,"").trim(),n=!0);let W=e.match(t.startDateRegex);W!==null&&(s=window.moment(W[1],H.dateFormat),e=e.replace(t.startDateRegex,"").trim(),n=!0);let ie=e.match(t.createdDateRegex);ie!==null&&(l=window.moment(ie[1],H.dateFormat),e=e.replace(t.createdDateRegex,"").trim(),n=!0);let te=e.match(t.recurrenceRegex);te!==null&&(c=te[1].trim(),e=e.replace(t.recurrenceRegex,"").trim(),n=!0);let ve=e.match(H.hashTagsFromEnd);if(ve!=null){e=e.replace(H.hashTagsFromEnd,"").trim(),n=!0;let G=ve[0].trim();m=m.length>0?[G,m].join(" "):G}y++}while(n&&y<=T);return c.length>0&&(p=et.fromText({recurrenceRuleText:c,startDate:s,scheduledDate:a,dueDate:o})),m.length>0&&(e+=" "+m),{description:e,priority:i,startDate:s,createdDate:l,scheduledDate:a,dueDate:o,doneDate:u,recurrence:p,tags:Te.extractHashtags(e)}}};function On(r){let e=["(?:",/(?=[^\]]+\])\[/,"|",/(?=[^)]+\))\(/,")",/ */,r,/ */,/[)\]]/,/(?: *,)?/,/$/].map(t=>t instanceof RegExp?t.source:t).join("");return new RegExp(e,r.flags)}var hf={prioritySymbols:{Highest:"priority:: highest",High:"priority:: high",Medium:"priority:: medium",Low:"priority:: low",Lowest:"priority:: lowest",None:""},startDateSymbol:"start::",createdDateSymbol:"created::",scheduledDateSymbol:"scheduled::",dueDateSymbol:"due::",doneDateSymbol:"completion::",recurrenceSymbol:"repeat::",TaskFormatRegularExpressions:{priorityRegex:On(/priority:: *(highest|high|medium|low|lowest)/),startDateRegex:On(/start:: *(\d{4}-\d{2}-\d{2})/),createdDateRegex:On(/created:: *(\d{4}-\d{2}-\d{2})/),scheduledDateRegex:On(/scheduled:: *(\d{4}-\d{2}-\d{2})/),dueDateRegex:On(/due:: *(\d{4}-\d{2}-\d{2})/),doneDateRegex:On(/completion:: *(\d{4}-\d{2}-\d{2})/),recurrenceRegex:On(/repeat:: *([a-zA-Z0-9, !]+)/)}},ho=class extends kn{constructor(){super(hf)}parsePriority(e){switch(e){case"highest":return"0";case"high":return"1";case"medium":return"2";case"low":return"4";case"lowest":return"5";default:return"3"}}componentToString(e,t,n){let i=super.componentToString(e,t,n);return i!==""&&!["blockLink","description"].includes(n)?`  [${i.trim()}]`:i}};var zt=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(zt||{}),tt=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var wt=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get nextSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}constructor(e){this.configuration=e}static makeDone(){return new wt(new tt("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new wt(new tt("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new wt(new tt(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new wt(new tt("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new wt(new tt("/","In Progress","x",!0,"IN_PROGRESS"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return zt[e]||"TODO"}static createUnknownStatus(e){return new wt(new tt(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=wt.getTypeFromStatusTypeString(e[3]);return new wt(new tt(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}identicalTo(e){let t=["symbol","name","nextStatusSymbol","availableAsCommand","type"];for(let n of t)if(this[n]!==e[n])return!1;return!0}previewText(){let e="";return wt.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},J=wt;J.DONE=wt.makeDone(),J.EMPTY=wt.makeEmpty(),J.TODO=wt.makeTodo();var go=class{constructor(e=!1,t=!1){this.ignoreSortInstructions=e,this.showTaskHiddenData=t}};var He=class{constructor(){this.coreStatuses=[J.makeTodo().configuration,J.makeDone().configuration],this.customStatuses=[J.makeInProgress().configuration,J.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new J(e);return t.findIndex(i=>new J(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){He.deleteAllCustomStatuses(e),new He().customStatuses.forEach(n=>{He.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):He.addStatus(e.customStatuses,J.createFromImportedValue(i))}),n}static applyToStatusRegistry(e,t){t.clearStatuses(),e.coreStatuses.forEach(n=>{t.add(n)}),e.customStatuses.forEach(n=>{t.add(n)})}};var H_=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var pr=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return H_.forEach(t=>{e=[...e,new pr(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return pr.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of pr.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};function yo(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var Kt=class{static get(){let{globalFilter:e}=Q();return e}static set(e){Ge({globalFilter:e})}static reset(){Ge({globalFilter:Kt.empty})}static isEmpty(){return Kt.get()===Kt.empty}static equals(e){return Kt.get()===e}static includedIn(e){let t=Kt.get();return e.includes(t)}static prependTo(e){return Kt.get()+" "+e}static removeAsWordFromDependingOnSettings(e){let{removeGlobalFilter:t}=Q();return t?Kt.removeAsWordFrom(e):e}static removeAsWordFrom(e){if(Kt.isEmpty())return e;let t=RegExp("(^|\\s)"+yo(Kt.get())+"($|\\s)","ug");return e.search(t)>-1&&(e=e.replace(t,"$1$2").replace("  "," ").trim()),e}static removeAsSubstringFrom(e){let t=Kt.get();return e.replace(t,"").trim()}},we=Kt;we.empty="";var Ar={tasksPluginEmoji:{displayName:"Tasks Emoji Format",taskSerializer:new kn(mf),buildSuggestions:ff(mf,df)},dataview:{displayName:"Dataview",taskSerializer:new ho,buildSuggestions:ff(hf,df)}},gx={globalQuery:"",globalFilter:we.empty,removeGlobalFilter:!1,taskFormat:"tasksPluginEmoji",setCreatedDate:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],recurrenceOnNextLine:!1,statusSettings:new He,features:pr.settingsFlags,generalSettings:{},headingOpened:{},debugSettings:new go},Jr=he({},gx),Q=()=>{for(let r in pr.settingsFlags)Jr.features[r]===void 0&&(Jr.features[r]=pr.settingsFlags[r]);return Jr.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=J.getTypeFromStatusTypeString(r.type);t[e]=new tt((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),he({},Jr)},Ge=r=>(Jr=he(he({},Jr),r),Q());var Dn=(r,e)=>(Jr.generalSettings[r]=e,Q()),K_=r=>{var e;return(e=Jr.features[r])!=null?e:!1};function Bs(){return Ar[Q().taskFormat]}function gf(){return{source:Q().globalQuery}}var Se=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==J.EMPTY.symbol)}static getInstance(){return Se.instance||(Se.instance=new Se),Se.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof J?this._registeredStatuses.push(e):this._registeredStatuses.push(new J(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):J.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):J.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:J.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return J.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:J.createUnknownStatus(e.nextStatusSymbol)}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new Se,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=Se.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i}static copyStatusWithNewName(e,t){let n=new tt(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new J(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[J.makeTodo(),J.makeInProgress(),J.makeDone(),J.makeCancelled()].forEach(t=>{this.add(t)})}};var rr=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=window.moment().startOf("day"),i=Math.round(n.diff(e.dueDate)/rr.milliSecondsPerDay),s;i>=7?s=1:i>=-14?s=(i+14)*.8/21+.2:s=.2,t+=s*rr.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*rr.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*rr.startedCoefficient),e.priority){case"0":t+=1.5*rr.priorityCoefficient;break;case"1":t+=1*rr.priorityCoefficient;break;case"2":t+=.65*rr.priorityCoefficient;break;case"3":t+=.325*rr.priorityCoefficient;break;case"5":t-=.3*rr.priorityCoefficient;break}return t}},Pr=rr;Pr.dueCoefficient=12,Pr.scheduledCoefficient=5,Pr.startedCoefficient=-3,Pr.priorityCoefficient=6,Pr.milliSecondsPerDay=1e3*60*60*24;var iT=require("obsidian");var Ks=require("obsidian");var yx=require("obsidian"),Z_=Fi(X_());var yf=class extends Z_.EventEmitter2{constructor(){super(...arguments);this.options={minLevels:{"":"info",tasks:"info"}};this.consoleLoggerRegistered=!1;this.arrAvg=t=>t.reduce((n,i)=>n+i,0)/t.length}configure(t){return this.options=Object.assign({},this.options,t),this}getLogger(t){let n="none",i="";for(let s in this.options.minLevels)t.startsWith(s)&&s.length>=i.length&&(n=this.options.minLevels[s],i=s);return new _f(this,t,n)}onLogEntry(t){return this.on("log",t),this}registerConsoleLogger(){return this.consoleLoggerRegistered?this:(this.onLogEntry(t=>{let n=`[${window.moment().format("YYYY-MM-DD-HH:mm:ss.SSS")}][${t.level}][${t.module}]`;switch(t.traceId&&(n+=`[${t.traceId}]`),n+=` ${t.message}`,t.objects===void 0&&(t.objects=""),t.level){case"trace":console.trace(n,t.objects);break;case"debug":console.debug(n,t.objects);break;case"info":console.info(n,t.objects);break;case"warn":console.warn(n,t.objects);break;case"error":console.error(n,t.objects);break;default:console.log(`{${t.level}} ${n}`,t.objects)}}),this.consoleLoggerRegistered=!0,this)}},_o=new yf,_f=class{constructor(e,t,n){this.levels={trace:1,debug:2,info:3,warn:4,error:5};this.logManager=e,this.module=t,this.minLevel=this.levelToInt(n)}levelToInt(e){return e.toLowerCase()in this.levels?this.levels[e.toLowerCase()]:99}log(e,t,n){if(this.levelToInt(e)<this.minLevel)return;let s={level:e,module:this.module,message:t,objects:n,traceId:void 0};this.logManager.emit("log",s)}trace(e,t){this.log("trace",e,t)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}logWithId(e,t,n,i){if(this.levelToInt(e)<this.minLevel)return;let a={level:e,module:this.module,message:n,objects:i,traceId:t};this.logManager.emit("log",a)}traceWithId(e,t,n){this.logWithId("trace",e,t,n)}debugWithId(e,t,n){this.logWithId("debug",e,t,n)}infoWithId(e,t,n){this.logWithId("info",e,t,n)}warnWithId(e,t,n){this.logWithId("warn",e,t,n)}errorWithId(e,t,n){this.logWithId("error",e,t,n)}};var Hs,Tf,bf,_x=["md"],zs=_o.getLogger("tasks"),J_=({metadataCache:r,vault:e,workspace:t})=>{Hs=r,Tf=e,bf=t},vo=t=>F(void 0,[t],function*({originalTask:r,newTasks:e}){if(Tf===void 0||Hs===void 0||bf===void 0){To("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),zs.debug(`replaceTaskWithTasks entered. ${r.path}`),tT({originalTask:r,newTasks:e,vault:Tf,metadataCache:Hs,workspace:bf,previousTries:0})});function To(r){console.error(r),new Ks.Notice(r,15e3)}function eT(r){console.warn(r),new Ks.Notice(r,1e4)}function Tx(r){zs.debug(r)}var en=class extends Error{},bo=class extends Error{},tT=a=>F(void 0,[a],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s}){zs.debug(`tryRepetitive after ${s} previous tries`);let o=()=>{if(s>10){let l=`Tasks: Could not find the correct task line to update.

The task line not updated is:
${r.originalMarkdown}

In this markdown file:
"${r.taskLocation.path}"

Note: further clicks on this checkbox will usually now be ignored until the file is opened (or certain, specific edits are made - it's complicated).

Recommendations:

1. Close all panes that have the above file open, and then re-open the file.

2. Check for exactly identical copies of the task line, in this file, and see if you can make them different.
`;To(l);return}let u=Math.min(Math.pow(10,s),100);zs.debug(`timeout = ${u}`),setTimeout(()=>{tT({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s+1})},u)};try{let[u,l,c]=yield rT(r,t),p=[...c.slice(0,u),...e.map(m=>m.toFileLineString()),...c.slice(u+1)];yield t.modify(l,p.join(`
`))}catch(u){if(u instanceof en)return u.message&&eT(u.message),o();if(u instanceof bo)return o();u instanceof Error&&To(u.message)}});function rT(r,e){return F(this,null,function*(){if(Hs===void 0)throw new en;let t=e.getAbstractFileByPath(r.path);if(!(t instanceof Ks.TFile))throw new en(`Tasks: No file found for task ${r.description}. Retrying ...`);if(!_x.includes(t.extension))throw new Error(`Tasks: Does not support files with the ${t.extension} file extension.`);let n=Hs.getFileCache(t);if(n==null||n===null)throw new en(`Tasks: No file cache found for file ${t.path}. Retrying ...`);let i=n.listItems;if(i===void 0||i.length===0)throw new en(`Tasks: No list items found in file cache of ${t.path}. Retrying ...`);let a=(yield e.read(t)).split(`
`),o=bx(r,a,i,Tx);if(o===void 0)throw new bo;return[o,t,a]})}function vf(r,e){return F(this,null,function*(){try{let[t,n,i]=yield rT(r,e);return[t,n]}catch(t){t instanceof en?t.message&&eT(t.message):t instanceof Error&&To(t.message)}})}function nT(r,e){return r<e.length}function bx(r,e,t,n){let i=vx(r,e);return i!==void 0||(i=Ex(r,e),i!==void 0)?i:wx(r,e,t,n)}function vx(r,e){let t=r.taskLocation.lineNumber;if(nT(t,e)&&e[t]===r.originalMarkdown)return zs.debug(`Found original markdown at original line number ${t}`),t}function Ex(r,e){let t=[];for(let n=0;n<e.length;n++)e[n]===r.originalMarkdown&&t.push(n);if(t.length===1)return t[0]}function wx(r,e,t,n){let i,s=0;for(let a of t){let o=a.position.start.line;if(!nT(o,e))return;if(o<r.taskLocation.sectionStart||a.task===void 0)continue;let u=e[o];if(we.includedIn(u)){if(s===r.taskLocation.sectionIndex){if(u===r.originalMarkdown)i=o;else{n(`Tasks: Unable to find task in file ${r.taskLocation.path}.
Expected task:
${r.originalMarkdown}
Found task:
${u}`);return}break}s++}}return i}var mr=class{static priorityNameUsingNone(e){let t="ERROR";switch(e){case"1":t="High";break;case"0":t="Highest";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break;case"5":t="Lowest";break}return t}static priorityNameUsingNormal(e){return mr.priorityNameUsingNone(e).replace("None","Normal")}};var tn={description:"task-description",priority:"task-priority",dueDate:"task-due",startDate:"task-start",createdDate:"task-created",scheduledDate:"task-scheduled",doneDate:"task-done",recurrenceRule:"task-recurring",blockLink:""},kx=7,Ox="far";function Dx(r,e,t,n){return F(this,null,function*(){if(!n)throw new Error("Must call the Obsidian renderer with an Obsidian Component object");yield iT.MarkdownRenderer.renderMarkdown(r,e,t,n)})}function sT(r,e,t=null){return F(this,null,function*(){var o;t||(t=Dx);let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text");let s=yield Sx(r,e,i,t);for(let u in s)n.dataset[u]=s[u];let a=document.createElement("input");return n.appendChild(a),a.classList.add("task-list-item-checkbox"),a.type="checkbox",r.status.symbol!==" "&&(a.checked=!0,n.classList.add("is-checked")),a.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),a.disabled=!0;let l=r.toggleWithRecurrenceInUsersOrder();vo({originalTask:r,newTasks:l})}),n.prepend(a),n.setAttribute("data-task",r.status.symbol.trim()),n.setAttribute("data-line",e.listIndex.toString()),n.setAttribute("data-task-status-name",r.status.name),n.setAttribute("data-task-status-type",r.status.type),a.setAttribute("data-line",e.listIndex.toString()),(o=e.layoutOptions)!=null&&o.shortMode&&Px({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function Sx(r,e,t,n){return F(this,null,function*(){let i={},s=new Zr(e.layoutOptions),a=Ar.tasksPluginEmoji.taskSerializer;for(let o of s.layoutComponents){let u=a.componentToString(r,s,o);if(u){o==="description"&&(u=we.removeAsWordFromDependingOnSettings(u));let l=document.createElement("span");if(t.appendChild(l),l){let c=document.createElement("span");l.appendChild(c),yield Rx(c,u,o,r,n,e.obsidianComponent);let[p,m]=Ef(o,r);Mx(o,c),l.classList.add(...p);for(let T in m)l.dataset[T]=m[T];i=he(he({},i),m)}}}for(let o of s.hiddenComponents){let[u,l]=Ef(o,r);i=he(he({},i),l)}if(i.taskPriority===void 0){let[o,u]=Ef("priority",r);i=he(he({},i),u)}return i})}function Rx(r,e,t,n,i,s){return F(this,null,function*(){if(t==="description"){let{debugSettings:a}=Q();a.showTaskHiddenData&&(e+=`<br>\u{1F41B} <b>${n.lineNumber}</b> . ${n.sectionStart} . ${n.sectionIndex} . '<code>${n.originalMarkdown}</code>'<br>'<code>${n.path}</code>' > '<code>${n.precedingHeader}</code>'<br>`),yield i(e,r,n.path,s);let o=r.querySelector("blockquote"),u=o!=null?o:r,l=u.querySelector("p");if(l!==null){for(;l.firstChild;)u.insertBefore(l.firstChild,l);l.remove()}r.querySelectorAll("p").forEach(c=>{c.hasChildNodes()||c.remove()}),r.querySelectorAll(".footnotes").forEach(c=>{c.remove()})}else r.innerHTML=e})}function Ef(r,e){let t=[],n={};function i(s,a,o){if(s){t.push(a);let u=xx(s);u&&(n[o]=u)}}switch(r){case"description":t.push(tn.description);break;case"priority":{n.taskPriority=mr.priorityNameUsingNormal(e.priority).toLocaleLowerCase(),t.push(tn.priority);break}case"createdDate":{i(e.createdDate,tn.createdDate,"taskCreated");break}case"dueDate":{i(e.dueDate,tn.dueDate,"taskDue");break}case"startDate":{i(e.startDate,tn.startDate,"taskStart");break}case"scheduledDate":{i(e.scheduledDate,tn.scheduledDate,"taskScheduled");break}case"doneDate":{i(e.doneDate,tn.doneDate,"taskDone");break}case"recurrenceRule":{t.push(tn.recurrenceRule);break}}return[t,n]}function Mx(r,e){if(r==="description"){let t=e.getElementsByClassName("tag");for(let n=0;n<t.length;n++){let i=t[n].textContent;if(i){let s=Ax(i),a=t[n];s&&(a.dataset.tagName=s)}}}}function xx(r){let e=window.moment().startOf("day"),t="",n=e.diff(r,"days");return isNaN(n)?null:n===0?"today":(n>0?t+="past-":n<0&&(t+="future-"),Math.abs(n)<=kx?t+=Math.abs(n).toString()+"d":t+=Ox,t)}function Ax(r){let e=/["&\x00\r\n]/g,t=r.replace(e,"-");return t=t.replace(/^[-_]+/,""),t.length>0?t:null}function Px({task:r,element:e,isFilenameUnique:t}){let{recurrenceSymbol:n,startDateSymbol:i,createdDateSymbol:s,scheduledDateSymbol:a,dueDateSymbol:o,doneDateSymbol:u}=Ar.tasksPluginEmoji.taskSerializer.symbols;e.addEventListener("mouseenter",()=>{let l=e.createDiv();l.addClasses(["tooltip","pop-up"]),r.recurrence&&l.createDiv().setText(`${n} ${r.recurrence.toText()}`),Vs(l,r.createdDate,s),Vs(l,r.startDate,i),Vs(l,r.scheduledDate,a),Vs(l,r.dueDate,o),Vs(l,r.doneDate,u);let c=r.getLinkText({isFilenameUnique:t});c&&l.createDiv().setText(`\u{1F517} ${c}`),e.addEventListener("mouseleave",()=>{l.remove()})})}function Vs(r,e,t){e&&r.createDiv().setText(Cx({signifier:t,date:e}))}function Cx({signifier:r,date:e}){return`${r} ${e.format(H.dateFormat)} (${e.from(window.moment().startOf("day"))})`}var kt=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=Q();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new Te(Dt(he({},e),{taskLocation:e.taskLocation.fromRenamedFile(t),scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new Te(Dt(he({},i),{scheduledDateIsInferred:!1}))),i))}};var _t=class{constructor(e){this._date=null;this._date=e}get moment(){return this._date}formatAsDate(e=""){return this.format(H.dateFormat,e)}formatAsDateAndTime(e=""){return this.format(H.dateTimeFormat,e)}format(e,t=""){return this._date?this._date.format(e):t}toISOString(e){return this._date?this._date.toISOString(e):""}};var Eo=class{constructor(e){this._path=e}get path(){return this._path}get root(){let e=this.path.replace(/\\/g,"/");e.charAt(0)==="/"&&(e=e.substring(1));let t=e.indexOf("/");return t==-1?"/":e.substring(0,t+1)}get folder(){let e=this.path,t=this.filename,n=e.substring(0,e.lastIndexOf(t));return n===""?"/":n}get filename(){let e=this.path.match(/([^/]+)$/);return e!==null?e[1]:""}};var Ct=class{},H=Ct;H.dateFormat="YYYY-MM-DD",H.dateTimeFormat="YYYY-MM-DD HH:mm",H.indentationRegex=/^([\s\t>]*)/,H.listMarkerRegex=/([-*]|[0-9]+\.)/,H.checkboxRegex=/\[(.)\]/u,H.afterCheckboxRegex=/ *(.*)/u,H.taskRegex=new RegExp(Ct.indentationRegex.source+Ct.listMarkerRegex.source+" +"+Ct.checkboxRegex.source+Ct.afterCheckboxRegex.source,"u"),H.nonTaskRegex=new RegExp(Ct.indentationRegex.source+Ct.listMarkerRegex.source+"? *("+Ct.checkboxRegex.source+")?"+Ct.afterCheckboxRegex.source,"u"),H.listItemRegex=new RegExp(Ct.indentationRegex.source+Ct.listMarkerRegex.source),H.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,H.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,H.hashTagsFromEnd=new RegExp(Ct.hashTags.source+"$");var Te=class{constructor({status:e,description:t,taskLocation:n,indentation:i,listMarker:s,priority:a,createdDate:o,startDate:u,scheduledDate:l,dueDate:c,doneDate:p,recurrence:m,blockLink:T,tags:y,originalMarkdown:E,scheduledDateIsInferred:M}){this._urgency=null;this.status=e,this.description=t,this.indentation=i,this.listMarker=s,this.taskLocation=n,this.tags=y,this.priority=a,this.createdDate=o,this.startDate=u,this.scheduledDate=l,this.dueDate=c,this.doneDate=p,this.recurrence=m,this.blockLink=T,this.originalMarkdown=E,this.scheduledDateIsInferred=M}static fromLine({line:e,taskLocation:t,fallbackDate:n}){let i=Te.extractTaskComponents(e);return i===null||!we.includedIn(i.body)?null:Te.parseTaskSignifiers(e,t,n)}static parseTaskSignifiers(e,t,n){let i=Te.extractTaskComponents(e);if(i===null)return null;let{taskSerializer:s}=Bs(),a=s.deserialize(i.body),o=!1;return kt.canApplyFallback(a)&&n!==null&&(a.scheduledDate=n,o=!0),a.tags=a.tags.map(u=>u.trim()),a.tags=a.tags.filter(u=>!we.equals(u)),new Te(Dt(he(he({},i),a),{taskLocation:t,originalMarkdown:e,scheduledDateIsInferred:o}))}static extractTaskComponents(e){let t=e.match(H.taskRegex);if(t===null)return null;let n=t[1],i=t[2],s=t[3],a=Se.getInstance().bySymbolOrCreate(s),o=t[4].trim(),u=o.match(H.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(H.blockLinkRegex,"").trim()),{indentation:n,listMarker:i,status:a,body:o,blockLink:l}}toLi(e){return F(this,null,function*(){return sT(this,e)})}toString(){return Bs().taskSerializer.serialize(this)}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let e=Se.getInstance().getNextStatusOrCreate(this.status),t=null,n=null;if(e.isCompleted()){let{setDoneDate:a}=Q();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new Te(Dt(he({},this),{status:e,doneDate:t})),s=[];if(n!==null){let{setCreatedDate:a}=Q(),o=null;a&&(o=window.moment());let u=Se.getInstance().getNextStatusOrCreate(e),l=new Te(Dt(he(he({},this),n),{status:u,blockLink:"",createdDate:o}));s.push(l)}return s.push(i),s}toggleWithRecurrenceInUsersOrder(){let e=this.toggle(),{recurrenceOnNextLine:t}=Q();return t?e.reverse():e}get isDone(){return this.status.type==="DONE"||this.status.type==="CANCELLED"||this.status.type==="NON_TASK"}get priorityNumber(){return Number.parseInt(this.priority)}get priorityName(){return mr.priorityNameUsingNormal(this.priority)}get urgency(){return this._urgency===null&&(this._urgency=Pr.calculate(this)),this._urgency}get path(){return this.taskLocation.path}get created(){return new _t(this.createdDate)}get done(){return new _t(this.doneDate)}get due(){return new _t(this.dueDate)}get scheduled(){return new _t(this.scheduledDate)}get start(){return new _t(this.startDate)}get happensDates(){return Array.of(this.startDate,this.scheduledDate,this.dueDate)}get happens(){let t=this.happensDates.sort(xr);return new _t(t[0])}get isRecurring(){return this.recurrence!==null}get recurrenceRule(){return this.recurrence?this.recurrence.toText():""}get heading(){return this.precedingHeader}get hasHeading(){return this.precedingHeader!==null}get file(){return new Eo(this.path)}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}get lineNumber(){return this.taskLocation.lineNumber}get sectionStart(){return this.taskLocation.sectionStart}get sectionIndex(){return this.taskLocation.sectionIndex}get precedingHeader(){return this.taskLocation.precedingHeader}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["description","path","indentation","listMarker","lineNumber","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(!this.status.identicalTo(e.status)||this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["createdDate","startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(xr(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}static extractHashtags(e){var t,n;return(n=(t=e.match(H.hashTags))==null?void 0:t.map(i=>i.trim()))!=null?n:[]}};var Qs=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var ot=class{constructor(e,t,n,i,s){this._path=e,this._lineNumber=t,this._sectionStart=n,this._sectionIndex=i,this._precedingHeader=s}static fromUnknownPosition(e){return new ot(e,0,0,0,null)}fromRenamedFile(e){return new ot(e,this.lineNumber,this.sectionStart,this.sectionIndex,this.precedingHeader)}get path(){return this._path}get lineNumber(){return this._lineNumber}get sectionStart(){return this._sectionStart}get sectionIndex(){return this._sectionIndex}get precedingHeader(){return this._precedingHeader}};var Sn=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new ma,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>F(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=Q(),t=this.vault.on("create",s=>{s instanceof ci.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof ci.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof ci.TFile&&this.tasksMutex.runExclusive(()=>{let o=new Qs(()=>kt.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?kt.updateTaskPath(u,s.path,o.value):new Te(Dt(he({},u),{taskLocation:u.taskLocation.fromRenamedFile(s.path)})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>F(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return F(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}Te.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=a.length,u=new Qs(()=>kt.fromPath(i.path)),l=null,c=0;for(let p of t)if(p.task!==void 0){let m=p.position.start.line;if(m>=o)return console.log(`${i.path} Obsidian gave us a line number ${m} past the end of the file. ${o}.`),s;if((l===null||l.position.end.line<m)&&(l=Sn.getSection(m,n.sections),c=0),l===null)continue;let T=a[m];if(T===void 0){console.log(`${i.path}: line ${m} - ignoring 'undefined' line.`);continue}let y;try{y=Te.fromLine({line:T,taskLocation:new ot(i.path,m,l.position.start.line,c,Sn.getPrecedingHeader(m,n.headings)),fallbackDate:u.value})}catch(E){this.reportTaskParsingErrorToUser(E,i,p,T);continue}y!==null&&(c++,s.push(y))}return s}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;console.error(s),e instanceof Error&&console.error(e.stack),this.state==="Initializing"&&new ci.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Cf=require("obsidian");var kT=require("obsidian");function Cr(){}function Of(r){return r()}function oT(){return Object.create(null)}function Mn(r){r.forEach(Of)}function wo(r){return typeof r=="function"}function lT(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function cT(r){return Object.keys(r).length===0}var dT=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,Zs=class{constructor(e){this.options=e,this._listeners="WeakMap"in dT?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(t=>{var n;for(let i of t)Zs.entries.set(i.target,i),(n=this._listeners.get(i.target))===null||n===void 0||n(i)})}};Zs.entries="WeakMap"in dT?new WeakMap:void 0;var fT=!1;function Nx(){fT=!0}function Ix(){fT=!1}function R(r,e){r.appendChild(e)}function mi(r,e,t){r.insertBefore(e,t||null)}function xn(r){r.parentNode&&r.parentNode.removeChild(r)}function Df(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function K(r){return document.createElement(r)}function Fx(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function dt(r){return document.createTextNode(r)}function fe(){return dt(" ")}function Tt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function pT(r){return function(e){return e.preventDefault(),r.call(this,e)}}function N(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function mT(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function Lx(r){return Array.from(r.childNodes)}function Sf(r,e){e=""+e,r.data!==e&&(r.data=e)}function nr(r,e){r.value=e==null?"":e}function Rf(r,e,t){for(let n=0;n<r.options.length;n+=1){let i=r.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function hT(r){let e=r.querySelector(":checked");return e&&e.__value}function ir(r,e,t){r.classList[t?"add":"remove"](e)}var Rn=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Fx(t.nodeName):this.e=K(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)mi(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(xn)}};var Js;function Xs(r){Js=r}function Ux(){if(!Js)throw new Error("Function called outside component initialization");return Js}function Mf(r){Ux().$$.on_mount.push(r)}var fi=[];var ko=[],pi=[],uT=[],Wx=Promise.resolve(),kf=!1;function qx(){kf||(kf=!0,Wx.then(gT))}function ea(r){pi.push(r)}var wf=new Set,di=0;function gT(){if(di!==0)return;let r=Js;do{try{for(;di<fi.length;){let e=fi[di];di++,Xs(e),Yx(e.$$)}}catch(e){throw fi.length=0,di=0,e}for(Xs(null),fi.length=0,di=0;ko.length;)ko.pop()();for(let e=0;e<pi.length;e+=1){let t=pi[e];wf.has(t)||(wf.add(t),t())}pi.length=0}while(fi.length);for(;uT.length;)uT.pop()();kf=!1,wf.clear(),Xs(r)}function Yx(r){if(r.fragment!==null){r.update(),Mn(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(ea)}}function $x(r){let e=[],t=[];pi.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),pi=e}var jx=new Set;function Gx(r,e){r&&r.i&&(jx.delete(r),r.i(e))}var Bx=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],O2=new Set([...Bx]);function Hx(r,e,t,n){let{fragment:i,after_update:s}=r.$$;i&&i.m(e,t),n||ea(()=>{let a=r.$$.on_mount.map(Of).filter(wo);r.$$.on_destroy?r.$$.on_destroy.push(...a):Mn(a),r.$$.on_mount=[]}),s.forEach(ea)}function yT(r,e){let t=r.$$;t.fragment!==null&&($x(t.after_update),Mn(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function zx(r,e){r.$$.dirty[0]===-1&&(fi.push(r),qx(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function _T(r,e,t,n,i,s,a,o=[-1]){let u=Js;Xs(r);let l=r.$$={fragment:null,ctx:[],props:s,update:Cr,not_equal:i,bound:oT(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:oT(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(p,m,...T)=>{let y=T.length?T[0]:m;return l.ctx&&i(l.ctx[p],l.ctx[p]=y)&&(!l.skip_bound&&l.bound[p]&&l.bound[p](y),c&&zx(r,p)),m}):[],l.update(),c=!0,Mn(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){Nx();let p=Lx(e.target);l.fragment&&l.fragment.l(p),p.forEach(xn)}else l.fragment&&l.fragment.c();e.intro&&Gx(r.$$.fragment),Hx(r,e.target,e.anchor,e.customElement),Ix(),gT()}Xs(u)}var Kx;typeof HTMLElement=="function"&&(Kx=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Of).filter(wo);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Mn(this.$$.on_disconnect)}$destroy(){yT(this,1),this.$destroy=Cr}$on(r,e){if(!wo(e))return Cr;let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!cT(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Oo=class{$destroy(){yT(this,1),this.$destroy=Cr}$on(e,t){if(!wo(t))return Cr;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!cT(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Af=Fi(Be());function TT(r,e,t){let n=r.slice();return n[45]=e[t],n}function bT(r,e,t){let n=r.slice();return n[48]=e[t].value,n[49]=e[t].label,n[50]=e[t].symbol,n[51]=e[t].accessKey,n[52]=e[t].accessKeyIndex,n}function Vx(r){let e,t=r[50]+"",n;return{c(){e=K("span"),n=dt(t)},m(i,s){mi(i,e,s),R(e,n)},p:Cr,d(i){i&&xn(e)}}}function vT(r){let e,t,n,i,s,a,o,u,l=r[49].substring(0,r[52])+"",c,p,m=r[49].substring(r[52],r[52]+1)+"",T,y,E=r[49].substring(r[52]+1)+"",M,U,q=r[50]&&r[50].charCodeAt(0)>=256,W,ie,te,ve,G,V=q&&Vx(r);return te=mT(r[33][0]),{c(){e=K("span"),t=K("input"),a=fe(),o=K("label"),u=K("span"),c=dt(l),p=K("span"),T=dt(m),y=K("span"),M=dt(E),U=fe(),V&&V.c(),ie=fe(),N(t,"type","radio"),N(t,"id",n="priority-"+r[48]),t.__value=i=r[48],t.value=t.__value,N(t,"accesskey",s=r[15](r[51])),N(p,"class","accesskey"),N(o,"for",W="priority-"+r[48]),te.p(t)},m(Ce,Fe){mi(Ce,e,Fe),R(e,t),t.checked=t.__value===r[1].priority,R(e,a),R(e,o),R(o,u),R(u,c),R(o,p),R(p,T),R(o,y),R(y,M),R(o,U),V&&V.m(o,null),R(e,ie),ve||(G=Tt(t,"change",r[32]),ve=!0)},p(Ce,Fe){Fe[0]&32768&&s!==(s=Ce[15](Ce[51]))&&N(t,"accesskey",s),Fe[0]&3&&(t.checked=t.__value===Ce[1].priority),q&&V.p(Ce,Fe)},d(Ce){Ce&&xn(e),V&&V.d(),te.r(),ve=!1,G()}}}function ET(r){let e,t=r[45].name+"",n,i,s=r[45].symbol+"",a,o,u;return{c(){e=K("option"),n=dt(t),i=dt(" ["),a=dt(s),o=dt("]"),e.__value=u=r[45],e.value=e.__value},m(l,c){mi(l,e,c),R(e,n),R(e,i),R(e,a),R(e,o)},p(l,c){c[0]&1&&t!==(t=l[45].name+"")&&Sf(n,t),c[0]&1&&s!==(s=l[45].symbol+"")&&Sf(a,s),c[0]&1&&u!==(u=l[45])&&(e.__value=u,e.value=e.__value)},d(l){l&&xn(e)}}}function Qx(r){let e,t,n,i,s,a,o,u,l,c,p,m,T,y,E,M,U,q,W,ie,te,ve,G,V,Ce,Fe,j,A,w,B,P,X,d,f,h,g,_,v,k,S,O,D,C,me,ae,ee,De,I,xe,Pe,rt,_r,We,Le,Qf,Mi,sa,Xf,ar,aa,Zf,Wn,oa,Jf,Lt,ua,ep,qr,xi,la,tp,Yr,ca,rp,Ai,cu,np,da,ip,Pi,du,sp,fa,ap,qn,ln,op,pa,up,Ci,fu,lp,Yn=r[20],pt=[];for(let $=0;$<Yn.length;$+=1)pt[$]=vT(bT(r,Yn,$));let $n=r[0],mt=[];for(let $=0;$<$n.length;$+=1)mt[$]=ET(TT(r,$n,$));return{c(){e=K("div"),t=K("form"),n=K("div"),i=K("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=fe(),a=K("textarea"),u=fe(),l=K("div"),c=K("label"),p=dt("Priority"),T=fe();for(let $=0;$<pt.length;$+=1)pt[$].c();y=fe(),E=K("div"),M=K("label"),M.textContent="Recurs",U=fe(),q=K("input"),ie=fe(),te=K("code"),ve=dt(r[16]),G=fe(),V=new Rn(!1),Ce=fe(),Fe=K("label"),Fe.textContent="Due",j=fe(),A=K("input"),B=fe(),P=K("code"),X=dt(r[19]),d=fe(),f=new Rn(!1),h=fe(),g=K("label"),g.textContent="Scheduled",_=fe(),v=K("input"),S=fe(),O=K("code"),D=dt(r[18]),C=fe(),me=new Rn(!1),ae=fe(),ee=K("label"),ee.innerHTML='St<span class="accesskey">a</span>rt',De=fe(),I=K("input"),Pe=fe(),rt=K("code"),_r=dt(r[17]),We=fe(),Le=new Rn(!1),Qf=fe(),Mi=K("div"),sa=K("label"),sa.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,Xf=fe(),ar=K("input"),Zf=fe(),Wn=K("div"),oa=K("label"),oa.innerHTML='Stat<span class="accesskey">u</span>s',Jf=fe(),Lt=K("select");for(let $=0;$<mt.length;$+=1)mt[$].c();ep=fe(),qr=K("div"),xi=K("div"),la=K("label"),la.textContent="Completed:",tp=fe(),Yr=K("input"),rp=fe(),Ai=K("div"),cu=K("span"),cu.textContent="Created on:",np=fe(),da=K("code"),ip=fe(),Pi=K("div"),du=K("span"),du.textContent="Done on:",sp=fe(),fa=K("code"),ap=fe(),qn=K("div"),ln=K("button"),op=dt("Apply"),up=fe(),Ci=K("button"),Ci.textContent="Cancel",N(i,"for","description"),N(a,"id","description"),N(a,"type","text"),N(a,"class","tasks-modal-description"),N(a,"placeholder","Take out the trash"),N(a,"accesskey",o=r[15]("t")),N(n,"class","tasks-modal-section"),N(c,"for",m="priority-"+r[1].priority),N(l,"class","tasks-modal-section tasks-modal-priorities"),N(M,"for","recurrence"),N(M,"class","accesskey-first"),N(q,"id","recurrence"),N(q,"type","text"),N(q,"placeholder","Try 'every 2 weeks on Thursday'."),N(q,"accesskey",W=r[15]("r")),ir(q,"tasks-modal-error",!r[8]),V.a=null,N(Fe,"for","due"),N(Fe,"class","accesskey-first"),N(A,"id","due"),N(A,"type","text"),N(A,"placeholder",xf),N(A,"accesskey",w=r[15]("d")),ir(A,"tasks-modal-error",!r[7]),f.a=null,N(g,"for","scheduled"),N(g,"class","accesskey-first"),N(v,"id","scheduled"),N(v,"type","text"),N(v,"placeholder",xf),N(v,"accesskey",k=r[15]("s")),ir(v,"tasks-modal-error",!r[5]),me.a=null,N(ee,"for","start"),N(I,"id","start"),N(I,"type","text"),N(I,"placeholder",xf),N(I,"accesskey",xe=r[15]("a")),ir(I,"tasks-modal-error",!r[3]),Le.a=null,N(sa,"for","forwardOnly"),N(ar,"id","forwardOnly"),N(ar,"type","checkbox"),N(ar,"class","task-list-item-checkbox tasks-modal-checkbox"),N(ar,"accesskey",aa=r[15]("f")),N(E,"class","tasks-modal-section tasks-modal-dates"),N(oa,"for","status"),N(Lt,"id","status-type"),N(Lt,"class","dropdown"),N(Lt,"accesskey",ua=r[15]("u")),r[1].status===void 0&&ea(()=>r[39].call(Lt)),N(Wn,"class","tasks-modal-section"),N(la,"for","status"),N(Yr,"id","status"),N(Yr,"type","checkbox"),N(Yr,"class","task-list-item-checkbox tasks-modal-checkbox"),Yr.checked=ca=r[1].status.isCompleted(),Yr.disabled=!0,N(qr,"class","tasks-modal-section tasks-modal-status"),ln.disabled=pa=!r[14],N(ln,"type","submit"),N(ln,"class","mod-cta"),N(Ci,"type","button"),N(qn,"class","tasks-modal-section tasks-modal-buttons"),ir(t,"with-accesskeys",r[9]),N(e,"class","tasks-modal")},m($,pe){mi($,e,pe),R(e,t),R(t,n),R(n,i),R(n,s),R(n,a),nr(a,r[1].description),r[31](a),R(t,u),R(t,l),R(l,c),R(c,p),R(l,T);for(let ce=0;ce<pt.length;ce+=1)pt[ce]&&pt[ce].m(l,null);R(t,y),R(t,E),R(E,M),R(E,U),R(E,q),nr(q,r[1].recurrenceRule),R(E,ie),R(E,te),R(te,ve),R(te,G),V.m(r[12],te),R(E,Ce),R(E,Fe),R(E,j),R(E,A),nr(A,r[1].dueDate),R(E,B),R(E,P),R(P,X),R(P,d),f.m(r[6],P),R(E,h),R(E,g),R(E,_),R(E,v),nr(v,r[1].scheduledDate),R(E,S),R(E,O),R(O,D),R(O,C),me.m(r[4],O),R(E,ae),R(E,ee),R(E,De),R(E,I),nr(I,r[1].startDate),R(E,Pe),R(E,rt),R(rt,_r),R(rt,We),Le.m(r[2],rt),R(E,Qf),R(E,Mi),R(Mi,sa),R(Mi,Xf),R(Mi,ar),ar.checked=r[1].forwardOnly,R(t,Zf),R(t,Wn),R(Wn,oa),R(Wn,Jf),R(Wn,Lt);for(let ce=0;ce<mt.length;ce+=1)mt[ce]&&mt[ce].m(Lt,null);Rf(Lt,r[1].status,!0),R(t,ep),R(t,qr),R(qr,xi),R(xi,la),R(xi,tp),R(xi,Yr),R(qr,rp),R(qr,Ai),R(Ai,cu),R(Ai,np),R(Ai,da),da.innerHTML=r[11],R(qr,ip),R(qr,Pi),R(Pi,du),R(Pi,sp),R(Pi,fa),fa.innerHTML=r[13],R(t,ap),R(t,qn),R(qn,ln),R(ln,op),R(qn,up),R(qn,Ci),fu||(lp=[Tt(a,"input",r[30]),Tt(a,"keydown",r[23]),Tt(a,"paste",r[24]),Tt(a,"drop",r[24]),Tt(l,"keyup",r[21]),Tt(q,"input",r[34]),Tt(A,"input",r[35]),Tt(v,"input",r[36]),Tt(I,"input",r[37]),Tt(ar,"change",r[38]),Tt(Lt,"change",r[39]),Tt(Ci,"click",r[22]),Tt(t,"submit",pT(r[25]))],fu=!0)},p($,pe){if(pe[0]&32768&&o!==(o=$[15]("t"))&&N(a,"accesskey",o),pe[0]&3&&nr(a,$[1].description),pe[0]&3&&m!==(m="priority-"+$[1].priority)&&N(c,"for",m),pe[0]&1081346){Yn=$[20];let ce;for(ce=0;ce<Yn.length;ce+=1){let Ni=bT($,Yn,ce);pt[ce]?pt[ce].p(Ni,pe):(pt[ce]=vT(Ni),pt[ce].c(),pt[ce].m(l,null))}for(;ce<pt.length;ce+=1)pt[ce].d(1);pt.length=Yn.length}if(pe[0]&32768&&W!==(W=$[15]("r"))&&N(q,"accesskey",W),pe[0]&3&&q.value!==$[1].recurrenceRule&&nr(q,$[1].recurrenceRule),pe[0]&256&&ir(q,"tasks-modal-error",!$[8]),pe[0]&4096&&V.p($[12]),pe[0]&32768&&w!==(w=$[15]("d"))&&N(A,"accesskey",w),pe[0]&3&&A.value!==$[1].dueDate&&nr(A,$[1].dueDate),pe[0]&128&&ir(A,"tasks-modal-error",!$[7]),pe[0]&64&&f.p($[6]),pe[0]&32768&&k!==(k=$[15]("s"))&&N(v,"accesskey",k),pe[0]&3&&v.value!==$[1].scheduledDate&&nr(v,$[1].scheduledDate),pe[0]&32&&ir(v,"tasks-modal-error",!$[5]),pe[0]&16&&me.p($[4]),pe[0]&32768&&xe!==(xe=$[15]("a"))&&N(I,"accesskey",xe),pe[0]&3&&I.value!==$[1].startDate&&nr(I,$[1].startDate),pe[0]&8&&ir(I,"tasks-modal-error",!$[3]),pe[0]&4&&Le.p($[2]),pe[0]&32768&&aa!==(aa=$[15]("f"))&&N(ar,"accesskey",aa),pe[0]&3&&(ar.checked=$[1].forwardOnly),pe[0]&1){$n=$[0];let ce;for(ce=0;ce<$n.length;ce+=1){let Ni=TT($,$n,ce);mt[ce]?mt[ce].p(Ni,pe):(mt[ce]=ET(Ni),mt[ce].c(),mt[ce].m(Lt,null))}for(;ce<mt.length;ce+=1)mt[ce].d(1);mt.length=$n.length}pe[0]&32768&&ua!==(ua=$[15]("u"))&&N(Lt,"accesskey",ua),pe[0]&3&&Rf(Lt,$[1].status),pe[0]&3&&ca!==(ca=$[1].status.isCompleted())&&(Yr.checked=ca),pe[0]&2048&&(da.innerHTML=$[11]),pe[0]&8192&&(fa.innerHTML=$[13]),pe[0]&16384&&pa!==(pa=!$[14])&&(ln.disabled=pa),pe[0]&512&&ir(t,"with-accesskeys",$[9])},i:Cr,o:Cr,d($){$&&xn(e),r[31](null),Df(pt,$),Df(mt,$),fu=!1,Mn(lp)}}}var xf="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function Xx(r,e,t){let n;var i;let{task:s}=e,{onSubmit:a}=e,{statusOptions:o}=e,{prioritySymbols:u,recurrenceSymbol:l,startDateSymbol:c,scheduledDateSymbol:p,dueDateSymbol:m}=Ar.tasksPluginEmoji.taskSerializer.symbols,T,y={description:"",status:J.TODO,priority:"none",recurrenceRule:"",createdDate:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},E=!0,M="",U="",q=!0,W="",ie=!0,te="",ve=!0,G="",V=!0,Ce="",Fe=!1,j=!0,A=!0,w=[{value:"lowest",label:"Lowest",symbol:u.Lowest,accessKey:"o",accessKeyIndex:1},{value:"low",label:"Low",symbol:u.Low,accessKey:"l",accessKeyIndex:0},{value:"none",label:"Normal",symbol:u.None,accessKey:"n",accessKeyIndex:0},{value:"medium",label:"Medium",symbol:u.Medium,accessKey:"m",accessKeyIndex:0},{value:"high",label:"High",symbol:u.High,accessKey:"h",accessKeyIndex:0},{value:"highest",label:"Highest",symbol:u.Highest,accessKey:"i",accessKeyIndex:1}];function B(I,xe,Pe=void 0){if(!xe)return`<i>no ${I} date</i>`;let rt=Af.parseDate(xe,Pe,{forwardDate:Pe!=null});return rt!==null?window.moment(rt).format("YYYY-MM-DD"):`<i>invalid ${I} date</i>`}function P(I,xe){return B(I,xe,y.forwardOnly?new Date:void 0)}function X(I){let xe=null,Pe=Af.parseDate(I,new Date,{forwardDate:y.forwardOnly});return Pe!==null&&(xe=window.moment(Pe)),xe}Mf(()=>{let{provideAccessKeys:I}=Q();t(9,j=I);let xe=we.removeAsWordFrom(s.description);(xe!=s.description||!we.includedIn(s.description))&&(Fe=!0);let Pe="none";s.priority==="5"?Pe="lowest":s.priority==="4"?Pe="low":s.priority==="2"?Pe="medium":s.priority==="1"?Pe="high":s.priority==="0"&&(Pe="highest"),t(1,y={description:xe,status:s.status,priority:Pe,recurrenceRule:s.recurrence?s.recurrence.toText():"",createdDate:new _t(s.createdDate).formatAsDate(),startDate:new _t(s.startDate).formatAsDate(),scheduledDate:new _t(s.scheduledDate).formatAsDate(),dueDate:new _t(s.dueDate).formatAsDate(),doneDate:new _t(s.doneDate).formatAsDate(),forwardOnly:!0}),setTimeout(()=>{T.focus()},10)});let d=I=>{if(I.key&&!I.altKey&&!I.ctrlKey){let xe=w.find(Pe=>Pe.label.charAt(0).toLowerCase()==I.key);xe&&t(1,y.priority=xe.value,y)}},f=()=>{a([])},h=I=>{I.key==="Enter"&&(I.preventDefault(),A&&_())},g=()=>{setTimeout(()=>{t(1,y.description=y.description.replace(/[\r\n]+/g," "),y)},0)},_=()=>{let I=y.description.trim();Fe&&(I=we.prependTo(I));let xe=X(y.startDate),Pe=X(y.scheduledDate),rt=X(y.dueDate),_r=null;y.recurrenceRule&&(_r=et.fromText({recurrenceRuleText:y.recurrenceRule,startDate:xe,scheduledDate:Pe,dueDate:rt}));let We;switch(y.priority){case"lowest":We="5";break;case"low":We="4";break;case"medium":We="2";break;case"high":We="1";break;case"highest":We="0";break;default:We="3"}let Le=new Te(Object.assign(Object.assign({},s),{description:I,status:y.status,priority:We,recurrence:_r,startDate:xe,scheduledDate:Pe,dueDate:rt,doneDate:window.moment(y.doneDate,"YYYY-MM-DD").isValid()?window.moment(y.doneDate,"YYYY-MM-DD"):null}));a([Le])},v=[[]];function k(){y.description=this.value,t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}function S(I){ko[I?"unshift":"push"](()=>{T=I,t(10,T)})}function O(){y.priority=this.__value,t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}function D(){y.recurrenceRule=this.value,t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}function C(){y.dueDate=this.value,t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}function me(){y.scheduledDate=this.value,t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}function ae(){y.startDate=this.value,t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}function ee(){y.forwardOnly=this.checked,t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}function De(){y.status=hT(this),t(1,y),t(6,te),t(2,U),t(4,W),t(0,o)}return r.$$set=I=>{"task"in I&&t(26,s=I.task),"onSubmit"in I&&t(27,a=I.onSubmit),"statusOptions"in I&&t(0,o=I.statusOptions)},r.$$.update=()=>{if(r.$$.dirty[0]&512){e:t(15,n=I=>j?I:null)}if(r.$$.dirty[0]&66){e:t(1,y.dueDate=si(y.dueDate),y),t(6,te=P("due",y.dueDate)),t(7,ve=!te.includes("invalid"))}if(r.$$.dirty[0]&6){e:t(1,y.startDate=si(y.startDate),y),t(2,U=P("start",y.startDate)),t(3,q=!U.includes("invalid"))}if(r.$$.dirty[0]&18){e:t(1,y.scheduledDate=si(y.scheduledDate),y),t(4,W=P("scheduled",y.scheduledDate)),t(5,ie=!W.includes("invalid"))}if(r.$$.dirty[0]&268435458){e:if(t(8,V=!0),!y.recurrenceRule)t(12,G="<i>not recurring</>");else{let I=t(28,i=et.fromText({recurrenceRuleText:y.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText();I?t(12,G=I):(t(12,G="<i>invalid recurrence rule</i>"),t(8,V=!1))}}if(r.$$.dirty[0]&2){e:t(29,E=y.description.trim()!=="")}if(r.$$.dirty[0]&536871336){e:t(14,A=ve&&V&&ie&&q&&E)}if(r.$$.dirty[0]&2){e:t(11,M=B("created",y.createdDate)),t(13,Ce=B("done",y.doneDate))}},[o,y,U,q,W,ie,te,ve,V,j,T,M,G,Ce,A,n,l,c,p,m,w,d,f,h,g,_,s,a,i,E,k,S,O,v,D,C,me,ae,ee,De]}var Pf=class extends Oo{constructor(e){super(),_T(this,e,Xx,Qx,lT,{task:26,onSubmit:27,statusOptions:0},null,[-1,-1])}},wT=Pf;var rn=class extends kT.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this,n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new wT({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=Se.getInstance().registeredStatuses;return Se.getInstance().bySymbol(this.task.status.symbol)===J.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};var Do=({line:r,path:e})=>{var T,y;let t=Te.parseTaskSignifiers(r,ot.fromUnknownPosition(e),kt.fromPath(e));if(t!==null)return t;let{setCreatedDate:n}=Q(),i=n?window.moment():null,s=r.match(H.nonTaskRegex);if(s===null)return console.error("Tasks: Cannot create task on line:",r),new Te({status:J.TODO,description:"",taskLocation:ot.fromUnknownPosition(e),indentation:"",listMarker:"-",priority:"3",createdDate:i,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let a=s[1],o=(T=s[2])!=null?T:"-",u=(y=s[4])!=null?y:" ",l=Se.getInstance().bySymbolOrCreate(u),c=s[5],p=r.match(H.blockLinkRegex),m=p!==null?p[0]:"";return m!==""&&(c=c.replace(H.blockLinkRegex,"")),new Te({status:l,description:c,taskLocation:ot.fromUnknownPosition(e),indentation:a,listMarker:o,blockLink:m,priority:"3",createdDate:i,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var OT=(r,e,t,n)=>{var p;if(r)return t instanceof Cf.MarkdownView;if(!(t instanceof Cf.MarkdownView))return;let i=(p=t.file)==null?void 0:p.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=Do({line:o,path:i}),l=m=>{let T=kt.removeInferredStatusIfNeeded(u,m).map(y=>y.toFileLineString()).join(`
`);e.setLine(a,T)};new rn({app:n,task:u,onSubmit:l}).open()};var Nf=require("obsidian");var DT=(r,e,t)=>{var u;if(r)return t instanceof Nf.MarkdownView;if(!(t instanceof Nf.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=Zx(a,n);e.setLine(s,o.text),e.setCursor(Jx(i,o))},Zx=(r,e)=>{let t=Te.fromLine({line:r,taskLocation:ot.fromUnknownPosition(e),fallbackDate:null});if(t!==null){let n=t.toggleWithRecurrenceInUsersOrder().map(i=>i.toFileLineString());return{text:n.join(`
`),moveTo:{line:n.length-1}}}else{let n=r.match(H.taskRegex);if(n!==null){let i=n[3],a=Se.getInstance().bySymbol(i).nextStatusSymbol;return{text:r.replace(H.taskRegex,`$1- [${a}] $4`)}}else if(H.listItemRegex.test(r)){let i=r.replace(H.listItemRegex,"$1$2 [ ]");return{text:i,moveTo:{ch:i.length}}}else{let i=r.replace(H.indentationRegex,"$1- ");return{text:i,moveTo:{ch:i.length}}}}},Jx=(r,e)=>{var s;let t={line:0,ch:r.ch},n=he(he({},t),(s=e.moveTo)!=null?s:{}),i=e.text.split(`
`)[n.line].length;return{line:r.line+n.line,ch:Math.min(n.ch,i)}};var So=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>OT(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:DT})}};var Ro=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var ST=require("obsidian");var Mo=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return F(this,null,function*(){var c;let n=new ST.MarkdownRenderChild(e);t.addChild(n);let i=e.findAll(".task-list-item").filter(p=>{var y;let m=(y=p.textContent)==null?void 0:y.split(`
`);if(m===void 0)return!1;let T=null;for(let E=0;E<m.length;E=E+1)if(m[E]!==""){T=m[E];break}return T===null?!1:we.includedIn(T)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let p=a.lineStart;p<=a.lineEnd;p++){let m=o[p];if(m===void 0)continue;let T=null,y=Te.fromLine({line:m,taskLocation:new ot(s,p,a.lineStart,u,T),fallbackDate:null});y!==null&&(l.push(y),u++)}for(let p=0;p<i.length;p++){let m=l[p],T=i[p];if(m===void 0||T===void 0)continue;let y=(c=T.getAttr("data-line"))!=null?c:"0",E=Number.parseInt(y,10),M=yield m.toLi({parentUlElement:e,listIndex:E,obsidianComponent:n}),U=T.childNodes;for(let ie=0;ie<U.length;ie=ie+1){let te=U[ie];te.nodeName.toLowerCase()==="div"?M.prepend(te):te.nodeName.toLowerCase()==="ul"&&M.append(te)}let q=T.querySelectorAll("[data-footnote-id]"),W=M.querySelectorAll("[data-footnote-id]");if(q.length===W.length)for(let ie=0;ie<q.length;ie++)W[ie].replaceWith(q[ie]);T.replaceWith(M)}})}};var RT=require("@codemirror/view"),MT=require("obsidian");var xT=()=>RT.ViewPlugin.fromClass(If),If=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let m=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(m),new MT.Notice(m,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=Te.fromLine({line:a.text,taskLocation:ot.fromUnknownPosition(""),fallbackDate:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggleWithRecurrenceInUsersOrder().map(m=>m.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let p=t.checked;return setTimeout(()=>{t.checked=p},1),!0}};var Si=require("obsidian");var Nr=class{constructor(e,t,n){this.property=e,this.comparator=Nr.maybeReverse(n,t)}static maybeReverse(e,t){return e?Nr.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};var nn=class{constructor(e,t,n){this.property=e,this.grouper=t,this.reverse=n}};var Oe=class{canCreateFilterForLine(e){return Oe.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return yo(this.fieldNameSingular())}supportsSorting(){return!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=Oe.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new Nr(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}createGrouperFromLine(e){if(!this.supportsGrouping())return null;let t=Oe.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createGrouper(n)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)?$`)}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(e){return new nn(this.fieldNameSingular(),this.grouper(),e)}createNormalGrouper(){return this.createGrouper(!1)}createReverseGrouper(){return this.createGrouper(!0)}};var Ae=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new Ae("None of",e,"NOT")}static booleanXor(e){return new Ae("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e;this.symbol===""?t+=this.description:(t+=this.symbol,this.children.length>1&&(t+=` (${this.description})`),t+=":");let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new Ae(e,t,n)}};var Ot=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}};var sn=class{constructor(e){this.instruction=e}get queryComponent(){return this._queryComponent}set queryComponent(e){this._queryComponent=e}get error(){return this._error}set error(e){this._error=e}static fromObject(e,t){let n=new sn(e);return n._queryComponent=t,n}static fromError(e,t){let n=new sn(e);return n._error=t,n}};var ne=class{constructor(e){this.object=e}get instruction(){return this.object.instruction}get filter(){return this.object.queryComponent}get error(){return this.object.error}get filterFunction(){if(this.filter)return this.filter.filterFunction}static fromFilter(e){return new ne(sn.fromObject(e.instruction,e))}static fromError(e,t){return new ne(sn.fromError(e,t))}};var xo=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){return e===this._instruction?ne.fromFilter(new Ot(e,this._filter,new Ae(e))):ne.fromError(e,`do not understand filter: ${e}`)}};var hr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new xo(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let t of this._filters){let n=t.createFilterOrErrorMessage(e);if(n.error===void 0)return n}return ne.fromError(e,`do not understand filter: ${e}`)}};var an=class extends Oe{constructor(){super(...arguments);this._filters=new hr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var gr=class extends an{constructor(){super(),this._filters.add("done",e=>e.isDone),this._filters.add("not done",e=>!e.isDone)}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=gr.oldStatusName(e),i=gr.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}supportsGrouping(){return!0}grouper(){return e=>[gr.oldStatusName(e)]}};var ft=class extends Oe{constructor(t=null){super();t!==null?this.filterInstructions=t:(this.filterInstructions=new hr,this.filterInstructions.add(`has ${this.fieldName()} date`,n=>this.date(n)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,n=>this.date(n)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,n=>{let i=this.date(n);return i!==null&&!i.isValid()}))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=Oe.getMatch(this.filterRegExp(),t);if(i!==null){let s=i[1],a=i[2],o=i[3],u=xt.parseDateRange(o);if(!u.isValid()){let l=xt.parseDate(s);l.isValid()&&(u=new gt(l,l))}if(u.isValid()){let l=this.buildFilterFunction(a,u),c=ft.buildExplanation(this.fieldNameForExplanation(),a,this.filterResultIfFieldMissing(),u);return ne.fromFilter(new Ot(t,l,c))}else return ne.fromError(t,"do not understand "+this.fieldName()+" date")}else return ne.fromError(t,"do not understand query filter ("+this.fieldName()+" date)")}buildFilterFunction(t,n){let i;return t==="before"?i=s=>s?s.isBefore(n.start):this.filterResultIfFieldMissing():t==="after"?i=s=>s?s.isAfter(n.end):this.filterResultIfFieldMissing():i=s=>s?s.isSameOrAfter(n.start)&&s.isSameOrBefore(n.end):this.filterResultIfFieldMissing(),this.getFilter(i)}getFilter(t){return n=>t(this.date(n))}filterRegExp(){return new RegExp(`^${this.fieldNameForFilterInstruction()} ((before|after|on|in)? ?(.*))`)}fieldNameForFilterInstruction(){return this.fieldName()}static buildExplanation(t,n,i,s){let a,o="YYYY-MM-DD (dddd Do MMMM YYYY)",u;switch(n){case"before":a=n,u=s.start.format(o);break;case"after":a=n,u=s.end.format(o);break;default:if(s.start.isSame(s.end))a="on",u=s.start.format(o);else{let c=`${t} date is between:`,p=[new Ae(`${s.start.format(o)} and`),new Ae(`${s.end.format(o)} inclusive`)];return i&&p.push(new Ae(`OR no ${t} date`)),new Ae(c,p)}break}let l=`${t} date is ${a} ${u}`;return i&&(l+=` OR no ${t} date`),new Ae(l)}fieldNameForExplanation(){return this.fieldName()}supportsSorting(){return!0}comparator(){return(t,n)=>xr(this.date(t),this.date(n))}supportsGrouping(){return!0}grouper(){return t=>{let n=this.date(t);return n===null?["No "+this.fieldName()+" date"]:[n.format("YYYY-MM-DD dddd")]}}};var hi=class extends ft{fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}};var Ff=class extends Oe{createFilterOrErrorMessage(e){let t=Oe.getMatch(this.filterRegExp(),e);if(t!==null){let n=t[5],i=null;switch(n){case"lowest":i="5";break;case"low":i="4";break;case"none":i="3";break;case"medium":i="2";break;case"high":i="1";break;case"highest":i="0";break}if(i===null)return ne.fromError(e,"do not understand priority");let s=e,a;switch(t[3]){case"above":a=o=>o.priority.localeCompare(i)<0;break;case"below":a=o=>o.priority.localeCompare(i)>0;break;case"not":a=o=>o.priority!==i;break;default:a=o=>o.priority===i,s=`${this.fieldName()} is ${n}`}return ne.fromFilter(new Ot(e,a,new Ae(s)))}else return ne.fromError(e,"do not understand query filter (priority)")}fieldName(){return"priority"}filterRegExp(){return Ff.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}supportsGrouping(){return!0}grouper(){return e=>{let t=mr.priorityNameUsingNormal(e.priority);return[`%%${e.priority}%%${t} priority`]}}},An=Ff;An.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(lowest|low|none|medium|high|highest))$/;var gi=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var yi=class extends gi{constructor(t){super();this.stringToFind=t}matches(t){return yi.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var _i=class extends gi{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new _i(s)}else return null}matches(t){return t.match(this.regex)!==null}};var Me=class extends Oe{createFilterOrErrorMessage(e){let t=Oe.getMatch(this.filterRegExp(),e);if(t===null)return ne.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new yi(s);else if(i.includes("regex")&&(a=_i.validateAndConstruct(s),a===null))return ne.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return ne.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new Ot(e,this.getFilter(a,o),new Ae(e));return ne.fromFilter(u)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}};var Ti=class extends Me{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>[Me.escapeMarkdownCharacters(e.path.replace(".md",""))]}};var bi=class extends Oe{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return ne.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}supportsGrouping(){return!0}grouper(){return e=>[`${e.urgency.toFixed(2)}`]}createGrouper(e){return super.createGrouper(!e)}};var vi=class{static by(e,t){let n=[new bi().comparator(),new gr().comparator(),new hi().comparator(),new An().comparator(),new Ti().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(vi.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var Ao=class{constructor(e,t,n){this.nestingLevel=e,this.displayName=t,this.property=n}};var Po=class{constructor(e,t){this.lastHeadingAtLevel=new Array;this.groupers=t;let i=e.keys().next().value.length;for(let s=0;s<i;s++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Ao(n,i,this.groupers[n].property));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Co=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var No=class extends Co{},Io=class{constructor(e,t){this.root=new No(t),this.buildGroupingTree(e)}buildGroupingTree(e){let t=[this.root];for(let n of e){let i=[];for(let s of t)for(let a of s.values){let o=n.grouper(a);o.length===0&&o.push("");for(let u of o){let l=s.children.get(u);l===void 0&&(l=new No([]),s.children.set(u,l),i.push(l)),l.values.push(a)}}t=i}}generateTaskTreeStorage(){return this.root.generateAllPaths()}};var Fo=class{constructor(e,t){this.groups=e,this.groupHeadings=[],this.tasks=t}setGroupHeadings(e){for(let t of e)this.groupHeadings.push(t)}applyTaskLimit(e){this.tasks=this.tasks.slice(0,e)}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} [${t.property}] ${t.displayName}
`;return e+=this.tasksAsStringOfLines(),e}};var Lo=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length,this._groupers=e;let i=new Io(e,t).generateTaskTreeStorage();this.addTaskGroups(i),this.sortTaskGroups(),this.setGroupsHeadings(i)}get groupers(){return this._groupers}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";e+=`Groupers (if any):
`;for(let n of this._groupers){let i=n.reverse?" reverse":"";e+=`- ${n.property}${i}
`}for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTaskGroups(e){for(let[t,n]of e){let i=new Fo(t,n);this.addTaskGroup(i)}}addTaskGroup(e){this._groups.push(e)}sortTaskGroups(){let e=(t,n)=>{let i=t.groups,s=n.groups;for(let a=0;a<i.length;a++){let o=this._groupers[a],u=i[a].localeCompare(s[a],void 0,{numeric:!0});if(u!==0)return o.reverse?-u:u}return 0};this._groups.sort(e)}setGroupsHeadings(e){let t=new Po(e,this._groupers);for(let n of this._groups)n.setGroupHeadings(t.getHeadingsForTaskGroup(n.groups))}applyTaskLimit(e){this._groupers.length!==0&&(this._groups.forEach(t=>{t.applyTaskLimit(e)}),this.recalculateTotalTaskCount())}recalculateTotalTaskCount(){let e=[];this._groups.forEach(n=>{e=[...e,...n.tasks]});let t=[...new Set(e)];this._totalTaskCount=t.length}};var Pn=class extends Me{fieldName(){return"description"}value(e){return we.removeAsSubstringFrom(e.description)}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Pn.cleanDescription(e.description),i=Pn.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){e=we.removeAsSubstringFrom(e);let t=/^\[\[?([^\]]*)]]?/,n=e.match(t);if(n!==null){let i=n[1];e=i.substring(i.indexOf("|")+1)+e.replace(t,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var Uo=class extends ft{fieldName(){return"created"}date(e){return e.createdDate}filterResultIfFieldMissing(){return!1}};var Wo=class extends ft{fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}};var qo=class extends an{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};function AT(r,e){let t=[["task",r]],n=t.map(([a])=>a),i=e&&new Function(...n,`return ${e}`);if(!(i instanceof Function))return"Error parsing group function";let s=t.map(([a,o])=>o);try{return i(...s)}catch(a){let o=`Error: Failed calculating expression "${e}". The error message was: `;return a instanceof Error?o+a.message:o+"Unknown error"}}var Yo=class extends Oe{createFilterOrErrorMessage(e){return ne.fromError(e,"Searching by custom function not yet implemented")}fieldName(){return"function"}filterRegExp(){return null}supportsGrouping(){return!0}createGrouperFromLine(e){let t=Oe.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2];return new nn("function",eA(i),n)}grouperRegExp(){return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`)}grouper(){throw Error("grouper() function not valid for FunctionField. Use createGrouperFromLine() instead.")}};function eA(r){return e=>tA(e,r)}function tA(r,e){try{let t=AT(r,e);return Array.isArray(t)?t.map(i=>i.toString()):t===null?[]:[t.toString()]}catch(t){let n=`Error: Failed calculating expression "${e}". The error message was: `;return t instanceof Error?[n+t.message]:[n+"Unknown error"]}}var $o=class extends Me{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}};var jo=class extends ft{fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}};var Go=class extends ft{fieldName(){return"start"}fieldNameForFilterInstruction(){return"starts"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}};var Bo=class extends ft{constructor(){let e=new hr;e.add("has happens date",t=>this.dates(t).some(n=>n!==null)),e.add("no happens date",t=>!this.dates(t).some(n=>n!==null)),super(e)}fieldName(){return"happens"}fieldNameForExplanation(){return"due, start or scheduled"}date(e){return this.earliestDate(e)}dates(e){return e.happensDates}earliestDate(e){return e.happens.moment}filterResultIfFieldMissing(){return!1}getFilter(e){return t=>this.dates(t).some(n=>e(n))}};var Ho=class extends an{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}supportsSorting(){return!0}comparator(){return(e,t)=>e.recurrence!==null&&t.recurrence===null?-1:e.recurrence===null&&t.recurrence!==null?1:0}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?["Recurring"]:["Not Recurring"]}};var zo=class extends Me{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}createGrouper(e){return new nn(this.fieldNamePlural(),this.grouper(),e)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNamePlural()}( reverse)?$`)}};var Cn=class extends zo{constructor(){super();this.filterInstructions=new hr,this.filterInstructions.add(`has ${this.fieldNameSingular()}`,t=>this.values(t).length>0),this.filterInstructions.add(`has ${this.fieldNamePlural()}`,t=>this.values(t).length>0),this.filterInstructions.add(`no ${this.fieldNameSingular()}`,t=>this.values(t).length===0),this.filterInstructions.add(`no ${this.fieldNamePlural()}`,t=>this.values(t).length===0)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.filter!==void 0?n:super.createFilterOrErrorMessage(t)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}fieldNameSingular(){return"tag"}values(t){return t.tags}supportsSorting(){return!0}createSorterFromLine(t){let n=t.match(this.sorterRegExp());if(n===null)return null;let i=!!n[1],s=isNaN(+n[2])?1:+n[2],a=Cn.makeCompareByTagComparator(s);return new Nr(this.fieldNameSingular(),a,i)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return Cn.makeCompareByTagComparator(1)}static makeCompareByTagComparator(t){return(n,i)=>{if(n.tags.length===0&&i.tags.length===0)return 0;if(n.tags.length===0)return 1;if(i.tags.length===0)return-1;let s=t-1;if(n.tags.length<t&&i.tags.length>=t)return 1;if(i.tags.length<t&&n.tags.length>=t)return-1;if(n.tags.length<t&&i.tags.length<t)return 0;let a=n.tags[s],o=i.tags[s];return a.localeCompare(o,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return t=>t.tags.length==0?["(No tags)"]:t.tags}};var GT=Fi(jT());var Xo=class extends Oe{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){if(t.length===0)return ne.fromError(t,"empty line");let n=this.preprocessExpression(t);try{let i=(0,GT.parse)(n);for(let o of i)if(o.name==="IDENTIFIER"&&o.value){let u=o.value.trim();if(!(u in this.subFields)){let l=Zo(u);if(l===null)return ne.fromError(t,`couldn't parse sub-expression '${u}'`);if(l.error)return ne.fromError(t,`couldn't parse sub-expression '${u}': ${l.error}`);l.filter&&(this.subFields[u]=l.filter)}}else if(o.name==="OPERATOR"){if(o.value==null)return ne.fromError(t,"empty operator in boolean query");if(!this.supportedOperators.includes(o.value))return ne.fromError(t,`unknown boolean operator '${o.value}'`)}let s=o=>this.filterTaskWithParsedQuery(o,i),a=this.constructExplanation(i);return ne.fromFilter(new Ot(t,s,a))}catch(i){let s=i instanceof Error?i.message:"unknown error type";return ne.fromError(t,`malformed boolean query -- ${s} (check the documentation for guidelines)`)}}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(Ae.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(Ae.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(Ae.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(Ae.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i);return n[0]}};var Jo=class extends Me{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;return t===null?["Unknown Location"]:["[["+t+"]]"]}}};var eu=class extends Me{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var un=class extends Oe{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`);return Oe.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=Oe.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let[n,i,s]=t,a=zt[s.toUpperCase()];if(!a)return this.helpMessage(e);let o;switch(i){case"is":o=u=>u.status.type===a;break;case"is not":o=u=>u.status.type!==a;break;default:return this.helpMessage(e)}return ne.fromFilter(new Ot(e,o,new Ae(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`)}helpMessage(e){let t=Object.values(zt).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return ne.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=un.groupName(e),i=un.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[un.groupName(e)]}static groupName(e){let t;switch(e.status.type){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return`%%${t}%%${e.status.type}`}};var tu=class extends Me{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?[e.recurrence.toText()]:["None"]}};var ru=class extends Me{fieldName(){return"folder"}value(e){return e.file.folder}supportsGrouping(){return!0}grouper(){return e=>[Me.escapeMarkdownCharacters(this.value(e))]}};var nu=class extends Me{fieldName(){return"root"}value(e){return e.file.root}supportsGrouping(){return!0}grouper(){return e=>[Me.escapeMarkdownCharacters(this.value(e))]}};var iu=class extends Me{fieldName(){return"backlink"}value(e){let t=e.getLinkText({isFilenameUnique:!0});return t===null?"Unknown Location":t}createFilterOrErrorMessage(e){return ne.fromError(e,"backlink field does not support filtering")}canCreateFilterForLine(e){return!1}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;if(t===null)return["Unknown Location"];let n=Me.escapeMarkdownCharacters(t);return e.precedingHeader&&e.precedingHeader!==t&&(n+=" > "+e.precedingHeader),[n]}}};var Kf=[()=>new eu,()=>new un,()=>new gr,()=>new Ho,()=>new An,()=>new Bo,()=>new Uo,()=>new Go,()=>new jo,()=>new hi,()=>new Wo,()=>new Ti,()=>new ru,()=>new nu,()=>new iu,()=>new Pn,()=>new Cn,()=>new $o,()=>new qo,()=>new Jo,()=>new bi,()=>new tu,()=>new Yo,()=>new Xo];function Zo(r){for(let e of Kf){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function BT(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of Kf){let i=t().createSorterFromLine(r);if(i)return i}return null}function HT(r){let e=/^group by /;if(r.match(e)===null)return null;for(let t of Kf){let i=t().createGrouperFromLine(r);if(i)return i}return null}var su=class{constructor(e){this.taskGroups=e}get totalTasksCount(){return this.taskGroups.totalTasksCount()}get groups(){return this.taskGroups.groups}};var Wr=class{constructor({source:e}){this._limit=void 0;this._taskGroupLimit=void 0;this._layoutOptions=new js;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|created date|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency|tags)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.limitRegexp=/^limit (groups )?(to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(t):this._layoutOptions.explainQuery=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.parseSortBy({line:t}):break;case this.parseGroupBy({line:t}):break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}append(e){return this.source===""?e:e.source===""?this:new Wr({source:`${this.source}
${e.source}`})}explainQuery(){let e="",t=this.filters.length;if(t===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<t;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");e+=this.explainQueryLimits();let{debugSettings:n}=Q();return n.ignoreSortInstructions&&(e+=`

NOTE: All sort instructions, including default sort order, are disabled, due to 'ignoreSortInstructions' setting.`),e}explainQueryLimits(){let e="";function t(n){let i=`

At most ${n} task`;return n!==1&&(i+="s"),i}return this._limit!==void 0&&(e+=t(this._limit),e+=`.
`),this._taskGroupLimit!==void 0&&(e+=t(this._taskGroupLimit),e+=` per group (if any "group by" options are supplied).
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(a=>{e=e.filter(a.filterFunction)});let{debugSettings:t}=Q(),i=(t.ignoreSortInstructions?e:vi.by(this.sorting,e)).slice(0,this.limit),s=new Lo(this.grouping,i);return this._taskGroupLimit!==void 0&&s.applyTaskLimit(this._taskGroupLimit),new su(s)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"created date":this._layoutOptions.hideCreatedDate=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;case"tags":this._layoutOptions.hideTags=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=Zo(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);if(t===null){this._error="do not understand query limit";return}let n=Number.parseInt(t[3],10);t[1]!==void 0?this._taskGroupLimit=n:this._limit=n}parseSortBy({line:e}){let t=BT(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy({line:e}){let t=HT(e);return t?(this._grouping.push(t),!0):!1}};function zT(r){let e="";we.isEmpty()||(e+=`Only tasks containing the global filter '${we.get()}'.

`);let t=new Wr(gf());return t.source.trim()!==""&&(e+=`Explanation of the global query:

${t.explainQuery()}
`),e+=`Explanation of this Tasks code block query:

${new Wr({source:r}).explainQuery()}`,e}function au(r){return new Wr(gf()).append(new Wr({source:r}))}var ou=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return F(this,null,function*(){n.addChild(new Vf({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Vf=class extends Si.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=au(this.source),this.queryType="tasks";break;default:this.query=au(this.source),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=au(this.source),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return F(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");n==="Warm"&&this.query.error===void 0?yield this.renderQuerySearchResults(t,n,s):this.query.error!==void 0?this.renderErrorMessage(s,this.query.error):this.renderLoadingMessage(s),(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}renderQuerySearchResults(t,n,i){return F(this,null,function*(){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`),this.query.layoutOptions.explainQuery&&this.createExplanation(i);let s=this.query.applyQueryToTasks(t);yield this.addAllTaskGroups(s.taskGroups,i);let a=s.totalTasksCount;console.debug(`${a} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(i,a)})}renderErrorMessage(t,n){t.createDiv().innerHTML=`<pre>Tasks query: ${n.replace(/\n/g,"<br>")}</pre>`}renderLoadingMessage(t){t.setText("Loading Tasks ...")}createExplanation(t){let n=zT(this.source),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return F(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=new Zr(this.query.layoutOptions),o=n.createEl("ul");o.addClasses(["contains-task-list","plugin-tasks-query-result"]),o.addClasses(a.specificClasses);let u=this.getGroupingAttribute();u&&u.length>0&&(o.dataset.taskGroupBy=u);for(let l=0;l<s;l++){let c=t[l],p=this.isFilenameUnique({task:c}),m=yield c.toLi({parentUlElement:o,listIndex:l,layoutOptions:this.query.layoutOptions,isFilenameUnique:p,taskLayout:a,obsidianComponent:this});m.querySelectorAll("[data-footnote-id]").forEach(M=>M.remove());let y=this.query.layoutOptions.shortMode,E=m.createSpan("task-extras");this.query.layoutOptions.hideUrgency||this.addUrgency(E,c),this.query.layoutOptions.hideBacklinks||this.addBacklinks(E,c,y,p),this.query.layoutOptions.hideEditButton||this.addEditButton(E,c),o.appendChild(m)}return{taskList:o,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{vo({originalTask:n,newTasks:kt.removeInferredStatusIfNeeded(n,u)})};new rn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addAllTaskGroups(t,n){return F(this,null,function*(){for(let i of t.groups){this.addGroupHeadings(n,i.groupHeadings);let{taskList:s}=yield this.createTasksList({tasks:i.tasks,content:n});n.appendChild(s)}})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return F(this,null,function*(){let i="h6";n.nestingLevel===0?i="h4":n.nestingLevel===1&&(i="h5");let s=t.createEl(i,{cls:"tasks-group-heading"});yield Si.MarkdownRenderer.renderMarkdown(n.displayName,s,this.filePath,this)})}addBacklinks(t,n,i,s){var c;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode");let u;i?u=" \u{1F517}":u=(c=n.getLinkText({isFilenameUnique:s}))!=null?c:"",o.setText(u);let l=this.app.vault;o.addEventListener("click",p=>F(this,null,function*(){let m=yield vf(n,l);if(m){let[T,y]=m;yield this.app.workspace.getLeaf(Si.Keymap.isModEvent(p)).openFile(y,{eState:{line:T}})}})),o.addEventListener("mousedown",p=>F(this,null,function*(){if(p.button===1){let m=yield vf(n,l);if(m){let[T,y]=m;yield this.app.workspace.getLeaf("tab").openFile(y,{eState:{line:T}})}}})),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}getGroupingAttribute(){let t=[];for(let n of this.query.grouping)t.push(n.property);return t.join(",")}};var be=require("obsidian");function KT(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function VT(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function QT(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function XT(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function ZT(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],["f","Fire","x","TODO"],["k","Key","x","TODO"],["w","Win","x","TODO"],["u","Up","x","TODO"],["d","Down","x","TODO"]]}function JT(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function eb(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var tb=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Statuses">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var sr=require("obsidian");var Ln=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=J.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return Ln.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return Ln.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=zt[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new Se,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var Un=new Ln,It=class extends sr.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new tt(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return F(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new sr.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,It.setValid(l,Un.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{It.setValid(i,Un.validateSymbol(this.statusConfiguration()))});let s;new sr.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,It.setValid(l,Un.validateName(this.statusConfiguration()))})}).then(l=>{It.setValid(s,Un.validateName(this.statusConfiguration()))});let a;new sr.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,It.setValid(l,Un.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{It.setValid(a,Un.validateNextSymbol(this.statusConfiguration()))}),new sr.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(p=>{l.addOption(p,p)}),l.setValue(this.type).onChange(p=>{this.type=J.getTypeFromStatusTypeString(p)})}),J.tasksPluginCanCreateCommandsForStatuses()&&new sr.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>F(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new sr.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>F(this,null,function*(){let c=Un.validate(this.statusConfiguration());if(c.length>0){let p=c.join(`
`)+`

Fix errors before saving.`;new sr.Notice(p);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?It.removeValidationError(t):It.setValidationError(t)}};var Ft=class extends be.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return F(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Task Format Settings"}),new be.Setting(t).setName("Task Format").setDesc(Ft.createFragmentWithHTML('<p>The format that Tasks uses to read and write tasks.</p><p><b>Important:</b> Tasks currently only supports one format at a time. Selecting Dataview will currently <b>stop Tasks reading its own emoji signifiers</b>.</p><p>See the <a href="https://publish.obsidian.md/tasks/Reference/Task+Formats/About+Task+Formats">documentation</a>.</p>')).addDropdown(i=>{for(let s of Object.keys(Ar))i.addOption(s,Ar[s].displayName);i.setValue(Q().taskFormat).onChange(s=>F(this,null,function*(){Ge({taskFormat:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global filter Settings"}),new be.Setting(t).setName("Global task filter").setDesc(Ft.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Global+Filter">documentation</a>.</p>')).addText(i=>{i.setPlaceholder("e.g. #task or TODO").setValue(we.get()).onChange(s=>F(this,null,function*(){we.set(s),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=Q();i.setValue(s.removeGlobalFilter).onChange(a=>F(this,null,function*(){Ge({removeGlobalFilter:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global Query"}),mA(new be.Setting(t).setDesc(Ft.createFragmentWithHTML('<p>A query that is automatically included at the start of every Tasks block in the vault. Useful for adding default filters, or layout options.</p><p>See the <a href="https://publish.obsidian.md/tasks/Queries/Global+Query">documentation</a>.</p>')).addTextArea(i=>{let s=Q();i.inputEl.rows=4,i.setPlaceholder(`# For example...
path does not include _templates/
limit 300
show urgency`).setValue(s.globalQuery).onChange(a=>F(this,null,function*(){Ge({globalQuery:a}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=Q();tb.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new be.Setting(t).setName("Set created date on every added task").setDesc(Ft.createFragmentWithHTML(`Enabling this will add a timestamp \u2795 YYYY-MM-DD before other date values, when a task is created with 'Create or edit task', or by completing a recurring task.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Created+date">documentation</a>.</p>`)).addToggle(i=>{let s=Q();i.setValue(s.setCreatedDate).onChange(a=>F(this,null,function*(){Ge({setCreatedDate:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Set done date on every completed task").setDesc(Ft.createFragmentWithHTML('Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Done+date">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.setDoneDate).onChange(a=>F(this,null,function*(){Ge({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Ft.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Use+Filename+as+Default+Date">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>F(this,null,function*(){Ge({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>F(this,null,function*(){let s=Q();yield this.plugin.saveSettings(),i.setValue(Ft.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>F(this,null,function*(){let o=Ft.parseCommaSeparatedFolders(a);Ge({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Recurring task Settings"}),new be.Setting(t).setName("Next recurrence appears on the line below").setDesc(Ft.createFragmentWithHTML('Enabling this will make the next recurrence of a task appear on the line below the completed task. Otherwise the next recurrence will appear before the completed one.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Recurring+Tasks">documentation</a>.</p>')).addToggle(i=>{let{recurrenceOnNextLine:s}=Q();i.setValue(s).onChange(a=>F(this,null,function*(){Ge({recurrenceOnNextLine:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Auto-suggest Settings"}),new be.Setting(t).setName("Auto-suggest task content").setDesc(Ft.createFragmentWithHTML('Enabling this will open an intelligent suggest menu while typing inside a recognized task line.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Auto-Suggest">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.autoSuggestInEditor).onChange(a=>F(this,null,function*(){Ge({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=Q();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>F(this,null,function*(){Ge({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new be.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=Q();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>F(this,null,function*(){Ge({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new be.Setting(t).setName("Provide access keys in dialogs").setDesc(Ft.createFragmentWithHTML('If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Create+or+edit+Task#Keyboard+shortcuts">documentation</a>.</p>')).addToggle(i=>{let s=Q();i.setValue(s.provideAccessKeys).onChange(a=>F(this,null,function*(){Ge({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:he({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,Ge({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new be.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!K_(o.featureFlag))&&(o.type==="checkbox"?new be.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=Q();l.generalSettings[o.settingName]||Dn(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>F(this,null,function*(){Dn(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new be.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=Q();l.generalSettings[o.settingName]||Dn(o.settingName,o.initialValue);let c=p=>F(this,null,function*(){Dn(o.settingName,p),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,be.debounce)(c,500,!0))}):o.type==="textarea"?new be.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=Q();l.generalSettings[o.settingName]||Dn(o.settingName,o.initialValue);let c=p=>F(this,null,function*(){Dn(o.settingName,p),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,be.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=Q();i.coreStatuses.forEach(s=>{rb(t,s,i.coreStatuses,i,n,n.plugin,!0)})}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=Q();i.customStatuses.forEach(l=>{rb(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new be.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>F(this,null,function*(){He.addStatus(i.customStatuses,new tt("","","",!1,"TODO")),yield Ri(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",KT()],["Aura Theme",VT()],["Ebullientworks Theme",QT()],["ITS Theme & SlRvb Checkboxes",XT()],["Minimal Theme",JT()],["Things Theme",eb()],["LYT Mode Theme (Dark mode only)",ZT()]];for(let[l,c]of a)new be.Setting(t).addButton(m=>{let T=`${l}: Add ${c.length} supported Statuses`;m.setButtonText(T).onClick(()=>F(this,null,function*(){yield pA(c,i,n)}))}).infoEl.remove();new be.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>F(this,null,function*(){let p=this.plugin.getTasks().map(T=>T.status),m=Se.getInstance().findUnknownStatuses(p);m.length!==0&&(m.forEach(T=>{He.addStatus(i.customStatuses,T)}),yield Ri(i,n))}))}).infoEl.remove(),new be.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>F(this,null,function*(){He.resetAllCustomStatuses(i),yield Ri(i,n)}))}).infoEl.remove()}},ia=Ft;ia.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function rb(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new J(e).previewText();let u=new be.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>F(this,null,function*(){He.deleteStatus(t,e)&&(yield Ri(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>F(this,null,function*(){let c=new It(s,e,a);c.onClose=()=>F(this,null,function*(){c.saved&&He.replaceStatus(t,e,c.statusConfiguration())&&(yield Ri(n,i))}),c.open()}))}),u.infoEl.remove()}function pA(r,e,t){return F(this,null,function*(){He.bulkAddStatusCollection(e,r).forEach(i=>{new be.Notice(i)}),yield Ri(e,t)})}function Ri(r,e){return F(this,null,function*(){Ge({statusSettings:r}),He.applyToStatusRegistry(r,Se.getInstance()),yield e.saveSettings(!0)})}function mA(r){let{settingEl:e,infoEl:t,controlEl:n}=r,i=n.querySelector("textarea");i!==null&&(e.style.display="block",t.style.marginRight="0px",i.style.minWidth="-webkit-fill-available")}var nb=require("obsidian");var uu=class extends nb.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return we.includedIn(s)&&s.match(H.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){var a,o,u;let n=t.query,i=t.editor.getCursor();return((u=(o=(a=Bs()).buildSuggestions)==null?void 0:o.call(a,n,i.ch,this.settings))!=null?u:[]).map(l=>Dt(he({},l),{context:t}))}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let p=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(p);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var ib=(r,e)=>{let t,n=new Promise((a,o)=>{t=a});return e(r,a=>{let o=a.map(u=>u.toFileLineString()).join(`
`);t(o)}).open(),n};var sb=(r,e)=>{let t=Do({line:"",path:""});return new rn({app:r,task:t,onSubmit:e})};var ab=r=>({createTaskLineModal:()=>ib(r,sb)});var lu=class extends ob.Plugin{get apiV1(){return ab(app)}onload(){return F(this,null,function*(){_o.registerConsoleLogger(),console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new ia({plugin:this})),J_({metadataCache:this.app.metadataCache,vault:this.app.vault,workspace:this.app.workspace}),yield this.loadTaskStatuses();let t=new Ro({obsidianEvents:this.app.workspace});this.cache=new Sn({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new Mo({plugin:this}),this.queryRenderer=new ou({plugin:this,events:t}),this.registerEditorExtension(xT()),this.registerEditorSuggest(new uu(this.app,Q())),new So({plugin:this})})}loadTaskStatuses(){return F(this,null,function*(){let{statusSettings:t}=Q();He.applyToStatusRegistry(t,Se.getInstance())})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return F(this,null,function*(){let t=yield this.loadData();Ge(t),yield this.loadTaskStatuses()})}saveSettings(){return F(this,null,function*(){yield this.saveData(Q())})}getTasks(){var t;return(t=this.cache)==null?void 0:t.getTasks()}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */
